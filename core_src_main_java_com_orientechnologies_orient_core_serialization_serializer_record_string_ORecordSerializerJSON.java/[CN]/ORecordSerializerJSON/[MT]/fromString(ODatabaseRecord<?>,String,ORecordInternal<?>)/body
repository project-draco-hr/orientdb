{
  if (iSource == null)   throw new OSerializationException("Error on unmarshalling JSON content: content is null");
  iSource=iSource.trim();
  if (!iSource.startsWith("{") || !iSource.endsWith("}"))   throw new OSerializationException("Error on unmarshalling JSON content: content must be embraced by { }");
  if (iRecord != null) {
    iRecord.reset();
    iRecord.setDirty();
  }
  iSource=iSource.substring(1,iSource.length() - 1).trim();
  String[] fields=OStringParser.getWords(iSource,":,",true);
  try {
    if (fields != null && fields.length > 0) {
      String fieldName;
      String fieldValue;
      String fieldValueAsString;
      for (int i=0; i < fields.length; i+=2) {
        fieldName=fields[i];
        fieldName=fieldName.substring(1,fieldName.length() - 1);
        fieldValue=fields[i + 1];
        fieldValueAsString=fieldValue.length() >= 2 ? fieldValue.substring(1,fieldValue.length() - 1) : fieldValue;
        if (fieldName.equals(ATTRIBUTE_ID))         iRecord.setIdentity(new ORecordId(fieldValueAsString));
 else         if (fieldName.equals(ATTRIBUTE_VERSION))         iRecord.setVersion(Integer.parseInt(fieldValue));
 else         if (fieldName.equals(ATTRIBUTE_TYPE)) {
          if (iRecord == null || iRecord.getRecordType() != fieldValueAsString.charAt(0)) {
            iRecord=ORecordFactory.newInstance((byte)fieldValueAsString.charAt(0));
            iRecord.setDatabase(iDatabase);
          }
        }
 else         if (fieldName.equals(ATTRIBUTE_CLASS) && iRecord instanceof ODocument)         ((ODocument)iRecord).setClassNameIfExists("null".equals(fieldValueAsString) ? null : fieldValueAsString);
 else         if (fieldName.equals("value")) {
          if (iRecord instanceof ORecordColumn) {
            fieldValueAsString=fieldValueAsString.trim();
            final String[] items=OStringParser.getWords(fieldValueAsString,",");
            for (            String item : items) {
              ((ORecordColumn)iRecord).add(item);
            }
          }
 else           if (iRecord instanceof ORecordBytes) {
            iRecord.fromStream(OBase64Utils.decode(fieldValueAsString));
          }
 else           if (iRecord instanceof ORecordStringable) {
            ((ORecordStringable)iRecord).value(fieldValueAsString);
          }
        }
 else {
          if (iRecord instanceof ODocument)           ((ODocument)iRecord).field(fieldName,getValue((ODocument)iRecord,fieldName,fieldValue,fieldValueAsString,null,null));
        }
      }
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
    throw new OSerializationException("Error on unmarshalling JSON content",e);
  }
  return iRecord;
}
