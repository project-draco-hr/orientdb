{
  String dbSerializerName="";
  if (iDatabase != null)   dbSerializerName=iDatabase.getSerializer().toString();
  String name=getRecordSerializerName();
  if (ORecordInternal.getRecordType(record) == ODocument.RECORD_TYPE && !dbSerializerName.equals(name)) {
    ORecordInternal.fill(record,rid,version,null,true);
    ORecordSerializer ser=ORecordSerializerFactory.instance().getFormat(name);
    ser.fromStream(buffer,record,null);
    record.setDirty();
  }
 else   ORecordInternal.fill(record,rid,version,buffer,true);
}
