{
  while (target.hasNext()) {
    value=target.next();
    index++;
    if (value instanceof OIdentifiable) {
      final ORecord<?> rec=((OIdentifiable)value).getRecord();
      if (rec instanceof ODocument) {
        final OTraverseRecordProcess subProcess=new OTraverseRecordProcess(command,(ODocument)rec);
        final OIdentifiable subValue=subProcess.process();
        if (subValue != null)         return subValue;
      }
    }
  }
  return drop();
}
