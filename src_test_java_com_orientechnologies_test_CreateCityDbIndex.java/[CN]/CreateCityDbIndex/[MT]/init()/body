{
  String buildDirectory=System.getProperty("buildDirectory",".");
  if (buildDirectory == null)   buildDirectory=".";
  ZipFile zipFile=new ZipFile("files/allCountries.zip");
  Enumeration<? extends ZipEntry> entries=zipFile.entries();
  while (entries.hasMoreElements()) {
    ZipEntry entry=entries.nextElement();
    if (entry.getName().equals("allCountries.txt")) {
      InputStream stream=zipFile.getInputStream(entry);
      lineReader=new LineNumberReader(new InputStreamReader(stream));
    }
  }
  Directory dir=NIOFSDirectory.open(new File("Spatial"));
  IndexWriterConfig iwc=new IndexWriterConfig(Version.LUCENE_47,new StandardAnalyzer(Version.LUCENE_47));
  iwc.setOpenMode(IndexWriterConfig.OpenMode.CREATE_OR_APPEND);
  writer=new IndexWriter(dir,iwc);
  this.ctx=SpatialContext.GEO;
  SpatialPrefixTree grid=new GeohashPrefixTree(ctx,11);
  this.strategy=new RecursivePrefixTreeStrategy(grid,"location");
}
