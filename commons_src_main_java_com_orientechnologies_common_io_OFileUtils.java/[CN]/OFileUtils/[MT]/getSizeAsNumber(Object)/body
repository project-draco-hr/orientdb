{
  if (iSize == null)   throw new IllegalArgumentException("Size is null");
  if (iSize instanceof Number)   return ((Number)iSize).longValue();
  String size=iSize.toString();
  boolean number=true;
  for (int i=size.length() - 1; i >= 0; --i) {
    if (!Character.isDigit(size.charAt(i))) {
      number=false;
      break;
    }
  }
  if (number)   return Long.parseLong(size);
 else {
    size=size.toUpperCase();
    int pos=size.indexOf("KB");
    if (pos > -1)     return Long.parseLong(size.substring(0,pos)) * KILOBYTE;
    pos=size.indexOf("MB");
    if (pos > -1)     return Long.parseLong(size.substring(0,pos)) * MEGABYTE;
    pos=size.indexOf("GB");
    if (pos > -1)     return Long.parseLong(size.substring(0,pos)) * GIGABYTE;
    pos=size.indexOf("TB");
    if (pos > -1)     return Long.parseLong(size.substring(0,pos)) * TERABYTE;
    pos=size.indexOf('B');
    if (pos > -1)     return Long.parseLong(size.substring(0,pos));
    pos=size.indexOf('%');
    if (pos > -1)     return -1 * Long.parseLong(size.substring(0,pos));
    throw new IllegalArgumentException("Size " + size + " has a unrecognizable format");
  }
}
