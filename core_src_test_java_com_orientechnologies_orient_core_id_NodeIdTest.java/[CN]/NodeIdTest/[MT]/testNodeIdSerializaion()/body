{
  final ByteArrayOutputStream out=new ByteArrayOutputStream();
  final ObjectOutputStream objectOutputStream=new ObjectOutputStream(out);
  final List<ONodeId> serializedNodes=new ArrayList<ONodeId>();
  for (int i=0; i < 10000; i++) {
    final ONodeId nodeId=ONodeId.generateUniqueId();
    objectOutputStream.writeObject(nodeId);
    serializedNodes.add(nodeId);
  }
  objectOutputStream.close();
  byte[] serializedContent=out.toByteArray();
  final ByteArrayInputStream in=new ByteArrayInputStream(serializedContent);
  final ObjectInputStream objectInputStream=new ObjectInputStream(in);
  for (  ONodeId nodeId : serializedNodes) {
    final ONodeId deserializedNodeId=(ONodeId)objectInputStream.readObject();
    Assert.assertEquals(deserializedNodeId,nodeId);
  }
  Assert.assertEquals(objectInputStream.available(),0);
}
