{
  if (e instanceof ODocument) {
    converted=false;
    underlying.put(iKey,e);
  }
 else {
    if (getDatabase().getRecordByUserObject(e,false) == null) {
      underlying.put(iKey,getDatabase().pojo2Stream((TYPE)e,new ODocument((ODatabaseRecord)getDatabase().getUnderlying())));
    }
 else {
      underlying.put(iKey,getDatabase().getRecordByUserObject(e,false));
    }
  }
  setDirty();
  return super.put(iKey,e);
}
