{
  document.setInternalStatus(ORecordElement.STATUS.UNMARSHALLING);
  try {
    document.field("name",name);
    document.field("shortName",shortName);
    document.field("defaultClusterId",defaultClusterId);
    document.field("clusterIds",clusterIds);
    document.field("overSize",overSize);
    final Set<ODocument> props=new HashSet<ODocument>();
    for (    final OProperty p : properties.values()) {
      props.add(((OPropertyImpl)p).toStream());
    }
    document.field("properties",props,OType.EMBEDDEDSET);
    if (superClass != null)     document.field("superClass",superClass.getName());
  }
  finally {
    document.setInternalStatus(ORecordElement.STATUS.LOADED);
  }
  return document;
}
