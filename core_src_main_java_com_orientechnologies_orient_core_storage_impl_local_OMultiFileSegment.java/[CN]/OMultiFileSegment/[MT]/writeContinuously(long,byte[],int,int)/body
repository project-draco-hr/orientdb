{
  long[] pos=getRelativePosition(iPosition);
  OFile file;
  int remainingSize=length;
  long offset=pos[1];
  for (int i=(int)pos[0]; remainingSize > 0; ++i) {
    file=files[i];
    if (remainingSize > file.getFilledUpTo() - offset) {
      if (file.getFilledUpTo() < offset) {
        throw new ODatabaseException("range check! " + file.getFilledUpTo() + " "+ offset);
      }
      file.write(offset,iData,(int)(file.getFilledUpTo() - offset),arrayOffset + iData.length - remainingSize);
      remainingSize-=(file.getFilledUpTo() - offset);
    }
 else {
      file.write(offset,iData,remainingSize,arrayOffset + iData.length - remainingSize);
      remainingSize=0;
    }
    offset=0;
  }
}
