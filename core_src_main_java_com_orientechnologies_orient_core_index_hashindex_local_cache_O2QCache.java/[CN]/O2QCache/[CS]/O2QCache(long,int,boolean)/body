{
  cacheLock.acquireWriteLock();
  try {
    this.pageSize=pageSize;
    this.filePages=new ConcurrentHashMap<Long,Set<Long>>();
    int normalizedSize=normalizeMemory(readCacheMaxMemory,pageSize);
    if (checkMinSize && normalizedSize < MIN_CACHE_SIZE)     normalizedSize=MIN_CACHE_SIZE;
    maxSize=normalizedSize;
    K_IN=maxSize >> 2;
    K_OUT=maxSize >> 1;
    am=new ConcurrentLRUList();
    a1out=new ConcurrentLRUList();
    a1in=new ConcurrentLRUList();
  }
  finally {
    cacheLock.releaseWriteLock();
  }
}
