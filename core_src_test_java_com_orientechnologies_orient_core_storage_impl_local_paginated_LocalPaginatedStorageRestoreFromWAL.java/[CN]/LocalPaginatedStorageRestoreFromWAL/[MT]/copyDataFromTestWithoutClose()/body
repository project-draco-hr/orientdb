{
  final Path testStoragePath=Paths.get(baseDocumentTx.getURL().substring("plocal:".length()));
  Path buildPath=Paths.get(buildDir.toURI());
  final Path copyTo=buildPath.resolve("testLocalPaginatedStorageRestoreFromWAL");
  Files.copy(testStoragePath,copyTo);
  Files.walkFileTree(testStoragePath,new SimpleFileVisitor<Path>(){
    @Override public FileVisitResult visitFile(    Path file,    BasicFileAttributes attrs) throws IOException {
      Path fileToCopy=copyTo.resolve(testStoragePath.relativize(file));
      if (fileToCopy.endsWith("baseLocalPaginatedStorageRestoreFromWAL.wmr"))       fileToCopy=fileToCopy.getParent().resolve("testLocalPaginatedStorageRestoreFromWAL.wmr");
 else       if (fileToCopy.endsWith("baseLocalPaginatedStorageRestoreFromWAL.0.wal"))       fileToCopy=fileToCopy.getParent().resolve("testLocalPaginatedStorageRestoreFromWAL.0.wal");
      Files.copy(file,fileToCopy);
      return FileVisitResult.CONTINUE;
    }
  }
);
}
