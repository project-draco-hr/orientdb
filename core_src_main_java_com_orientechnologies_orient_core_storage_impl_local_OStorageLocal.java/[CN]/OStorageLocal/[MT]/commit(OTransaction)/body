{
  modificationLock.prohibitModifications();
  try {
    lock.acquireExclusiveLock();
    try {
      try {
        txManager.clearLogEntries(iTx);
        txManager.commitAllPendingRecords(iTx);
        if (OGlobalConfiguration.TX_COMMIT_SYNCH.getValueAsBoolean())         synch();
      }
 catch (      RuntimeException e) {
        rollback(iTx);
        throw e;
      }
catch (      IOException e) {
        rollback(iTx);
        throw new OException(e);
      }
 finally {
        try {
          txManager.clearLogEntries(iTx);
        }
 catch (        Exception e) {
          OLogManager.instance().error(this,"Clear tx log entries failed",e);
        }
      }
    }
  finally {
      lock.releaseExclusiveLock();
    }
  }
  finally {
    modificationLock.allowModifications();
  }
}
