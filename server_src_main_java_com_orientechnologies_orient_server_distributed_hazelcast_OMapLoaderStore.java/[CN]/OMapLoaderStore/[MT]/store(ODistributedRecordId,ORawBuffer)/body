{
  try {
    OStorage storage=getLocalStorage(iRecordId.dbName);
    if (iRecordId.rid.isValid()) {
      OLogManager.instance().config(this,"Updating record to database: %s",iRecordId);
      storage.updateRecord(0,iRecordId.rid,iValue.buffer,iValue.version,iValue.recordType);
    }
 else {
      OLogManager.instance().config(this,"Creating record to database: %s",iRecordId);
      iRecordId.rid.clusterPosition=storage.createRecord(0,iValue.buffer,iValue.recordType);
      for (      Instance instance : Hazelcast.getInstances()) {
        if (instance.getInstanceType() == InstanceType.MAP && instance.getId().toString().substring(2).equals(iRecordId.dbName)) {
          ((IMap<ODistributedRecordId,ORawBuffer>)instance).put(iRecordId,iValue);
          break;
        }
      }
    }
  }
 catch (  Exception e) {
    throw new ODistributedException("Error on saving record: " + iRecordId,e);
  }
}
