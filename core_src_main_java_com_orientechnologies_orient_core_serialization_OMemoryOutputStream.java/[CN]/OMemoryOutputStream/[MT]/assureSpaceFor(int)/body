{
  final byte[] mbuf=buffer;
  final int pos=position;
  final int capacity=position + iLength;
  final int mbuflen=mbuf.length;
  if (mbuflen < capacity) {
    OProfiler.getInstance().updateCounter("OMemOutStream.resize",+1);
    final byte[] newbuf=new byte[Math.max(mbuflen << 1,capacity)];
    if (pos < NATIVE_COPY_THRESHOLD)     for (int i=0; i < pos; ++i)     newbuf[i]=mbuf[i];
 else     System.arraycopy(mbuf,0,newbuf,0,pos);
    buffer=newbuf;
  }
}
