{
  lock.acquireExclusiveLock();
  try {
    final List<OTransactionRecordEntry> tmpEntries=new ArrayList<OTransactionRecordEntry>();
    while (iTx.getCurrentRecordEntries().iterator().hasNext()) {
      for (      OTransactionRecordEntry txEntry : iTx.getCurrentRecordEntries())       tmpEntries.add(txEntry);
      iTx.clearRecordEntries();
      for (      OTransactionRecordEntry txEntry : tmpEntries)       commitEntry(iTx,txEntry);
      tmpEntries.clear();
    }
    OTransactionAbstract.updateCacheFromEntries(this,iTx,iTx.getAllRecordEntries(),true);
  }
 catch (  IOException e) {
    rollback(iTx);
  }
 finally {
    lock.releaseExclusiveLock();
  }
}
