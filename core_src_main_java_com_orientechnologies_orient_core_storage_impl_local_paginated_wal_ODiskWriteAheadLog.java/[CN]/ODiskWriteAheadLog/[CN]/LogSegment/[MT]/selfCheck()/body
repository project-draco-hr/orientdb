{
  if (!pagesCache.isEmpty())   throw new IllegalStateException("WAL cache is not empty, we can not verify WAL after it was started to be used");
synchronized (rndFile) {
    long pagesCount=rndFile.length() / OWALPage.PAGE_SIZE;
    if (rndFile.length() % OWALPage.PAGE_SIZE > 0) {
      OLogManager.instance().error(this,"Last WAL page was written partially, auto fix.");
      rndFile.setLength(OWALPage.PAGE_SIZE * pagesCount);
    }
  }
}
