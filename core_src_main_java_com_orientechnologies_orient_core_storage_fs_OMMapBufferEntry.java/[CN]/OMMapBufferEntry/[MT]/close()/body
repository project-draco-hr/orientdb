{
  acquireExclusiveLock();
  try {
    if (buffer != null) {
      if (dirty)       buffer.force();
      if (cleanerMethod != null) {
        try {
          final Object cleaner=cleanerMethod.invoke(buffer);
          if (cleaner != null)           cleaner.getClass().getMethod("clean").invoke(cleaner);
        }
 catch (        Exception e) {
          OLogManager.instance().error(this,"Error on calling Sun's MMap buffer clean",e);
        }
      }
      buffer=null;
    }
    counter=0;
    file=null;
  }
  finally {
    releaseExclusiveLock();
  }
}
