{
  OClass roleClass=database.getMetadata().getSchema().getClass("ORole");
  boolean checkData=true;
  if (roleClass == null) {
    roleClass=database.getMetadata().getSchema().createClass("ORole",identityClass);
    checkData=false;
  }
 else   if (!roleClass.getSuperClasses().contains(identityClass))   roleClass.setSuperClasses(Arrays.asList(identityClass));
  if (!roleClass.existsProperty("name")) {
    ((OClassImpl)roleClass).createProperty("name",OType.STRING,(OType)null,checkData).setMandatory(true).setNotNull(true).setCollate("ci");
    roleClass.createIndex("ORole.name",INDEX_TYPE.UNIQUE,ONullOutputListener.INSTANCE,"name");
  }
 else {
    final OProperty name=roleClass.getProperty("name");
    if (name.getAllIndexes().isEmpty())     roleClass.createIndex("ORole.name",INDEX_TYPE.UNIQUE,ONullOutputListener.INSTANCE,"name");
  }
  if (!roleClass.existsProperty("mode"))   ((OClassImpl)roleClass).createProperty("mode",OType.BYTE,(OType)null,checkData);
  if (!roleClass.existsProperty("rules"))   ((OClassImpl)roleClass).createProperty("rules",OType.EMBEDDEDMAP,OType.BYTE,checkData);
  if (!roleClass.existsProperty("inheritedRole"))   ((OClassImpl)roleClass).createProperty("inheritedRole",OType.LINK,roleClass,checkData);
  return roleClass;
}
