{
  final Set<OTransactionEntry> allEntries=new HashSet<OTransactionEntry>();
  final List<OTransactionEntry> tmpEntries=new ArrayList<OTransactionEntry>();
  while (iTx.getEntries().iterator().hasNext()) {
    for (    OTransactionEntry txEntry : iTx.getEntries())     if (!allEntries.contains(txEntry))     tmpEntries.add(txEntry);
    iTx.clearEntries();
    if (tmpEntries.size() > 0) {
      for (      OTransactionEntry txEntry : tmpEntries)       commitEntry(iTx,txEntry,iTx.isUsingLog());
      allEntries.addAll(tmpEntries);
      tmpEntries.clear();
    }
  }
  txSegment.clearLogEntries(iTx.getId());
  OTransactionAbstract.updateCacheFromEntries(storage,iTx,allEntries);
  allEntries.clear();
}
