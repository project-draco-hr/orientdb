{
  ODatabaseDocumentTx db=new ODatabaseDocumentTx("memory:test");
  db.create();
  try {
    OClass point=db.getMetadata().getSchema().createClass("Point");
    point.createProperty("latitude",OType.DOUBLE);
    point.createProperty("longitude",OType.DOUBLE);
    db.command(new OCommandSQL("CREATE INDEX Point.ll ON Point(latitude,longitude) SPATIAL ENGINE LUCENE")).execute();
    ODocument document=new ODocument("Point");
    document.field("latitude",42.2814837);
    document.field("longitude",-83.7605452);
    db.save(document);
    List<?> query=db.query(new OSQLSynchQuery<ODocument>("SELECT FROM Point WHERE [latitude, longitude] WITHIN [[42.26531323615103,-83.71986351411135],[42.29239784478525,-83.7662120858887]]"));
    Assert.assertEquals(query.size(),1);
  }
  finally {
    db.drop();
  }
}
