{
  acquireExclusiveLock();
  try {
    document.setDatabase(getDatabase());
    final Collection<ODocument> idxs=document.field(CONFIG_INDEXES);
    indexes.clear();
    classPropertyIndex.clear();
    if (idxs != null) {
      OIndexInternal<?> index;
      for (      ODocument d : idxs) {
        index=OIndexFactory.instance().newInstance(getDatabase(),(String)d.field(OIndexInternal.CONFIG_TYPE));
        d.setDatabase(getDatabase());
        ((OIndexInternal<?>)index).loadFromConfiguration(d);
        addIndexInternal(index);
      }
    }
  }
  finally {
    releaseExclusiveLock();
  }
}
