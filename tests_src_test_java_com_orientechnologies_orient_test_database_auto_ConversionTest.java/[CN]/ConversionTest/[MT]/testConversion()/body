{
  final ODatabaseDocumentTx database=new ODatabaseDocumentTx("local:/home/andrey/Development/orientdb/archiva.db");
  database.open("admin","admin");
  final ODatabaseExport databaseExport=new ODatabaseExport(database,"/home/andrey/Development/orientdb/archiva.db.json",new OCommandOutputListener(){
    @Override public void onMessage(    String iText){
      System.out.println(iText);
    }
  }
);
  databaseExport.exportDatabase();
  databaseExport.close();
  final ODatabaseDocumentTx newDatabase=new ODatabaseDocumentTx("plocal:/home/andrey/Development/orientdb/new.archiva.db");
  newDatabase.create();
  final ODatabaseImport databaseImport=new ODatabaseImport(newDatabase,"/home/andrey/Development/orientdb/archiva.db.json.gz",new OCommandOutputListener(){
    @Override public void onMessage(    String iText){
      System.out.println(iText);
    }
  }
);
  databaseImport.importDatabase();
  database.close();
  databaseImport.close();
  database.open("admin","admin");
  OGraphMigration graphMigration=new OGraphMigration(newDatabase,new OCommandOutputListener(){
    @Override public void onMessage(    String iText){
      System.out.println(iText);
    }
  }
);
  graphMigration.execute();
  database.close();
}
