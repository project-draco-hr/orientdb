{
  if (status == STATUS.CLOSED)   return false;
  lock.acquireSharedLock();
  try {
    if (status == STATUS.CLOSED)     return false;
    final int remainingUsers=getUsers() > 0 ? removeUser() : 0;
    return force || (!(OGlobalConfiguration.STORAGE_KEEP_OPEN.getValueAsBoolean() && this instanceof OStorageEmbedded) && remainingUsers == 0);
  }
  finally {
    lock.releaseSharedLock();
  }
}
