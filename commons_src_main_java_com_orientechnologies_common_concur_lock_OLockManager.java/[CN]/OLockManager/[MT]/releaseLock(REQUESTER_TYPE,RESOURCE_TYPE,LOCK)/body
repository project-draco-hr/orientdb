{
  final CountableLock lock;
synchronized (map) {
    lock=map.get(iResourceId);
    if (lock == null)     throw new OLockException("Error on releasing a non acquired lock by the requester '" + iRequester + "' against the resource: '"+ iResourceId+ "'");
    lock.countLocks--;
    if (lock.countLocks == 0)     map.remove(iResourceId);
  }
  if (iLockType == LOCK.SHARED)   lock.readLock().unlock();
 else   lock.writeLock().unlock();
}
