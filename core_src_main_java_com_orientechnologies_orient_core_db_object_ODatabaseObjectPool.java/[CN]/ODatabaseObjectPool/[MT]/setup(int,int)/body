{
  if (dbPool == null) synchronized (this) {
    if (dbPool == null) {
      dbPool=new ODatabasePoolAbstract<ODatabaseObjectTx>(this,iMinSize,iMaxSize){
        public ODatabaseObjectTx createNewResource(        final String iDatabaseName,        final Object... iAdditionalArgs){
          if (iAdditionalArgs.length < 2)           throw new OSecurityAccessException("Username and/or password missing");
          final ODatabaseObjectTxPooled db=new ODatabaseObjectTxPooled((ODatabaseObjectPool)owner,iDatabaseName,(String)iAdditionalArgs[0],(String)iAdditionalArgs[1]);
          ODatabaseRecordThreadLocal.INSTANCE.set(db.getUnderlying());
          return db;
        }
        public boolean reuseResource(        final String iKey,        final Object[] iAdditionalArgs,        final ODatabaseObjectTx iValue){
          ODatabaseRecordThreadLocal.INSTANCE.set(iValue.getUnderlying());
          ((ODatabaseObjectTxPooled)iValue).reuse(owner,iAdditionalArgs);
          if (!iValue.getStorage().isClosed()) {
            iValue.getMetadata().getSecurity().authenticate((String)iAdditionalArgs[0],(String)iAdditionalArgs[1]);
            return true;
          }
          return false;
        }
      }
;
    }
  }
}
