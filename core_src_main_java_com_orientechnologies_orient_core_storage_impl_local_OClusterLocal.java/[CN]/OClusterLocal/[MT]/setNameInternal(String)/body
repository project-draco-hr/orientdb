{
  if (storage.getClusterIdByName(iNewName) > -1)   throw new IllegalArgumentException("Cluster with name '" + iNewName + "' already exists");
  acquireExclusiveLock();
  try {
    for (int i=0; i < files.length; i++) {
      final String osFileName=files[i].getName();
      if (osFileName.startsWith(name)) {
        final File newFile=new File(storage.getStoragePath() + "/" + iNewName+ osFileName.substring(osFileName.lastIndexOf(name) + name.length()));
        for (        OStorageFileConfiguration conf : config.infoFiles) {
          if (conf.parent.name.equals(name))           conf.parent.name=iNewName;
          if (conf.path.endsWith(osFileName))           conf.path=new String(conf.path.replace(osFileName,newFile.getName()));
        }
        boolean renamed=files[i].renameTo(newFile);
        while (!renamed) {
          OMemoryWatchDog.freeMemory(100);
          renamed=files[i].renameTo(newFile);
        }
      }
    }
    config.name=iNewName;
    holeSegment.rename(name,iNewName);
    storage.renameCluster(name,iNewName);
    name=iNewName;
    storage.getConfiguration().update();
  }
  finally {
    releaseExclusiveLock();
  }
}
