{
  if (!getNodeSource().equals(iManager.getLocalNodeName())) {
    final String databaseName=database.getName();
    final Lock lock=iManager.getLock(databaseName);
    if (lock.tryLock()) {
      try {
        ODistributedServerLog.warn(this,iManager.getLocalNodeName(),getNodeSource(),DIRECTION.OUT,"deploying database %s...",databaseName);
        final File f=new File(BACKUP_DIRECTORY + "/" + database.getName());
        if (f.exists())         f.delete();
        f.createNewFile();
        database.backup(new FileOutputStream(f),null,null);
        ODistributedServerLog.warn(this,iManager.getLocalNodeName(),getNodeSource(),DIRECTION.OUT,"sending the compressed database '%s' over the network to node '%s', size=%s...",databaseName,getNodeSource(),OFileUtils.getSizeAsString(f.length()));
        return new ODistributedDatabaseChunk(f,0,CHUNK_MAX_SIZE);
      }
  finally {
        lock.unlock();
      }
    }
 else     ODistributedServerLog.debug(this,iManager.getLocalNodeName(),getNodeSource(),DIRECTION.NONE,"skip deploying database %s because another node is doing it",databaseName);
  }
 else   ODistributedServerLog.debug(this,iManager.getLocalNodeName(),getNodeSource(),DIRECTION.NONE,"skip deploying database from the same node");
  return Boolean.FALSE;
}
