{
  FileChangesContainer changesContainer=filePageChanges.get(fileId);
  if (changesContainer == null) {
    changesContainer=new FileChangesContainer();
    filePageChanges.put(fileId,changesContainer);
  }
 else   if (changesContainer.isNew || changesContainer.maxNewPageIndex > -1)   return changesContainer.maxNewPageIndex + 1;
  return diskCache.getFilledUpTo(fileId);
}
