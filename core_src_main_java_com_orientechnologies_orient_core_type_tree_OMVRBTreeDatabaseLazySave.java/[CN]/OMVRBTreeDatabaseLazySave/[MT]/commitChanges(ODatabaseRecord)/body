{
  if (database.getTransaction() instanceof OTransactionOptimistic || maxUpdatesBeforeSave <= 1 || (maxUpdatesBeforeSave > 0 && ++updates >= maxUpdatesBeforeSave)) {
    updates=0;
    return lazySave();
  }
  return 0;
}
