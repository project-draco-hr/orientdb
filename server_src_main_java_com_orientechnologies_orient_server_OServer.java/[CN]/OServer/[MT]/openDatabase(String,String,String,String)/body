{
  final String path=getStoragePath(iDbUrl);
  final ODatabaseComplexInternal<?> database=Orient.instance().getDatabaseFactory().createDatabase(iDbType,path);
  if (database.isClosed())   if (database.getStorage() instanceof ODirectMemoryStorage)   database.create();
 else {
    try {
      database.open(iUser,iPassword);
    }
 catch (    OSecurityException e) {
      try {
        serverLogin(iUser,iPassword,"database.passthrough");
      }
 catch (      OSecurityException ex) {
        throw e;
      }
      database.setProperty(ODatabase.OPTIONS.SECURITY.toString(),Boolean.FALSE);
      database.open(iUser,iPassword);
    }
  }
  return database;
}
