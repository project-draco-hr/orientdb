{
  final OrientVertexType c1=new OrientGraphNoTx(databaseDocumentTx).createVertexType("C1");
  c1.createProperty("p1",OType.STRING);
  c1.createIndex("p1","FULLTEXT",null,null,"LUCENE",new String[]{"p1"});
  final OrientGraph graph=new OrientGraph(databaseDocumentTx);
  graph.begin();
  final OrientVertex result=graph.addVertex("class:C1");
  result.setProperty("p1","abc");
  final String query="select from C1 where p1 lucene \"abc\" limit 1";
  final List<ODocument> vertices=ODatabaseRecordThreadLocal.INSTANCE.get().command(new OSQLSynchQuery<ODocument>(query)).execute();
  Assert.assertEquals(vertices.size(),1);
}
