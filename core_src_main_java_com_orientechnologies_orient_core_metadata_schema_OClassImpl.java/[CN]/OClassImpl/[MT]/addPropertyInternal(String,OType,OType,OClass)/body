{
  if (iName == null || iName.length() == 0)   throw new OSchemaException("Found property name null");
  final Character wrongCharacter=OSchemaShared.checkNameIfValid(iName);
  if (wrongCharacter != null)   throw new OSchemaException("Invalid property name found. Character '" + wrongCharacter + "' cannot be used in property name.");
  final String lowerName=iName.toLowerCase();
  if (properties.containsKey(lowerName))   throw new OSchemaException("Class " + name + " already has property '"+ iName+ "'");
  final OPropertyImpl prop=new OPropertyImpl(this,iName,iType);
  properties.put(lowerName,prop);
  fixedSize+=iType.size;
  if (iLinkedType != null)   prop.setLinkedTypeInternal(iLinkedType);
 else   if (iLinkedClass != null)   prop.setLinkedClassInternal(iLinkedClass);
  return prop;
}
