{
  EntityWithMap toStore=new EntityWithMap();
  toStore.setId(0);
  EntityWithMap mapElement1=new EntityWithMap();
  mapElement1.setId(1);
  EntityWithMap mapElement2=new EntityWithMap();
  mapElement2.setId(2);
  Map<String,EntityWithMap> mapToStore=new HashMap<String,OObjectLazyMapTest.EntityWithMap>();
  mapToStore.put(String.valueOf(mapElement1.getId()),mapElement1);
  mapToStore.put(String.valueOf(mapElement2.getId()),mapElement2);
  toStore.setMap(mapToStore);
  EntityWithMap fromDb=this.databaseTx.save(toStore);
  assertTrue(fromDb != null);
  assertTrue(fromDb.getMap() != null);
  Map<String,EntityWithMap> testMap=fromDb.getMap();
  assertTrue(testMap != null);
  assertTrue(testMap.getClass() == OObjectLazyMap.class);
  assertTrue(testMap.getOrDefault(String.valueOf(mapElement1.getId()),null) != null);
  assertTrue(testMap.getOrDefault(String.valueOf(mapElement2.getId()),null) != null);
  assertTrue(testMap.getOrDefault("3",null) == null);
  assertTrue(testMap.getOrDefault("3",mapElement1) == mapElement1);
}
