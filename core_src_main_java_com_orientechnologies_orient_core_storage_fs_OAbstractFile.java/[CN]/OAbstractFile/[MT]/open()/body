{
  if (!osFile.exists() || osFile.length() == 0)   throw new FileNotFoundException("File: " + osFile.getAbsolutePath());
  openChannel((int)osFile.length());
  OLogManager.instance().debug(this,"Checking file integrity of " + osFile.getName() + "...");
  final int fileSize=size;
  init();
  if (filledUpTo > 0 && filledUpTo > size) {
    OLogManager.instance().warn(this,"Invalid filledUp value (%d) for file %s. Resetting the file size %d to the os file size: %d. Probably the file was not closed correctly last time",filledUpTo,getOsFile().getAbsolutePath(),size,fileSize);
    setSize(fileSize);
  }
  if (filledUpTo > size || filledUpTo < 0)   OLogManager.instance().error(this,"Invalid filledUp size (=" + filledUpTo + "). The file could be corrupted",null,OStorageException.class);
  if (failCheck) {
    boolean softlyClosed=isSoftlyClosed();
    if (softlyClosed)     setSoftlyClosed(false);
    return softlyClosed;
  }
  return true;
}
