{
  OPageChanges pageChanges=new OPageChanges();
  for (byte i=17; i >= 0; i--) {
    pageChanges.addChanges(i * 10,new byte[]{i,(byte)(i + 1),(byte)(i + 2),(byte)(i + 3)},new byte[]{(byte)(i + 3),(byte)(i + 2),(byte)(i + 1),i});
  }
  ODirectMemoryPointer pointer=new ODirectMemoryPointer(1024 + ODurablePage.PAGE_PADDING);
  pageChanges.applyChanges(pointer);
  for (byte i=0; i < 17; i++) {
    Assert.assertEquals(pointer.get(i * 10 + ODurablePage.PAGE_PADDING,4),new byte[]{i,(byte)(i + 1),(byte)(i + 2),(byte)(i + 3)});
  }
  pageChanges.revertChanges(pointer);
  for (byte i=0; i < 17; i++) {
    Assert.assertEquals(pointer.get(i * 10 + ODurablePage.PAGE_PADDING,4),new byte[]{(byte)(i + 3),(byte)(i + 2),(byte)(i + 1),i});
  }
  pointer.free();
}
