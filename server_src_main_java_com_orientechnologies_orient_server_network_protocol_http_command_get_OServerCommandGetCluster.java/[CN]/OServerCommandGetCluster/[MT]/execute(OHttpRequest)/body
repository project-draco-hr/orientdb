{
  String[] urlParts=checkSyntax(iRequest.url,3,"Syntax error: cluster/<database>/<cluster-name>[/<limit>]<br/>Limit is optional and is setted to 20 by default. Set expressely to 0 to have no limits.");
  iRequest.data.commandInfo="Browse cluster";
  iRequest.data.commandDetail=urlParts[2];
  ODatabaseDocumentTx db=null;
  try {
    db=OSharedDocumentDatabase.acquireDatabase(urlParts[1]);
    if (db.getClusterIdByName(urlParts[2]) == -1)     throw new IllegalArgumentException("Invalid cluster '" + urlParts[2] + "'");
    final int limit=urlParts.length > 3 ? Integer.parseInt(urlParts[3]) : 20;
    final List<ORecord<?>> response=new ArrayList<ORecord<?>>();
    for (    ORecord<?> rec : db.browseCluster(urlParts[2])) {
      if (limit > 0 && response.size() >= limit)       break;
      response.add(rec);
    }
    sendRecordsContent(iRequest,response);
  }
  finally {
    if (db != null)     OSharedDocumentDatabase.releaseDatabase(db);
  }
}
