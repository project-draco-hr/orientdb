{
  String name=iDocument.field(OScheduledEvent.PROP_NAME);
  final OScheduledEvent scheduler=database.getMetadata().getScheduler().getEvent(name);
  if (scheduler != null && scheduler.getDocument() != iDocument) {
    throw new ODatabaseException("Scheduled event with name '" + name + "' already exists in database");
  }
  final boolean start=iDocument.field(OScheduledEvent.PROP_STARTED) == null ? false : ((Boolean)iDocument.field(OScheduledEvent.PROP_STARTED));
  if (start)   iDocument.field(OScheduledEvent.PROP_STATUS,STATUS.WAITING.name());
 else   iDocument.field(OScheduledEvent.PROP_STATUS,STATUS.STOPPED.name());
  iDocument.field(OScheduledEvent.PROP_STARTED,start);
  return RESULT.RECORD_CHANGED;
}
