{
  OObjectDatabaseTx database=OObjectDatabasePool.global().acquire(url,"admin","admin");
  Planet p=database.newInstance(Planet.class);
  Planet near=database.newInstance(Planet.class);
  Satellite sat=database.newInstance(Satellite.class);
  Satellite satNear=database.newInstance(Satellite.class);
  sat.setDiameter(50);
  sat.setNear(near);
  satNear.setDiameter(10);
  near.addSatellite(satNear);
  p.addSatellite(sat);
  database.save(p);
  ORID rid=database.getIdentity(p);
  database.close();
  database=OObjectDatabasePool.global().acquire(url,"admin","admin");
  p=database.load(rid);
  sat=p.getSatellites().get(0);
  near=sat.getNear();
  satNear=near.getSatellites().get(0);
  Assert.assertEquals(satNear.getDiameter(),10);
  satNear.setDiameter(100);
  database.save(p);
  database.close();
  database=OObjectDatabasePool.global().acquire(url,"admin","admin");
  p=database.load(rid);
  sat=p.getSatellites().get(0);
  near=sat.getNear();
  satNear=near.getSatellites().get(0);
  Assert.assertEquals(satNear.getDiameter(),100);
  database.close();
}
