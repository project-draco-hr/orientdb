{
  database.begin();
  final OIndex<?> index=database.getMetadata().getIndexManager().getIndex("idxTxAwareOneValueGetEntriesTest");
  Assert.assertTrue(index instanceof OIndexTxAwareOneValue);
  final int clusterId=database.getDefaultClusterId();
  index.put(1,new ORecordId(clusterId,1));
  index.put(2,new ORecordId(clusterId,2));
  index.remove(1,null);
  Assert.assertNotNull(database.getTransaction().getIndexChanges("idxTxAwareOneValueGetEntriesTest"));
  Assert.assertEquals(((OIndexTxAwareOneValue)index).getEntries(Arrays.asList(1,2)).size(),1);
  database.commit();
  Assert.assertEquals(((OIndexTxAwareOneValue)index).getEntries(Arrays.asList(1,2)).size(),1);
}
