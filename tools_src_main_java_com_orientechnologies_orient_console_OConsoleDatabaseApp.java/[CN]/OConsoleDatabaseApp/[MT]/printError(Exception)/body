{
  if (properties.get("debug") != null && Boolean.parseBoolean(properties.get("debug").toString())) {
    out.println("\n!ERROR:");
    e.printStackTrace();
  }
 else {
    out.println("\n!ERROR: " + e.getMessage());
    if (e.getCause() != null) {
      Throwable t=e.getCause();
      while (t != null) {
        out.println("-> " + t.getMessage());
        t=t.getCause();
      }
    }
  }
}
