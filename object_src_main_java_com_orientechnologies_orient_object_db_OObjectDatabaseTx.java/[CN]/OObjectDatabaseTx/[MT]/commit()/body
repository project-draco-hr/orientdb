{
  Map<ORID,ORID> createdRecords;
  try {
    createdRecords=((ODatabaseRecordTx)underlying.getUnderlying()).commit();
    if (getTransaction().getAllRecordEntries() != null) {
      Object pojo=null;
      for (      ORecordOperation entry : getTransaction().getAllRecordEntries()) {
switch (entry.type) {
case ORecordOperation.CREATED:
case ORecordOperation.UPDATED:
          break;
case ORecordOperation.DELETED:
        final ORecordInternal<?> rec=entry.getRecord();
      if (rec instanceof ODocument)       unregisterPojo(pojo,(ODocument)rec);
    break;
}
}
}
}
  finally {
getTransaction().close();
}
return createdRecords;
}
