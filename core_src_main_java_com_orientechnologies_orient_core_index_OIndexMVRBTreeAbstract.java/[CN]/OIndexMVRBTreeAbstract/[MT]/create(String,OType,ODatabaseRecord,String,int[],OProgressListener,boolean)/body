{
  acquireExclusiveLock();
  try {
    name=iName;
    configuration=new ODocument(iDatabase);
    automatic=iAutomatic;
    keyType=iKeyType;
    if (iClusterIdsToIndex != null)     for (    int id : iClusterIdsToIndex)     clustersToIndex.add(iDatabase.getClusterNameById(id));
    map=new OMVRBTreeDatabaseLazySave<Object,Set<OIdentifiable>>(iDatabase,iClusterIndexName,OStreamSerializerLiteral.INSTANCE,OStreamSerializerListRID.INSTANCE);
    installHooks(iDatabase);
    rebuild(iProgressListener);
    updateConfiguration();
    return this;
  }
  finally {
    releaseExclusiveLock();
  }
}
