{
  final String[] urlParts=checkSyntax(iRequest.url,3,"Syntax error: document/<database>/<record-id>");
  iRequest.data.commandInfo="Edit Document";
  ODatabaseDocumentTx db=null;
  final int parametersPos=urlParts[2].indexOf("?");
  final String rid=parametersPos > -1 ? urlParts[2].substring(0,parametersPos) : urlParts[2];
  final ORecordId recorId=new ORecordId(rid);
  if (!recorId.isValid())   throw new IllegalArgumentException("Invalid Record ID in request: " + recorId);
  try {
    db=OSharedDocumentDatabase.acquireDatabase(urlParts[1]);
    final ODocument doc=new ODocument(db,rid);
    doc.load();
    doc.fromJSON(iRequest.content);
    doc.save();
  }
  finally {
    if (db != null)     OSharedDocumentDatabase.releaseDatabase(db);
  }
  sendTextContent(iRequest,OHttpUtils.STATUS_OK_CODE,"OK",null,OHttpUtils.CONTENT_TEXT_PLAIN,"Record " + rid + " updated successfully.");
}
