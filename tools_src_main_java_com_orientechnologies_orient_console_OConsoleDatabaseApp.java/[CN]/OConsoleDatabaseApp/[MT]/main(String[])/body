{
  int result=0;
  try {
    boolean tty=false;
    try {
      if (setTerminalToCBreak())       tty=true;
      Runtime.getRuntime().addShutdownHook(new Thread(){
        @Override public void run(){
          try {
            stty("echo");
          }
 catch (          Exception ignored) {
          }
        }
      }
);
    }
 catch (    Exception ignored) {
    }
    final OConsoleDatabaseApp console=new OConsoleDatabaseApp(args);
    if (tty)     console.setReader(new TTYConsoleReader());
    result=console.run();
  }
  finally {
    try {
      stty("echo");
    }
 catch (    Exception ignored) {
    }
  }
  Orient.instance().shutdown();
  System.exit(result);
}
