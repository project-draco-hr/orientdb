{
  if (iValue == null)   return null;
  if (iValue instanceof String)   return resolve(iContext,iValue);
 else   if (iValue instanceof ODocument) {
    final ODocument sourceDoc=((ODocument)iValue);
    final ODocument destDoc=iClone ? new ODocument().setOrdered(true) : sourceDoc;
    for (    String fieldName : sourceDoc.fieldNames()) {
      Object fieldValue=resolveValue(iContext,sourceDoc.field(fieldName),iClone);
      destDoc.field(fieldName,fieldValue);
    }
    return destDoc;
  }
 else   if (iValue instanceof Map<?,?>) {
    final Map<Object,Object> sourceMap=(Map<Object,Object>)iValue;
    final Map<Object,Object> destMap=iClone ? new HashMap<Object,Object>() : sourceMap;
    for (    Entry<Object,Object> entry : sourceMap.entrySet())     destMap.put(entry.getKey(),resolveValue(iContext,entry.getValue(),iClone));
    return destMap;
  }
 else   if (iValue instanceof List<?>) {
    final List<Object> sourceList=(List<Object>)iValue;
    final List<Object> destList=iClone ? new ArrayList<Object>() : sourceList;
    for (int i=0; i < sourceList.size(); ++i)     if (iClone)     destList.add(i,resolve(iContext,sourceList.get(i)));
 else     destList.set(i,resolve(iContext,sourceList.get(i)));
    return destList;
  }
  return iValue;
}
