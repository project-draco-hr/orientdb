{
synchronized (syncObject) {
    final Set<Long> pageEntries=filePages.get(fileId);
    for (    Long pageIndex : pageEntries) {
      LRUEntry lruEntry=get(fileId,pageIndex,true);
      if (lruEntry != null) {
        if (lruEntry.usageCounter == 0) {
          lruEntry=remove(fileId,pageIndex);
          if (lruEntry.dataPointer != ODirectMemory.NULL_POINTER)           directMemory.free(lruEntry.dataPointer);
        }
      }
 else {
        Long dataPointer=evictedPages.remove(new FileLockKey(fileId,pageIndex));
        if (dataPointer != null)         directMemory.free(dataPointer);
      }
    }
    SortedMap<Long,OLogSequenceNumber> fileDirtyPages=dirtyPages.get(fileId);
    for (    long pageIndex : fileDirtyPages.keySet()) {
      Long dataPointer=evictedPages.remove(new FileLockKey(fileId,pageIndex));
      if (dataPointer != null)       directMemory.free(dataPointer);
    }
    pageEntries.clear();
    fileDirtyPages.clear();
    files.get(fileId).shrink(0);
  }
}
