{
  if (iCommand.isIdempotent() && !executor.isIdempotent())   throw new OCommandExecutionException("Cannot execute non idempotent command");
  long beginTime=Orient.instance().getProfiler().startChrono();
  try {
    iCommand.getContext().setChild(executor.getContext());
    final Object result=executor.execute(iCommand.getParameters());
    iCommand.getContext().setChild(null);
    return result;
  }
 catch (  OException e) {
    throw e;
  }
catch (  Exception e) {
    throw new OCommandExecutionException("Error on execution of command: " + iCommand,e);
  }
 finally {
    Orient.instance().getProfiler().stopChrono("db." + ODatabaseRecordThreadLocal.INSTANCE.get().getName() + ".command."+ iCommand.getText(),"Command executed against the database",beginTime,"db.*.command.*");
  }
}
