{
  try {
    iSource=iSource.trim();
    if (!iSource.startsWith("{") || !iSource.endsWith("}"))     throw new OSerializationException("Error on unmarshalling JSON content: content must be embraced by { }");
    iSource=iSource.substring(1,iSource.length() - 1).trim();
    String[] fields=OStringParser.getWords(iSource,":,");
    if (fields != null && fields.length > 0) {
      ODocument doc=(ODocument)iRecord;
      boolean isNew=!doc.getIdentity().isValid();
      String fieldName;
      String fieldValue;
      for (int i=0; i < fields.length; i+=2) {
        fieldName=fields[i];
        fieldValue=fields[i + 1];
        if (fieldName.equals(ATTRIBUTE_CLASS))         doc.setClassName(fields[i + 1]);
 else         if (fieldName.equals(ATTRIBUTE_ID)) {
          if (isNew) {
            ORecordId rid=new ORecordId(fieldValue);
            doc.setIdentity(rid.clusterId,rid.clusterPosition);
          }
        }
 else         if (fieldName.equals(ATTRIBUTE_VERSION)) {
          if (!isNew) {
            doc.setVersion(Integer.parseInt(fieldValue));
          }
        }
 else         doc.field(fieldName,fieldValue);
      }
    }
  }
 catch (  Exception e) {
    throw new OSerializationException("Error on unmarshalling JSON content",e);
  }
  return iRecord;
}
