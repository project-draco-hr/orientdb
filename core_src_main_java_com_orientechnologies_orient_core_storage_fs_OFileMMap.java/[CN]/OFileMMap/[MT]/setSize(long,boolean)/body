{
  acquireWriteLock();
  try {
    if (maxSize > 0 && size > maxSize)     throw new IllegalArgumentException("Cannot extend the file to " + OFileUtils.getSizeAsString(size) + " because the max is "+ OFileUtils.getSizeAsString(maxSize));
    if (force || this.size != size) {
      checkSize(size);
      this.size=size;
      headerBuffer.putLong(SIZE_OFFSET,size);
      setHeaderDirty();
    }
  }
  finally {
    releaseWriteLock();
  }
}
