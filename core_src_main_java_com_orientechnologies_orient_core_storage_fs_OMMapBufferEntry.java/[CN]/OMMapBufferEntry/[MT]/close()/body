{
  flush();
  acquireExclusiveLock();
  try {
    if (file != null)     file=null;
    if (buffer != null && sunClass != null) {
      try {
        final Method m=sunClass.getMethod("cleaner");
        final Object cleaner=m.invoke(buffer);
        cleaner.getClass().getMethod("clean").invoke(cleaner);
      }
 catch (      Exception e) {
        OLogManager.instance().error(this,"Error on calling MMap buffer clean",e);
      }
    }
    buffer=null;
    counter=0;
  }
  finally {
    releaseExclusiveLock();
  }
}
