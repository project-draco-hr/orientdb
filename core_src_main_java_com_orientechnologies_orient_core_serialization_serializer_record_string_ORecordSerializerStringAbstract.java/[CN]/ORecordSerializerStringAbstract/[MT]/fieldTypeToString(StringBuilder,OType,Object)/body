{
  if (iValue == null)   return;
  final long timer=OProfiler.getInstance().startChrono();
  if (iType == null) {
    if (iValue instanceof ORID)     iType=OType.LINK;
 else     iType=OType.EMBEDDED;
  }
switch (iType) {
case STRING:
    simpleValueToStream(iBuffer,iType,iValue);
  OProfiler.getInstance().stopChrono("serializer.rec.str.string2string",timer);
break;
case BOOLEAN:
simpleValueToStream(iBuffer,iType,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.bool2string",timer);
break;
case INTEGER:
simpleValueToStream(iBuffer,iType,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.int2string",timer);
break;
case FLOAT:
simpleValueToStream(iBuffer,iType,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.float2string",timer);
break;
case DECIMAL:
simpleValueToStream(iBuffer,iType,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.decimal2string",timer);
break;
case LONG:
simpleValueToStream(iBuffer,iType,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.long2string",timer);
break;
case DOUBLE:
simpleValueToStream(iBuffer,iType,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.double2string",timer);
break;
case SHORT:
simpleValueToStream(iBuffer,iType,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.short2string",timer);
break;
case BYTE:
simpleValueToStream(iBuffer,iType,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.byte2string",timer);
break;
case BINARY:
simpleValueToStream(iBuffer,iType,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.binary2string",timer);
break;
case DATE:
simpleValueToStream(iBuffer,iType,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.date2string",timer);
break;
case DATETIME:
simpleValueToStream(iBuffer,iType,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.datetime2string",timer);
break;
case LINK:
if (iValue instanceof ORecordId) ((ORecordId)iValue).toString(iBuffer);
 else ((ORecord<?>)iValue).getIdentity().toString(iBuffer);
OProfiler.getInstance().stopChrono("serializer.rec.str.link2string",timer);
break;
case EMBEDDEDSET:
ORecordSerializerSchemaAware2CSV.INSTANCE.embeddedCollectionToStream(ODatabaseRecordThreadLocal.INSTANCE.get(),null,iBuffer,null,null,iValue,null,true);
OProfiler.getInstance().stopChrono("serializer.rec.str.embedSet2string",timer);
break;
case EMBEDDEDLIST:
ORecordSerializerSchemaAware2CSV.INSTANCE.embeddedCollectionToStream(ODatabaseRecordThreadLocal.INSTANCE.get(),null,iBuffer,null,null,iValue,null,true);
OProfiler.getInstance().stopChrono("serializer.rec.str.embedList2string",timer);
break;
case EMBEDDEDMAP:
ORecordSerializerSchemaAware2CSV.INSTANCE.embeddedMapToStream(ODatabaseRecordThreadLocal.INSTANCE.get(),null,iBuffer,null,null,iValue,null,true);
OProfiler.getInstance().stopChrono("serializer.rec.str.embedMap2string",timer);
break;
case EMBEDDED:
OStringSerializerEmbedded.INSTANCE.toStream(iBuffer,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.embed2string",timer);
break;
case CUSTOM:
OStringSerializerAnyStreamable.INSTANCE.toStream(iBuffer,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.custom2string",timer);
break;
default :
throw new IllegalArgumentException("Type " + iType + " not supported to convert value: "+ iValue);
}
}
