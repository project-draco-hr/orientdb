{
  for (  Entry<String,Object> entry : getConfigurationMap().entrySet()) {
    if (entry.getKey().startsWith(CONFIG_DATABASE_PREFIX)) {
      final String databaseName=entry.getKey().substring(CONFIG_DATABASE_PREFIX.length());
      if (!configuredDatabases.contains(databaseName)) {
        final ODocument config=(ODocument)entry.getValue();
        final Boolean autoDeploy=config.field("autoDeploy");
        if (autoDeploy != null && autoDeploy) {
          final OHazelcastDistributedMessageService msgService=new OHazelcastDistributedMessageService(this,databaseName);
          messageServices.put(databaseName,msgService);
          final OBuffer result=(OBuffer)sendRequest(databaseName,null,new ODeployDatabaseTask(),EXECUTION_MODE.RESPONSE);
          final String dbPath=serverInstance.getDatabaseDirectory() + databaseName;
          new File(dbPath).mkdirs();
          final ODatabaseDocumentTx db=new ODatabaseDocumentTx("local:" + dbPath);
          final ByteArrayInputStream in=new ByteArrayInputStream(result.getBuffer());
          try {
            db.restore(in,null);
            in.close();
            msgService.configureDatabase(databaseName);
            managedDatabases.put(databaseName,databaseName);
            checkLocalNodeInConfiguration(databaseName);
          }
 catch (          IOException e) {
            ODistributedServerLog.warn(this,getLocalNodeName(),null,DIRECTION.IN,"error on copying database '%s' on local server",e,databaseName);
          }
        }
      }
    }
  }
}
