{
  database.getLevel1Cache().clear();
  database.getLevel2Cache().clear();
  database.getLevel1Cache().setEnable(false);
  database.getLevel2Cache().setEnable(false);
  final ODocument docOne=new ODocument();
  docOne.save();
  final ODocument docTwo=new ODocument();
  docTwo.save();
  final ODocument document=new ODocument();
  final List<ORID> list=new ArrayList<ORID>();
  list.add(docOne.getIdentity());
  document.field("linklist",list,OType.LINKLIST);
  document.field("val",1);
  document.save();
  Assert.assertFalse(document.isDirty());
  Assert.assertEquals(document.getDirtyFields(),new String[]{});
  final List<ORID> trackedList=document.field("linklist");
  trackedList.add(docTwo.getIdentity());
  Assert.assertTrue(document.isDirty());
  final OMultiValueChangeTimeLine timeLine=document.getCollectionTimeLine("linklist");
  Assert.assertNotNull(timeLine);
  Assert.assertEquals(document.getDirtyFields(),new String[]{"linklist"});
  database.getLevel1Cache().setEnable(true);
  database.getLevel2Cache().setEnable(true);
}
