{
  checkTransaction();
  int clusterId=iRecord.getIdentity().getClusterId();
  long position=iRecord.getIdentity().getClusterPosition();
  String key=clusterId + ORID.SEPARATOR;
  if (position == -1) {
    position=newObjectCounter++;
    key+=position + "+";
  }
 else   key+=position;
  OTransactionEntry<REC> txEntry=entries.get(key);
  if (txEntry == null) {
    txEntry=new OTransactionEntry<REC>(iRecord,iStatus,iClusterName);
    entries.put(key,txEntry);
  }
 else {
    txEntry.record=iRecord;
switch (txEntry.status) {
case OTransactionEntry.LOADED:
switch (iStatus) {
case OTransactionEntry.UPDATED:
        txEntry.status=OTransactionEntry.UPDATED;
      break;
case OTransactionEntry.DELETED:
    txEntry.status=OTransactionEntry.DELETED;
  break;
}
break;
case OTransactionEntry.UPDATED:
switch (iStatus) {
case OTransactionEntry.DELETED:
txEntry.status=OTransactionEntry.DELETED;
break;
}
break;
case OTransactionEntry.DELETED:
break;
case OTransactionEntry.CREATED:
switch (iStatus) {
case OTransactionEntry.DELETED:
entries.remove(key);
break;
}
break;
}
}
}
