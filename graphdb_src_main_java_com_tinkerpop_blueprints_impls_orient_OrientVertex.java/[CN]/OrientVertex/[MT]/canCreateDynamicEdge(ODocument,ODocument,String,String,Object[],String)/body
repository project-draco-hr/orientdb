{
  if (!graph.isUseVertexFieldsForEdgeLabels() && label != null)   return false;
  if (graph.isUseLightweightEdges() && (fields == null || fields.length == 0 || fields[0] == null)) {
    Object field=iFromVertex.field(iOutFieldName);
    if (field != null)     if (field instanceof OIdentifiable) {
      if (field.equals(iToVertex)) {
        new OrientEdge(graph,iFromVertex,iToVertex,label).convertToDocument();
        return false;
      }
    }
    field=iToVertex.field(iInFieldName);
    if (field != null)     if (field instanceof OIdentifiable) {
      if (field.equals(iFromVertex)) {
        new OrientEdge(graph,iFromVertex,iToVertex,label).convertToDocument();
        return false;
      }
    }
    if (graph.isUseClassForEdgeLabel()) {
      final OClass cls=graph.getEdgeType(label);
      if (cls != null)       for (      OProperty p : cls.properties()) {
        if (p.isMandatory() || p.isNotNull())         return false;
      }
    }
    return true;
  }
  return false;
}
