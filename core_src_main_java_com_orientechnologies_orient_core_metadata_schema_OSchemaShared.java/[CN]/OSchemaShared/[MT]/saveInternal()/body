{
  getDatabase();
  if (document.getDatabase().getTransaction().isActive())   throw new OSchemaException("Can't change the schema while a transaction is active. Schema changes is not transactional");
  lock.acquireExclusiveLock();
  try {
    document.setDirty();
    super.save();
  }
  finally {
    lock.releaseExclusiveLock();
  }
}
