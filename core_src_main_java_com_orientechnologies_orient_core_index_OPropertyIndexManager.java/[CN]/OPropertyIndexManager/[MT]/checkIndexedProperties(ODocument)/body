{
  final OClass cls=iRecord.getSchemaClass();
  if (cls == null)   return;
  OPropertyIndex index;
  Object fieldValue;
  String fieldValueString;
  List<ORecordId> indexedRIDs;
  for (  OProperty prop : cls.properties()) {
    index=prop.getIndex();
    if (index != null && index.isUnique()) {
      fieldValue=iRecord.field(prop.getName());
      if (fieldValue != null) {
        fieldValueString=fieldValue.toString();
        indexedRIDs=index.get(fieldValueString);
        if (indexedRIDs != null && indexedRIDs.size() > 0 && !indexedRIDs.get(0).equals(iRecord.getIdentity()))         OLogManager.instance().exception("Found duplicated key '%s' for property '%s'",null,OIndexException.class,fieldValueString,prop);
      }
    }
  }
}
