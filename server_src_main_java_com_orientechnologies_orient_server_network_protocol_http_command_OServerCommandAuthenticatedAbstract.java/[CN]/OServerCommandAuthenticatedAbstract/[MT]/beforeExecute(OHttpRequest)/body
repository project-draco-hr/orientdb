{
  if (iRequest.sessionId == null || (iRequest.sessionId != null && iRequest.sessionId.length() == 1)) {
    if (iRequest.authorization == null || "!".equals(iRequest.sessionId)) {
      sendAuthorizationRequest(iRequest);
      return false;
    }
 else {
      if (iRequest.url != null) {
        String[] urlParts=iRequest.url.substring(1).split("/");
        if (urlParts.length > 1) {
          ODatabaseDocumentTx db=null;
          try {
            String dbName=urlParts[1] + ":" + iRequest.authorization;
            db=OSharedDocumentDatabase.acquireDatabase(dbName);
          }
 catch (          Exception e) {
            sendAuthorizationRequest(iRequest);
            return false;
          }
 finally {
            if (db != null)             OSharedDocumentDatabase.releaseDatabase(db);
          }
          iRequest.sessionId=OHttpSessionManager.getInstance().createSession();
          return true;
        }
      }
    }
  }
 else {
    if (iRequest.sessionId.length() > 1 && OHttpSessionManager.getInstance().getSession(iRequest.sessionId) == null) {
      sendAuthorizationRequest(iRequest);
      return false;
    }
    return true;
  }
  return false;
}
