{
  long k=count - pos;
  if (n < k) {
    k=n < 0 ? 0 : n;
  }
  pos+=k;
  return k;
}
