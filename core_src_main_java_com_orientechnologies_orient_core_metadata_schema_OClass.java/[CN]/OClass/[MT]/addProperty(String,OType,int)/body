{
  document.getDatabase().checkSecurity(ODatabaseSecurityResources.SCHEMA,ORole.PERMISSION_UPDATE);
  final String lowerName=iName.toLowerCase();
  if (properties.containsKey(lowerName))   throw new OSchemaException("Class " + name + " already has the property '"+ iName+ "'");
  final OProperty prop=new OProperty(this,iName,iType,iOffset);
  properties.put(lowerName,prop);
  fixedSize+=iType.size;
  setDirty();
  return prop;
}
