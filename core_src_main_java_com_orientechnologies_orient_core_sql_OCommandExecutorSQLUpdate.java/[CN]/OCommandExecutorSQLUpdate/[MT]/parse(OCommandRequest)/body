{
  final ODatabaseRecord database=getDatabase();
  database.checkSecurity(ODatabaseSecurityResources.COMMAND,ORole.PERMISSION_READ);
  init(((OCommandRequestText)iRequest).getText());
  setEntries.clear();
  addEntries.clear();
  putEntries.clear();
  removeEntries.clear();
  incrementEntries.clear();
  query=null;
  recordCount=0;
  parseRequiredWords("UPDATE");
  subjectName=parseRequiredWord(true,"Invalid target");
  final int newPos=OSQLHelper.nextWord(text,textUpperCase,currentPos,tempParseWord,true);
  if (newPos == -1 || (!tempParseWord.toString().equals(KEYWORD_SET) && !tempParseWord.toString().equals(KEYWORD_ADD) && !tempParseWord.toString().equals(KEYWORD_PUT)&& !tempParseWord.toString().equals(KEYWORD_REMOVE)&& !tempParseWord.toString().equals(KEYWORD_INCREMENT)))   throw new OCommandSQLParsingException("Expected keyword " + KEYWORD_SET + ","+ KEYWORD_ADD+ ","+ KEYWORD_PUT+ ","+ KEYWORD_REMOVE+ " or "+ KEYWORD_INCREMENT+ ". Use "+ getSyntax(),text,currentPos);
  currentPos=newPos;
  while (currentPos != -1 && !tempParseWord.toString().equals(OCommandExecutorSQLAbstract.KEYWORD_WHERE)) {
    if (tempParseWord.toString().equals(KEYWORD_SET))     currentPos=parseSetFields(setEntries);
 else     if (tempParseWord.toString().equals(KEYWORD_ADD))     currentPos=parseAddFields();
 else     if (tempParseWord.toString().equals(KEYWORD_PUT))     currentPos=parsePutFields();
 else     if (tempParseWord.toString().equals(KEYWORD_REMOVE))     currentPos=parseRemoveFields();
 else     if (tempParseWord.toString().equals(KEYWORD_INCREMENT))     currentPos=parseIncrementFields();
 else     break;
  }
  final String additionalStatement=tempParseWord.toString();
  if (additionalStatement.equals(OCommandExecutorSQLAbstract.KEYWORD_WHERE) || additionalStatement.equals(OCommandExecutorSQLAbstract.KEYWORD_LIMIT))   query=new OSQLAsynchQuery<ODocument>("select from " + subjectName + " "+ additionalStatement+ " "+ text.substring(currentPos),this);
 else   query=new OSQLAsynchQuery<ODocument>("select from " + subjectName,this);
  return this;
}
