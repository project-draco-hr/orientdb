{
  if (am.size() + a1in.size() >= maxSize) {
    if (a1in.size() > K_IN) {
      OCacheEntry removedFromAInEntry=a1in.removeLRU();
      if (removedFromAInEntry == null) {
        increaseCacheSize();
      }
 else {
        removedFromAInEntry.isDirty=false;
        removedFromAInEntry.loadedLSN=null;
        a1out.putToMRU(removedFromAInEntry);
      }
      if (a1out.size() > K_OUT) {
        OCacheEntry removedEntry=a1out.removeLRU();
        Set<Long> pageEntries=filePages.get(removedEntry.fileId);
        pageEntries.remove(removedEntry.pageIndex);
      }
    }
 else {
      OCacheEntry removedEntry=am.removeLRU();
      if (removedEntry == null) {
        increaseCacheSize();
      }
 else {
        Set<Long> pageEntries=filePages.get(removedEntry.fileId);
        pageEntries.remove(removedEntry.pageIndex);
      }
    }
  }
}
