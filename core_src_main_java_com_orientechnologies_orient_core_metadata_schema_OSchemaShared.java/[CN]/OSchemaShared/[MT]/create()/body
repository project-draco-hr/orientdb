{
  rwSpinLock.acquireWriteLock();
  try {
    final ODatabaseRecordInternal db=getDatabase();
    super.save(OMetadataDefault.CLUSTER_INTERNAL_NAME);
    db.getStorage().getConfiguration().schemaRecordId=document.getIdentity().toString();
    db.getStorage().getConfiguration().update();
  }
  finally {
    rwSpinLock.releaseWriteLock();
  }
}
