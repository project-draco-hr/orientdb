{
  interactiveMode=isInteractiveMode(args);
  onBefore();
  if (interactiveMode) {
    final BufferedReader reader=new BufferedReader(new InputStreamReader(in));
    String consoleInput;
    while (true) {
      out.println();
      out.print("> ");
      try {
        consoleInput=reader.readLine();
      }
 catch (      IOException e) {
        break;
      }
      if (consoleInput == null || consoleInput.length() == 0)       continue;
      if (!executeCommands(consoleInput))       break;
    }
  }
 else {
    executeCommands(getCommandLine(args));
  }
  onAfter();
}
