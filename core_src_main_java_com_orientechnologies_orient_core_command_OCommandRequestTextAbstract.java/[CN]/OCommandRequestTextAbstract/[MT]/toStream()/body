{
  final OMemoryOutputStream buffer=new OMemoryOutputStream();
  try {
    buffer.add(text);
    if (parameters == null || parameters.size() == 0)     buffer.add(new byte[0]);
 else {
      final ODocument param=new ODocument(database);
      param.field("params",parameters);
      buffer.add(param.toStream());
    }
  }
 catch (  IOException e) {
    throw new OSerializationException("Error while marshalling OCommandRequestTextAbstract impl",e);
  }
  return buffer.toByteArray();
}
