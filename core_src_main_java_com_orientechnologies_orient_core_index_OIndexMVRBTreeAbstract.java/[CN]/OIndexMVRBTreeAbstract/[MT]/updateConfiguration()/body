{
  acquireExclusiveLock();
  try {
    configuration.setStatus(STATUS.UNMARSHALLING);
    try {
      configuration.field(OIndexInternal.CONFIG_TYPE,type);
      configuration.field(OIndexInternal.CONFIG_NAME,name);
      configuration.field(OIndexInternal.CONFIG_AUTOMATIC,automatic);
      configuration.field(CONFIG_CLUSTERS,clustersToIndex,OType.EMBEDDEDSET);
      configuration.field(CONFIG_MAP_RID,map.getRecord().getIdentity());
    }
  finally {
      configuration.setStatus(STATUS.LOADED);
    }
  }
  finally {
    releaseExclusiveLock();
  }
  return configuration;
}
