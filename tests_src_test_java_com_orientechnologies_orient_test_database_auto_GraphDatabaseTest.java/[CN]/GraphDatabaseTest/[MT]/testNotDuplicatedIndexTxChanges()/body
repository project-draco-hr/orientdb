{
  OClass oc=database.getVertexType("vertexA");
  if (oc == null)   oc=database.createVertexType("vertexA");
  if (!oc.existsProperty("name"))   oc.createProperty("name",OType.STRING);
  if (oc.getClassIndex("vertexA_name_idx") == null)   oc.createIndex("vertexA_name_idx",OClass.INDEX_TYPE.UNIQUE,"name");
  ODocument docA=database.createVertex("vertexA");
  docA.field("name","myKey");
  database.save(docA);
  ODocument docB=database.createVertex("vertexA");
  docA.field("name","anotherKey");
  database.save(docB);
  database.begin();
  database.delete(docB);
  database.delete(docA);
  ODocument docKey=database.createVertex("vertexA");
  docKey.field("name","myKey");
  database.save(docKey);
  database.commit();
}
