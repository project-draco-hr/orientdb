{
  if (iValue == null)   return;
  final long timer=OProfiler.getInstance().startChrono();
  if (iType == null)   iType=OType.EMBEDDED;
switch (iType) {
case STRING:
    iBuffer.append('"');
  iBuffer.append(OStringSerializerHelper.encode(iValue.toString()));
iBuffer.append('"');
OProfiler.getInstance().stopChrono("serializer.rec.str.string2string",timer);
break;
case BOOLEAN:
iBuffer.append(String.valueOf(iValue));
OProfiler.getInstance().stopChrono("serializer.rec.str.bool2string",timer);
break;
case INTEGER:
iBuffer.append(String.valueOf(iValue));
OProfiler.getInstance().stopChrono("serializer.rec.str.int2string",timer);
break;
case FLOAT:
iBuffer.append(String.valueOf(iValue));
iBuffer.append('f');
OProfiler.getInstance().stopChrono("serializer.rec.str.float2string",timer);
break;
case LONG:
iBuffer.append(String.valueOf(iValue));
iBuffer.append('l');
OProfiler.getInstance().stopChrono("serializer.rec.str.long2string",timer);
break;
case DOUBLE:
iBuffer.append(String.valueOf(iValue));
iBuffer.append('d');
OProfiler.getInstance().stopChrono("serializer.rec.str.double2string",timer);
break;
case SHORT:
iBuffer.append(String.valueOf(iValue));
iBuffer.append('s');
OProfiler.getInstance().stopChrono("serializer.rec.str.short2string",timer);
break;
case BYTE:
if (iValue instanceof Character) iBuffer.append((int)((Character)iValue).charValue());
 else if (iValue instanceof String) iBuffer.append(String.valueOf((int)((String)iValue).charAt(0)));
 else iBuffer.append(String.valueOf(iValue));
iBuffer.append('b');
OProfiler.getInstance().stopChrono("serializer.rec.str.byte2string",timer);
break;
case BINARY:
iBuffer.append('"');
if (iValue instanceof Byte) iBuffer.append(new String(new byte[]{((Byte)iValue).byteValue()}));
 else iBuffer.append(OBase64Utils.encodeBytes((byte[])iValue));
iBuffer.append('"');
OProfiler.getInstance().stopChrono("serializer.rec.str.binary2string",timer);
break;
case DATE:
if (iValue instanceof Date) iBuffer.append(((Date)iValue).getTime());
 else iBuffer.append(iValue);
iBuffer.append('t');
OProfiler.getInstance().stopChrono("serializer.rec.str.date2string",timer);
break;
case LINK:
if (iValue instanceof ORecordId) ((ORecordId)iValue).toString(iBuffer);
 else ((ORecord<?>)iValue).getIdentity().toString(iBuffer);
OProfiler.getInstance().stopChrono("serializer.rec.str.link2string",timer);
break;
case EMBEDDEDMAP:
ORecordSerializerSchemaAware2CSV.INSTANCE.embeddedMapToStream(iDatabase,null,iBuffer,null,null,iValue,null,true);
OProfiler.getInstance().stopChrono("serializer.rec.str.embedMap2string",timer);
break;
case EMBEDDED:
OStringSerializerAnyStreamable.INSTANCE.toStream(iDatabase,iBuffer,iValue);
OProfiler.getInstance().stopChrono("serializer.rec.str.embed2string",timer);
break;
default :
throw new IllegalArgumentException("Type " + iType + " not supported to convert value: "+ iValue);
}
}
