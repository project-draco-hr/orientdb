{
  String config=System.getProperty("orientdb.test.env");
  String storageType;
  if ("ci".equals(config) || "release".equals(config))   storageType=OEngineLocalPaginated.NAME;
 else   storageType=System.getProperty("storageType");
  if (storageType == null)   storageType=OEngineMemory.NAME;
  storageType=OEngineLocalPaginated.NAME;
  buildDirectory=System.getProperty("buildDirectory",".");
  if (buildDirectory == null)   buildDirectory=".";
  if (remote)   System.out.println("REMOTE IS DISABLED IN LUCENE TESTS");
  if (storageType.equals(OEngineLocalPaginated.NAME))   url=OEngineLocalPaginated.NAME + ":" + buildDirectory+ "/databases/"+ getDatabaseName();
 else   url=OEngineMemory.NAME + ":" + getDatabaseName();
  databaseDocumentTx=new ODatabaseDocumentTx(url);
  if (databaseDocumentTx.exists()) {
    databaseDocumentTx.open("admin","admin");
    if (drop) {
      databaseDocumentTx.drop();
      databaseDocumentTx=new ODatabaseDocumentTx(url);
      databaseDocumentTx.create();
    }
  }
 else {
    databaseDocumentTx=new ODatabaseDocumentTx(url);
    databaseDocumentTx.create();
  }
  databaseDocumentTx.activateOnCurrentThread();
}
