{
  if (!(iRecord instanceof ORecordSchemaAware<?>))   throw new OSerializationException("Can't marshall a record of type " + iRecord.getClass().getSimpleName() + " to JSON");
  ORecordSchemaAware<?> record=(ORecordSchemaAware<?>)iRecord;
  try {
    StringWriter buffer=new StringWriter();
    OJSONWriter json=new OJSONWriter(buffer);
    json.beginObject();
    for (    String fieldName : record.fieldNames()) {
      json.writeAttribute(1,true,fieldName,record.field(fieldName));
    }
    json.endObject();
    return buffer.toString();
  }
 catch (  IOException e) {
    throw new OSerializationException("Error on marshalling of record to JSON",e);
  }
}
