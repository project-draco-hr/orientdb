{
  manager=iManager;
  trigger=new OReplicatorRecordHook(this);
  replicatorUser=OServerMain.server().getConfiguration().getUser(ODistributedServerConfiguration.REPLICATOR_USER);
  Orient.instance().registerEngine(new ODistributedEngine(this));
  final String conflictResolvertStrategy=iManager.getConfig().replicationConflictResolverConfig.get("strategy");
  try {
    conflictResolver=(ODistributedConflictResolver)Class.forName(conflictResolvertStrategy).newInstance();
    conflictResolver.config(this,iManager.getConfig().replicationConflictResolverConfig);
  }
 catch (  Exception e) {
    throw new ODistributedException("Cannot create the configured replication conflict resolver: " + conflictResolvertStrategy);
  }
}
