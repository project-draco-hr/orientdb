{
  if (index != null)   throw new IllegalStateException("Index already created");
  try {
    index=new OIndex(iUnique,document.getDatabase(),OStorage.CLUSTER_INDEX_NAME);
    setDirty();
    populateIndex();
    if (document.getDatabase() != null) {
      index.lazySave();
      document.getDatabase().getMetadata().getSchema().save();
    }
  }
 catch (  Exception e) {
    OLogManager.instance().exception("Unable to create %s index for property %s",e,ODatabaseException.class,iUnique ? "unique" : "not unique",toString());
  }
  return index;
}
