{
  OClusterMemory cluster=clusters.get(iClusterId);
  OPhysicalPosition ppos=cluster.getPhysicalPosition(iPosition,new OPhysicalPosition());
  if (iVersion > -1 && ppos.version != iVersion)   throw new OConcurrentModificationException("Can't update record #" + ORecordId.generateString(iClusterId,iPosition) + " because it was modified by another user in the meanwhile of current transaction. Use pessimistic locking instead of optimistic or simply re-execute the transaction");
  data.updateRecord(ppos.dataPosition,iContent);
  return ++ppos.version;
}
