{
  lock.acquireExclusiveLock();
  try {
    final int varSize=file.readInt(iOffsetEndOperation - OFFSET_BACK_SIZE);
    final long offset=iOffsetEndOperation - OFFSET_BACK_SIZE - varSize- OFFSET_VARDATA;
    ODistributedServerLog.debug(this,cluster.getLocalNodeId(),null,DIRECTION.NONE,"operation #%d.%d db=%s update journal rid=%s",file.readLong(iOffsetEndOperation - OFFSET_BACK_RUNID),file.readLong(iOffsetEndOperation - OFFSET_BACK_OPERATID),storage.getName(),iRid);
    file.write(offset + OFFSET_STATUS,new byte[]{(byte)iStatus.ordinal()});
    if (iRid != null)     file.writeLong(offset + OFFSET_VARDATA + OBinaryProtocol.SIZE_SHORT,iRid.clusterPosition.longValue());
    file.synch();
  }
  finally {
    lock.releaseExclusiveLock();
  }
}
