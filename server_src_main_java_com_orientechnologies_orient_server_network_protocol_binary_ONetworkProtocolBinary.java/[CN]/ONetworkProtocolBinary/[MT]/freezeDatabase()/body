{
  setDataCommandInfo("Freeze database");
  String dbName=channel.readString();
  checkServerAccess("database.freeze");
  String storageType=null;
  storageType=channel.readString();
  if (storageType == null)   storageType="plocal";
  connection.database=getDatabaseInstance(dbName,ODatabaseDocument.TYPE,storageType);
  if (connection.database.exists()) {
    OLogManager.instance().info(this,"Freezing database '%s'",connection.database.getURL());
    if (connection.database.isClosed())     server.openDatabaseBypassingSecurity(connection.database,connection.data,connection.serverUser.name);
    connection.database.freeze(true);
  }
 else {
    throw new OStorageException("Database with name '" + dbName + "' does not exist");
  }
  beginResponse();
  try {
    sendOk(clientTxId);
  }
  finally {
    endResponse();
  }
}
