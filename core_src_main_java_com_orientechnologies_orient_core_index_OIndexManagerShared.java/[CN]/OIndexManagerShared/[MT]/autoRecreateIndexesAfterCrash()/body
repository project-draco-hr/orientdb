{
  if (rebuildCompleted)   return false;
  final ODatabaseRecord database=ODatabaseRecordThreadLocal.INSTANCE.get();
  if (!OGlobalConfiguration.INDEX_AUTO_REBUILD_AFTER_NOTSOFTCLOSE.getValueAsBoolean())   return false;
  final OStorage storage=database.getStorage().getUnderlying();
  if (storage instanceof OLocalPaginatedStorage)   return ((OLocalPaginatedStorage)storage).wereDataRestoredAfterOpen();
  return false;
}
