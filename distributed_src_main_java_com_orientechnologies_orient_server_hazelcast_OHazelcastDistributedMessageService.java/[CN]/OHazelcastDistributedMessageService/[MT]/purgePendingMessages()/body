{
  final long now=System.currentTimeMillis();
  for (Iterator<Entry<Long,ODistributedResponseManager>> it=responsesByRequestIds.entrySet().iterator(); it.hasNext(); ) {
    final Entry<Long,ODistributedResponseManager> item=it.next();
    final ODistributedResponseManager resp=item.getValue();
    final long timeElapsed=now - resp.getSentOn();
    if (timeElapsed > OGlobalConfiguration.DISTRIBUTED_ASYNCH_RESPONSES_TIMEOUT.getValueAsLong()) {
      final List<String> missingNodes=resp.getMissingNodes();
      if (missingNodes.size() > 0) {
        ODistributedServerLog.warn(this,manager.getLocalNodeName(),null,DIRECTION.IN,"%d missed response(s) for message %d by nodes %s after %dms when timeout is %dms",missingNodes.size(),resp.getMessageId(),missingNodes,timeElapsed,resp.getTotalTimeout());
      }
      Orient.instance().getProfiler().updateCounter("distributed.replication.timeouts","Number of timeouts on replication messages responses",+1);
      it.remove();
    }
  }
}
