{
  final long timer=OProfiler.getInstance().startChrono();
  final Class<?> c=iPojo.getClass();
  List<Field> properties=classes.get(c.getName());
  if (properties == null)   properties=registerClass(c);
  String fieldName;
  Object fieldValue;
  if (iRecord.getStatus() == STATUS.NOT_LOADED)   iRecord.load();
  for (  Field p : properties) {
    fieldName=p.getName();
    fieldValue=iRecord.field(fieldName);
    if (fieldValue == null || !(fieldValue instanceof ODocument) || !(fieldValue instanceof Collection<?>) || ((Collection<?>)fieldValue).size() == 0 || !(((Collection<?>)fieldValue).iterator().next() instanceof ODocument))     setFieldValue(iPojo,fieldName,fieldValue);
  }
  final Map<String,Integer> fetchPlan=OFetchHelper.buildFetchPlan(iFetchPlan);
  OFetchHelper.fetch(iRecord,iPojo,fetchPlan,null,0,-1,new OFetchListener(){
    /** 
 * Doesn't matter size.
 */
    public int size(){
      return 0;
    }
    public Object fetchLinked(    final ODocument iRoot,    final Object iUserObject,    final String iFieldName,    final Object iLinked){
      final Class<?> type=getFieldType(iUserObject,iFieldName);
      Object fieldValue=null;
      Class<?> fieldClass;
      if (type.isAssignableFrom(List.class)) {
        Collection<ODocument> list=(Collection<ODocument>)iLinked;
        final List<Object> targetList=new OLazyList<Object>((ODatabaseObjectTx)iRecord.getDatabase().getDatabaseOwner()).setFetchPlan(iFetchPlan);
        fieldValue=targetList;
        if (list != null && list.size() > 0) {
          targetList.addAll(list);
        }
      }
 else       if (type.isAssignableFrom(Set.class)) {
        final Collection<ODocument> set=(Collection<ODocument>)iLinked;
        final Set<Object> target=new OLazySet<Object>((ODatabaseObjectTx)iRecord.getDatabase().getDatabaseOwner(),set).setFetchPlan(iFetchPlan);
        fieldValue=target;
      }
 else {
        fieldClass=iEntityManager.getEntityClass(type.getSimpleName());
        if (fieldClass != null) {
          fieldValue=iObj2RecHandler.getUserObjectByRecord((ODocument)iLinked,iFetchPlan);
        }
      }
      Object prevValue=getFieldValue(iPojo,iFieldName);
      if (prevValue == null && fieldValue != null || fieldValue != null && !fieldValue.equals(prevValue)) {
        setFieldValue(iPojo,iFieldName,fieldValue);
        return fieldValue;
      }
      return null;
    }
  }
);
  OProfiler.getInstance().stopChrono("Object.fromStream",timer);
  return iPojo;
}
