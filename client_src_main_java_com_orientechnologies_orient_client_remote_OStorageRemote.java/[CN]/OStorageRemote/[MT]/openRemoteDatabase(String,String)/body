{
  createConnectionPool();
  final OChannelBinaryClient network=beginRequest(OChannelBinaryProtocol.REQUEST_DB_OPEN);
  try {
    network.writeString(name).writeString(iUserName).writeString(iUserPassword);
  }
  finally {
    endRequest(network);
  }
  try {
    beginResponse(network);
    final int sessionId=network.readInt();
    setSessionId(sessionId);
    OLogManager.instance().debug(null,"Client connected with session id: " + sessionId);
    int tot=network.readInt();
    String clusterName;
    for (int i=0; i < tot; ++i) {
      clusterName=network.readString().toLowerCase();
      clustersIds.put(clusterName,network.readInt());
      clustersTypes.put(clusterName,network.readString());
    }
    updateClusterConfiguration(network.readBytes());
  }
  finally {
    endResponse(network);
  }
  defaultClusterId=clustersIds.get(OStorage.CLUSTER_DEFAULT_NAME);
  open=true;
}
