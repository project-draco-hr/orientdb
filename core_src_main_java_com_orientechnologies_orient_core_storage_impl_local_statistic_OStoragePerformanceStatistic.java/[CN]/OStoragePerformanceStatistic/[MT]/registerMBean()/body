{
  if (mbeanIsRegistered.compareAndSet(false,true)) {
    try {
      final MBeanServer server=ManagementFactory.getPlatformMBeanServer();
      final ObjectName beanName=new ObjectName(mbeanName);
      if (!server.isRegistered(beanName)) {
        server.registerMBean(this,beanName);
      }
 else {
        mbeanIsRegistered.set(false);
        OLogManager.instance().warn(this,"MBean with name %s has already registered. Probably your system was not shutdown correctly" + " or you have several running applications which use OrientDB engine inside",beanName.getCanonicalName());
      }
    }
 catch (    MalformedObjectNameException e) {
      throw OException.wrapException(new OReadCacheException("Error during registration of read cache MBean"),e);
    }
catch (    InstanceAlreadyExistsException e) {
      throw OException.wrapException(new OReadCacheException("Error during registration of read cache MBean"),e);
    }
catch (    MBeanRegistrationException e) {
      throw OException.wrapException(new OReadCacheException("Error during registration of read cache MBean"),e);
    }
catch (    NotCompliantMBeanException e) {
      throw OException.wrapException(new OReadCacheException("Error during registration of read cache MBean"),e);
    }
  }
}
