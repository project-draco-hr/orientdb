{
  if (iName == null)   throw new IllegalArgumentException("Storage path is null");
  final String name=iName.indexOf(':') > -1 ? iName.substring(iName.indexOf(':') + 1) : iName;
  final OStorage stg=Orient.instance().getStorage(name);
  if (stg != null)   return stg.getURL();
  String dbPath=configuration.getStoragePath(name);
  if (dbPath == null) {
    dbPath=OSystemVariableResolver.resolveSystemVariables("${" + Orient.ORIENTDB_HOME + "}/databases/"+ name);
    File localFile=new File(OIOUtils.getPathFromDatabaseName(dbPath) + "/default.odh");
    File plocalFile=new File(OIOUtils.getPathFromDatabaseName(dbPath) + "/default.pcl");
    if (localFile.exists())     dbPath="local:" + dbPath;
 else     if (plocalFile.exists())     dbPath="plocal:" + dbPath;
 else     throw new OConfigurationException("Database '" + name + "' is not configured on server");
  }
  return dbPath;
}
