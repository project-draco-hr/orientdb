{
  newConfig.field(OIndexInternal.CONFIG_TYPE,type);
  newConfig.field(OIndexInternal.CONFIG_NAME,name);
  newConfig.field(OIndexInternal.INDEX_VERSION,version);
  if (indexDefinition != null) {
    final ODocument indexDefDocument=indexDefinition.toStream();
    if (!indexDefDocument.hasOwners())     ODocumentInternal.addOwner(indexDefDocument,newConfig);
    newConfig.field(OIndexInternal.INDEX_DEFINITION,indexDefDocument,OType.EMBEDDED);
    newConfig.field(OIndexInternal.INDEX_DEFINITION_CLASS,indexDefinition.getClass().getName());
  }
 else {
    newConfig.removeField(OIndexInternal.INDEX_DEFINITION);
    newConfig.removeField(OIndexInternal.INDEX_DEFINITION_CLASS);
  }
  newConfig.field(CONFIG_CLUSTERS,clustersToIndex,OType.EMBEDDEDSET);
  newConfig.field(ALGORITHM,algorithm);
  newConfig.field(VALUE_CONTAINER_ALGORITHM,valueContainerAlgorithm);
}
