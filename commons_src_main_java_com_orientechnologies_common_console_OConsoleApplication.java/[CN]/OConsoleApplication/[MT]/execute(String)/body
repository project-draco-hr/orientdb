{
  iCommand=iCommand.trim();
  if (iCommand.length() == 0)   return true;
  if (iCommand.startsWith(COMMENT_PREFIX))   return true;
  String[] commandWords=OStringParser.getWords(iCommand,wordSeparator);
  for (  String cmd : helpCommands)   if (cmd.equals(commandWords[0])) {
    help();
    return true;
  }
  for (  String cmd : exitCommands)   if (cmd.equals(commandWords[0])) {
    return false;
  }
  Method lastMethodInvoked=null;
  final StringBuilder lastCommandInvoked=new StringBuilder();
  final String commandLowerCase=iCommand.toLowerCase();
  for (  Method m : getConsoleMethods()) {
    final String methodName=m.getName();
    final ConsoleCommand ann=m.getAnnotation(ConsoleCommand.class);
    final StringBuilder commandName=new StringBuilder();
    char ch;
    int commandWordCount=1;
    for (int i=0; i < methodName.length(); ++i) {
      ch=methodName.charAt(i);
      if (Character.isUpperCase(ch)) {
        commandName.append(" ");
        ch=Character.toLowerCase(ch);
        commandWordCount++;
      }
      commandName.append(ch);
    }
    if (!commandLowerCase.equals(commandName.toString()) && !commandLowerCase.startsWith(commandName.toString() + " ")) {
      if (ann == null)       continue;
      String[] aliases=ann.aliases();
      if (aliases == null || aliases.length == 0)       continue;
      boolean aliasMatch=false;
      for (      String alias : aliases) {
        if (iCommand.startsWith(alias.split(" ")[0])) {
          aliasMatch=true;
          commandWordCount=1;
          break;
        }
      }
      if (!aliasMatch)       continue;
    }
    Object[] methodArgs;
    if (ann != null && !ann.splitInWords()) {
      methodArgs=new String[]{iCommand.substring(iCommand.indexOf(' ') + 1)};
    }
 else {
      if (m.getParameterTypes().length > commandWords.length - commandWordCount) {
        for (int paramNum=m.getParameterAnnotations().length - 1; paramNum > -1; paramNum--) {
          final Annotation[] paramAnn=m.getParameterAnnotations()[paramNum];
          if (paramAnn != null)           for (int annNum=paramAnn.length - 1; annNum > -1; annNum--) {
            if (paramAnn[annNum] instanceof ConsoleParameter) {
              final ConsoleParameter annotation=(ConsoleParameter)paramAnn[annNum];
              if (annotation.optional())               commandWords=OArrays.copyOf(commandWords,commandWords.length + 1);
              break;
            }
          }
        }
      }
      methodArgs=OArrays.copyOfRange(commandWords,commandWordCount,commandWords.length);
    }
    try {
      m.invoke(this,methodArgs);
    }
 catch (    IllegalArgumentException e) {
      lastMethodInvoked=m;
      lastCommandInvoked.setLength(0);
      for (int i=0; i < commandWordCount; ++i) {
        if (lastCommandInvoked.length() > 0)         lastCommandInvoked.append(" ");
        lastCommandInvoked.append(commandWords[i]);
      }
      continue;
    }
catch (    Exception e) {
      if (e.getCause() != null)       onException(e.getCause());
 else       e.printStackTrace();
    }
    return true;
  }
  if (lastMethodInvoked != null)   syntaxError(lastCommandInvoked.toString(),lastMethodInvoked);
  out.println("!Unrecognized command: '" + iCommand + "'");
  return true;
}
