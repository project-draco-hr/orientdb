{
  Lock fileLock;
  Lock pageLock;
  cacheLock.acquireReadLock();
  try {
    fileLock=fileLockManager.acquireSharedLock(cacheEntry.getFileId());
    try {
      pageLock=pageLockManager.acquireExclusiveLock(new PageKey(cacheEntry.getFileId(),cacheEntry.getPageIndex()));
      try {
        remove(cacheEntry.getFileId(),cacheEntry.getPageIndex());
        pinnedPages.put(new PinnedPage(cacheEntry.getFileId(),cacheEntry.getPageIndex()),cacheEntry);
      }
  finally {
        pageLockManager.releaseLock(pageLock);
      }
    }
  finally {
      fileLockManager.releaseLock(fileLock);
    }
  }
  finally {
    cacheLock.releaseReadLock();
  }
}
