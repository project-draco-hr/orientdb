{
  boolean needToUpdate=false;
  if (parentRid.isNew() && parent != null) {
    if (parent.record.getIdentity().isNew()) {
      parent.save();
      needToUpdate=true;
    }
    parentRid=parent.record.getIdentity();
  }
  if (leftRid.isNew() && left != null) {
    if (left.record.getIdentity().isNew()) {
      left.save();
      needToUpdate=true;
    }
    leftRid=left.record.getIdentity();
  }
  if (rightRid.isNew() && right != null) {
    if (right.record.getIdentity().isNew()) {
      right.save();
      needToUpdate=true;
    }
    rightRid=right.record.getIdentity();
  }
  if (needToUpdate) {
    markDirty();
    save();
  }
  return needToUpdate;
}
