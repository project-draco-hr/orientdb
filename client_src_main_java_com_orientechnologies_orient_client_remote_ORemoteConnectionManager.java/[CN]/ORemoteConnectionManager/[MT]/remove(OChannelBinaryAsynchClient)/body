{
  try {
    conn.unlock();
  }
 catch (  Exception e) {
    OLogManager.instance().debug(this,"Can not unlock connection lock",e);
  }
  try {
    conn.close();
  }
 catch (  Exception e) {
    OLogManager.instance().debug(this,"Can not close connection",e);
  }
  final OResourcePool<String,OChannelBinaryAsynchClient> pool=connections.get(conn.getServerURL());
  if (pool == null)   throw new IllegalStateException("Connection cannot be released because the pool doesn't exist anymore");
  pool.remove(conn);
}
