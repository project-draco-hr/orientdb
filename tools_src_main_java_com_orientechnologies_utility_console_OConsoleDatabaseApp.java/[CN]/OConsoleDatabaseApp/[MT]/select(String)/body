{
  checkCurrentDatabase();
  if (iQueryText == null)   return;
  iQueryText=iQueryText.trim();
  if (iQueryText.length() == 0 || iQueryText.equalsIgnoreCase("select"))   return;
  iQueryText="select " + iQueryText;
  currentResultSet.clear();
  final List<String> columns=new ArrayList<String>();
  final int limit=Integer.parseInt((String)properties.get("limit"));
  long start=System.currentTimeMillis();
  currentDatabase.command(new OSQLAsynchQuery<ODocument>(iQueryText,limit + 1,new OCommandResultListener(){
    public boolean result(    final Object iRecord){
      if (currentResultSet.size() > limit - 1) {
        printHeaderLine(columns);
        out.println("\nResultset contains more items not displayed (max=" + limit + ")");
        return false;
      }
      ORecordSchemaAwareAbstract<?> record=(ORecordSchemaAwareAbstract<?>)iRecord;
      dumpRecordInTable(currentResultSet.size(),record,columns);
      currentResultSet.add(record);
      return true;
    }
  }
)).execute();
  if (currentResultSet.size() > 0 && currentResultSet.size() < limit)   printHeaderLine(columns);
  out.println(currentResultSet.size() + " item(s) found. Query executed in " + (float)(System.currentTimeMillis() - start) / 1000 + " sec(s).");
}
