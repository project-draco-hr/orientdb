{
  tree.saveAllNewEntries();
  final ODocument doc=(ODocument)record;
  doc.setClassName(PERSISTENT_CLASS_NAME);
  doc.field("root",root != null ? root : null);
  if (tree.getTemporaryEntries() != null && tree.getTemporaryEntries().size() > 0)   doc.field("tempEntries",new ArrayList<ORecord<?>>(tree.getTemporaryEntries().keySet()));
  return doc;
}
