{
  if (url == null)   throw new IllegalStateException("Database is closed");
synchronized (this) {
    if (pool == null) {
      database=new ODatabaseDocumentTx(url);
      if (url.startsWith("remote:") || database.exists()) {
        if (database.isClosed())         database.open(username,password);
      }
 else       database.create();
    }
 else     database=pool.acquire();
    makeActive();
    checkForGraphSchema(database);
  }
}
