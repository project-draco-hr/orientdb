{
  ODatabaseDocument db=null;
  try {
    String url=OSystemVariableResolver.resolveSystemVariables(OFileUtils.getPath(new File(BASEPATH + this.databaseName).getPath()));
    if (this.exists(url)) {
      db=new ODatabaseDocumentTx("plocal:" + url).open(this.user,this.pass);
    }
 else {
      db=null;
      OLogManager.instance().error(this,"database " + this.databaseName + " does not exist");
    }
  }
 catch (  Exception ex) {
    db=null;
    OLogManager.instance().error(this,"failed to open database",ex);
  }
  return db;
}
