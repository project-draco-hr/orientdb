{
  final OBinarySerializer keySerializer;
  if (indexDefinition != null) {
    if (indexDefinition instanceof ORuntimeKeyIndexDefinition) {
      keySerializer=((ORuntimeKeyIndexDefinition)indexDefinition).getSerializer();
    }
 else {
      if (indexDefinition.getTypes().length > 1) {
        keySerializer=OCompositeKeySerializer.INSTANCE;
      }
 else {
        keySerializer=OBinarySerializerFactory.getInstance().getObjectSerializer(indexDefinition.getTypes()[0]);
      }
    }
  }
 else {
    keySerializer=new OSimpleKeySerializer();
  }
  return keySerializer;
}
