{
  final OSchema schema=database.getMetadata().getSchema();
  final OClass oClass=schema.getClass("classIndexManagerTestClass");
  final OIndex<?> propSixIndex=oClass.getClassIndex("classIndexManagerTestClass.prop6");
  Assert.assertEquals(propSixIndex.getSize(),0);
  final ODocument doc=new ODocument("classIndexManagerTestClass");
  final Set<String> setProperty=new HashSet<String>();
  setProperty.add("value1");
  setProperty.add("value2");
  doc.field("prop6",setProperty);
  doc.save();
  Assert.assertEquals(propSixIndex.getSize(),2);
  Assert.assertNotNull(propSixIndex.get("value1"));
  Assert.assertNotNull(propSixIndex.get("value2"));
  Set<String> trackedSet=doc.field("prop6");
  trackedSet.add("value4");
  trackedSet.add("value4");
  trackedSet.add("value4");
  trackedSet.remove("value4");
  trackedSet.remove("value2");
  trackedSet.add("value5");
  doc.save();
  Assert.assertEquals(propSixIndex.getSize(),2);
  Assert.assertNotNull(propSixIndex.get("value1"));
  Assert.assertNotNull(propSixIndex.get("value5"));
}
