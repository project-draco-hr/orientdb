{
  final OIndexManager indexManager=database.getMetadata().getIndexManager();
  final Set<OIndex<?>> indexes=indexManager.getClassIndexes(CLASS_NAME);
  final Set<OIndexDefinition> expectedIndexDefinitions=new HashSet<OIndexDefinition>();
  final OCompositeIndexDefinition compositeIndexOne=new OCompositeIndexDefinition(CLASS_NAME,-1);
  compositeIndexOne.addIndex(new OPropertyIndexDefinition(CLASS_NAME,"fOne",OType.INTEGER,-1));
  compositeIndexOne.addIndex(new OPropertyIndexDefinition(CLASS_NAME,"fTwo",OType.STRING,-1));
  expectedIndexDefinitions.add(compositeIndexOne);
  final OCompositeIndexDefinition compositeIndexTwo=new OCompositeIndexDefinition(CLASS_NAME,-1);
  compositeIndexTwo.addIndex(new OPropertyIndexDefinition(CLASS_NAME,"fOne",OType.INTEGER,-1));
  compositeIndexTwo.addIndex(new OPropertyIndexDefinition(CLASS_NAME,"fTwo",OType.STRING,-1));
  compositeIndexTwo.addIndex(new OPropertyIndexDefinition(CLASS_NAME,"fThree",OType.BOOLEAN,-1));
  expectedIndexDefinitions.add(compositeIndexTwo);
  final OPropertyIndexDefinition propertyIndex=new OPropertyIndexDefinition(CLASS_NAME,"fOne",OType.INTEGER,-1);
  expectedIndexDefinitions.add(propertyIndex);
  assertEquals(indexes.size(),3);
  for (  final OIndex index : indexes) {
    assertTrue(expectedIndexDefinitions.contains(index.getDefinition()));
  }
}
