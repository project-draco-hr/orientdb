{
  final boolean locked=lock.acquireExclusiveLock();
  try {
    final OStorageMemoryClusterConfiguration config=new OStorageMemoryClusterConfiguration(iClusterName,clusters.length);
    configuration.clusters.add(config);
    final OClusterMemory cluster=new OClusterMemory(clusters.length,iClusterName);
    final int id=registerCluster(cluster);
    configuration.update();
    return id;
  }
  finally {
    lock.releaseExclusiveLock(locked);
  }
}
