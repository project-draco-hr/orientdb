{
  Map<String,String> options=checkOptions(readOptions(args));
  int iterationsNumber=getNumber(options.get(OConstants.OPTION_ITERATIONS),"iterations");
  int threadsNumber=getNumber(options.get(OConstants.OPTION_THREADS),"threads");
  OMode mode=com.orientechnologies.orient.stresstest.OMode.valueOf(options.get(OConstants.OPTION_MODE).toUpperCase());
  if (mode != com.orientechnologies.orient.stresstest.OMode.PLOCAL) {
    throw new OInitException("OMode [" + mode + "] not yet supported. Use PLOCAL.");
  }
  OOperationsSet operationsSet=new OOperationsSet(options.get(OConstants.OPTION_OPERATIONS));
  String rootPassword=options.get(OConstants.OPTION_ROOT_PASSWORD);
  return new OStressTester(mode,operationsSet,iterationsNumber,threadsNumber,rootPassword);
}
