{
  List<Profile> result=database.command(new OSQLSynchQuery<Profile>("select * from Profile where nick is not null")).execute();
  for (  Profile p : result) {
    System.out.println(database.getRecordByUserObject(p,false));
  }
  OIndex idx=database.getMetadata().getIndexManager().getIndex("Profile.nick");
  System.out.println("IDX");
  Set<Profile> indexResult=new HashSet<Profile>();
  Iterator<Entry<Object,Set<OIdentifiable>>> it=idx.iterator();
  while (it.hasNext()) {
    Collection<? extends Profile> c=(Collection<? extends Profile>)it.next().getValue();
    System.out.println(c);
    indexResult.addAll(c);
  }
  Assert.assertEquals(indexResult.size(),result.size());
}
