{
  final Collection<? extends OCluster> clusters=connection.database.getStorage().getClusterInstances();
  int clusterCount=0;
  for (  OCluster c : clusters) {
    if (c != null) {
      ++clusterCount;
    }
  }
  if (connection.data.protocolVersion >= 7)   channel.writeShort((short)clusterCount);
 else   channel.writeInt(clusterCount);
  for (  OCluster c : clusters) {
    if (c != null) {
      channel.writeString(c.getName());
      channel.writeShort((short)c.getId());
      channel.writeString(c.getType());
      if (connection.data.protocolVersion >= 12)       channel.writeShort((short)c.getDataSegmentId());
    }
  }
}
