{
  document.setInternalStatus(ORecordElement.STATUS.UNMARSHALLING);
  try {
    document.field("name",name);
    document.field("shortName",shortName);
    document.field("defaultClusterId",defaultClusterId);
    document.field("clusterIds",clusterIds);
    document.field("overSize",overSize);
    document.field("strictMode",strictMode);
    document.field("abstract",abstractClass);
    final Set<ODocument> props=new LinkedHashSet<ODocument>();
    for (    final OProperty p : properties.values()) {
      props.add(((OPropertyImpl)p).toStream());
    }
    document.field("properties",props,OType.EMBEDDEDSET);
    document.field("superClass",superClass != null ? superClass.getName() : null);
    document.field("customFields",customFields != null && customFields.size() > 0 ? customFields : null,OType.EMBEDDEDMAP);
  }
  finally {
    document.setInternalStatus(ORecordElement.STATUS.LOADED);
  }
  return document;
}
