{
  buildDirectory=System.getProperty("buildDirectory",".");
  if (buildDirectory == null)   buildDirectory=".";
  if (remote) {
    try {
      startServer(drop);
      url="remote:localhost/" + getDatabaseName();
      databaseDocumentTx=new ODatabaseDocumentTx(url);
      databaseDocumentTx.open("admin","admin");
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
 else {
    url="plocal:" + buildDirectory + "/databases/"+ getDatabaseName();
    databaseDocumentTx=new ODatabaseDocumentTx(url);
    if (databaseDocumentTx.exists()) {
      databaseDocumentTx.open("admin","admin");
      if (drop) {
        databaseDocumentTx.drop();
        databaseDocumentTx=Orient.instance().getDatabaseFactory().createDatabase("graph",url);
        databaseDocumentTx.create();
      }
    }
 else {
      databaseDocumentTx=Orient.instance().getDatabaseFactory().createDatabase("graph",url);
      databaseDocumentTx.create();
    }
    ODatabaseRecordThreadLocal.INSTANCE.set(databaseDocumentTx);
  }
}
