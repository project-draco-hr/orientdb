{
  final Character c=OSchemaShared.checkNameIfValid(iName);
  if (c != null)   throw new IllegalArgumentException("Invalid index name '" + iName + "'. Character '"+ c+ "' is invalid");
  acquireExclusiveLock();
  try {
    final OIndexInternal<?> index=OIndexes.createIndex(getDatabase(),iType);
    index.create(iName,indexDefinition,getDatabase(),defaultClusterName,iClusterIdsToIndex,iProgressListener);
    addIndexInternal(index);
    setDirty();
    save();
    return getIndexInstance(index);
  }
  finally {
    releaseExclusiveLock();
  }
}
