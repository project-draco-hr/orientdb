{
  try {
    SecretKeySpec secret=getSecretKeySpec();
    Cipher cipher=getCipher();
    cipher.init(Cipher.ENCRYPT_MODE,secret,new IvParameterSpec(iv));
    byte[] contentToEncrypt;
    if (offset == 0 && length == content.length) {
      contentToEncrypt=content;
    }
 else {
      contentToEncrypt=new byte[length];
      System.arraycopy(content,offset,contentToEncrypt,0,length);
    }
    byte[] encryptedTextBytes=cipher.doFinal(contentToEncrypt);
    return encryptedTextBytes;
  }
 catch (  NoSuchAlgorithmException e) {
    throw new OSecurityException(e.getMessage(),e);
  }
catch (  NoSuchPaddingException e) {
    throw new OSecurityException(e.getMessage(),e);
  }
catch (  IllegalArgumentException e) {
    throw e;
  }
catch (  InvalidKeyException e) {
    throw new OSecurityException(e.getMessage(),e);
  }
catch (  IllegalBlockSizeException e) {
    throw new IllegalArgumentException(e.getMessage(),e);
  }
catch (  BadPaddingException e) {
    throw new OSecurityException("The given 'salt' could be wrong (" + e.getMessage() + ")",e);
  }
catch (  InvalidAlgorithmParameterException e) {
    throw new OSecurityException(e.getMessage(),e);
  }
}
