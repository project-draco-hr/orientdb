{
  try {
    final int reqId;
    try {
      reqId=storage.beginRequest(OChannelDistributedProtocol.REQUEST_DISTRIBUTED_DB_SHARE_SENDER);
      storage.getNetwork().writeString(iDatabaseName);
      storage.getNetwork().writeString(iDatabaseUserName);
      storage.getNetwork().writeString(iDatabaseUserPassword);
      storage.getNetwork().writeString(iRemoteName);
      storage.getNetwork().writeByte((byte)(iSynchronousMode ? 1 : 0));
    }
  finally {
      storage.endRequest();
    }
    storage.getResponse(reqId);
    OLogManager.instance().debug(this,"Database '%s' has been shared in mode '%s' with the server '%s'",iDatabaseName,iSynchronousMode,iRemoteName);
  }
 catch (  Exception e) {
    OLogManager.instance().exception("Can't share the database: " + iDatabaseName,e,OStorageException.class);
  }
  return this;
}
