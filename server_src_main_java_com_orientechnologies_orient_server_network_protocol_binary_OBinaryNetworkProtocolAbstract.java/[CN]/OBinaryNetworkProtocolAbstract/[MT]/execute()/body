{
  requestType=-1;
  clientTxId=0;
  try {
    requestType=channel.readByte();
    clientTxId=channel.readInt();
    onBeforeRequest();
    if (!executeRequest()) {
      OLogManager.instance().error(this,"Request not supported. Code: " + requestType);
      channel.clearInput();
      sendError(clientTxId,new ONetworkProtocolException("Request not supported. Code: " + requestType));
    }
    onAfterRequest();
  }
 catch (  EOFException e) {
    handleConnectionError(channel,e);
    sendShutdown();
    OLogManager.instance().error(this,"Error on executing request",e);
  }
catch (  SocketException e) {
    handleConnectionError(channel,e);
    sendShutdown();
    OLogManager.instance().error(this,"Error on executing request",e);
  }
catch (  OConcurrentModificationException e) {
    sendError(clientTxId,e);
    OLogManager.instance().info(this,"Concurrent modification during record update",e);
  }
catch (  OException e) {
    sendError(clientTxId,e);
    OLogManager.instance().error(this,"Error on executing request",e);
  }
catch (  RuntimeException e) {
    sendError(clientTxId,e);
    OLogManager.instance().error(this,"Error on executing request",e);
  }
catch (  Throwable t) {
    sendError(clientTxId,t);
    OLogManager.instance().error(this,"Error on executing request",t);
  }
 finally {
    OSerializationThreadLocal.INSTANCE.get().clear();
  }
}
