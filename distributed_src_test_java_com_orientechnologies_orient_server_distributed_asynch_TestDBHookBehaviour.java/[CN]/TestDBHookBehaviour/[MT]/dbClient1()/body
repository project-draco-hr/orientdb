{
  OrientBaseGraph graph=new OrientGraph(SERVER_ORIENT_URL_MAIN);
  try {
    Vertex v1=graph.addVertex("vertextype",(String)null);
    graph.commit();
    assertEquals(1,HookFireCounter.getVertexCreatedCnt());
    assertEquals(0,HookFireCounter.getVertexUpdatedCnt());
    assertEquals(0,HookFireCounter.getEdgeCreatedCnt());
    assertEquals(0,HookFireCounter.getEdgeUpdatedCnt());
    v1.setProperty("p1a","v1a");
    graph.commit();
    assertEquals(1,HookFireCounter.getVertexCreatedCnt());
    assertEquals(1,HookFireCounter.getVertexUpdatedCnt());
    assertEquals(0,HookFireCounter.getEdgeCreatedCnt());
    assertEquals(0,HookFireCounter.getEdgeUpdatedCnt());
    Vertex v2=graph.addVertex("vertextype",(String)null);
    graph.commit();
    assertEquals(2,HookFireCounter.getVertexCreatedCnt());
    assertEquals(1,HookFireCounter.getVertexUpdatedCnt());
    assertEquals(0,HookFireCounter.getEdgeCreatedCnt());
    assertEquals(0,HookFireCounter.getEdgeUpdatedCnt());
    v2.setProperty("p2a","v2a");
    graph.commit();
    assertEquals(2,HookFireCounter.getVertexCreatedCnt());
    assertEquals(2,HookFireCounter.getVertexUpdatedCnt());
    assertEquals(0,HookFireCounter.getEdgeCreatedCnt());
    assertEquals(0,HookFireCounter.getEdgeUpdatedCnt());
    v1.addEdge("edgetype",v2);
    graph.commit();
    assertEquals(2,HookFireCounter.getVertexCreatedCnt());
    assertEquals(4,HookFireCounter.getVertexUpdatedCnt());
    assertEquals(1,HookFireCounter.getEdgeCreatedCnt());
    assertEquals(1,HookFireCounter.getEdgeUpdatedCnt());
  }
 catch (  Throwable e) {
    if (exceptionInThread == null) {
      exceptionInThread=e;
    }
  }
 finally {
    graph.shutdown();
  }
}
