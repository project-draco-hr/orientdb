{
  if (ppos.dataSegment > 0)   return false;
  lock.acquireSharedLock();
  try {
    if (ppos.dataPosition >= data.count())     return false;
  }
  finally {
    lock.releaseSharedLock();
  }
  return true;
}
