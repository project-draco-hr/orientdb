{
  final Iterator<Entry<Integer,OClientConnection>> iterator=connections.entrySet().iterator();
  while (iterator.hasNext()) {
    final Entry<Integer,OClientConnection> entry=iterator.next();
    ONetworkProtocol protocol=entry.getValue().protocol;
    protocol.getChannel().close();
    final Socket socket;
    if (protocol == null || protocol.getChannel() == null)     socket=null;
 else     socket=protocol.getChannel().socket;
    if (socket != null && !socket.isClosed() && !socket.isInputShutdown()) {
      try {
        socket.shutdownInput();
      }
 catch (      IOException e) {
        OLogManager.instance().debug(this,"Error on closing connection of %s client during shutdown",e,entry.getValue().getRemoteAddress());
      }
    }
  }
}
