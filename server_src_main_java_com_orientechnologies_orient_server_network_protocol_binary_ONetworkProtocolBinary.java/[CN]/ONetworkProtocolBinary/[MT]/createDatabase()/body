{
  setDataCommandInfo("Create database");
  String dbName=channel.readString();
  String dbType=ODatabaseDocument.TYPE;
  if (connection.data.protocolVersion >= 8)   dbType=channel.readString();
  String storageType=channel.readString();
  checkServerAccess("database.create");
  checkStorageExistence(dbName);
  connection.database=getDatabaseInstance(dbName,dbType,storageType);
  createDatabase(connection.database,null,null);
  connection.rawDatabase=((ODatabaseRaw)((ODatabaseComplex<?>)connection.database.getUnderlying()).getUnderlying());
  beginResponse();
  try {
    sendOk(clientTxId);
  }
  finally {
    endResponse();
  }
}
