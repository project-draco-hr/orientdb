{
  long pageIndex=walRecord.getPageIndex();
  long pagePointer=diskCache.load(fileId,pageIndex);
  try {
    OLocalPage page=new OLocalPage(pagePointer,false,null,pageIndex,id);
    if (page.getLsn().compareTo(walRecord.getLsn()) < 0) {
      page=new OLocalPage(pagePointer,true,null,pageIndex,id);
      page.setLsn(walRecord.getLsn());
      diskCache.markDirty(fileId,pageIndex);
    }
  }
  finally {
    diskCache.release(fileId,pageIndex);
  }
}
