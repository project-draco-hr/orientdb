{
  ODatabaseDocumentTx db=null;
  final String[] urlParts=checkSyntax(iRequest.url,4,"Syntax error: documentbyclass/<database>/<class-name>/<record-position>[/fetchPlan]");
  final String fetchPlan=urlParts.length > 4 ? urlParts[4] : null;
  iRequest.data.commandInfo="Load document";
  final ORecord<?> rec;
  try {
    db=getProfiledDatabaseInstance(iRequest);
    if (db.getMetadata().getSchema().getClass(urlParts[2]) == null) {
      throw new IllegalArgumentException("Invalid class '" + urlParts[2] + "'");
    }
    final String rid=db.getClusterIdByName(urlParts[2]) + ":" + urlParts[3];
    rec=db.load(new ORecordId(rid),fetchPlan);
  }
  finally {
    if (db != null)     OSharedDocumentDatabase.release(db);
  }
  if (rec == null)   iResponse.sendTextContent(OHttpUtils.STATUS_NOTFOUND_CODE,"Not Found",null,OHttpUtils.CONTENT_JSON,"Record with id '" + urlParts[2] + "' was not found.");
 else   iResponse.sendRecordContent(rec,fetchPlan);
  return false;
}
