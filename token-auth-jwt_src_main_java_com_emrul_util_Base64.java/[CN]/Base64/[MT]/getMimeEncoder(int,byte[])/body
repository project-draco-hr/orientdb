{
  if (lineSeparator == null)   throw new NullPointerException();
  int[] base64=Decoder.fromBase64;
  for (  byte b : lineSeparator) {
    if (base64[b & 0xff] != -1)     throw new IllegalArgumentException("Illegal base64 line separator character 0x" + Integer.toString(b,16));
  }
  if (lineLength <= 0) {
    return Encoder.RFC4648;
  }
  return new Encoder(false,lineSeparator,lineLength >> 2 << 2,true);
}
