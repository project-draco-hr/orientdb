{
  final Map<String,Object> loadProperties=configuration.getLoadProperties();
  byte[] buffer=new byte[1024];
  int rb=0;
  while (zipInputStream.available() > 0) {
    final int b=zipInputStream.read(buffer,rb,buffer.length - rb);
    if (b == -1)     break;
    rb+=b;
    if (rb == buffer.length) {
      byte[] oldBuffer=buffer;
      buffer=new byte[buffer.length << 1];
      System.arraycopy(oldBuffer,0,buffer,0,oldBuffer.length);
    }
  }
  configuration.fromStream(buffer,0,rb);
  configuration.update();
  configuration.close();
  configuration.load(loadProperties);
}
