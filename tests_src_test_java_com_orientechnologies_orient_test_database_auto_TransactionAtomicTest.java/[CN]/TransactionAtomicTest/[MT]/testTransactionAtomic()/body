{
  ODatabaseDocumentTx db1=new ODatabaseDocumentTx(url);
  db1.open("admin","admin");
  ODatabaseDocumentTx db2=new ODatabaseDocumentTx(url);
  db2.open("admin","admin");
  ORecordFlat record1=new ORecordFlat();
  record1.value("This is the first version").save();
  record1.reload();
  db2.activateOnCurrentThread();
  ORecordFlat record2=db2.load(record1.getIdentity());
  record2.value("This is the second version").save();
  record2.value("This is the third version").save();
  db1.activateOnCurrentThread();
  record1.reload(null,true);
  Assert.assertEquals(record1.value(),"This is the third version");
  db1.close();
  db2.activateOnCurrentThread();
  db2.close();
  database.activateOnCurrentThread();
}
