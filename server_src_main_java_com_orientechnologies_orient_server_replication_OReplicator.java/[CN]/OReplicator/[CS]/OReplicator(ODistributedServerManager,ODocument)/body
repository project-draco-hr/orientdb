{
  clusterConfiguration=iDocument;
  trigger=new OReplicatorRecordHook(this);
  for (  String dbName : clusterConfiguration.fieldNames()) {
    final ODocument db=clusterConfiguration.field(dbName);
    final Collection<ODocument> dbNodes=db.field("nodes");
    for (    ODocument node : dbNodes) {
      final String nodeId=node.field("id");
      if (iManager.itsMe(nodeId))       continue;
      if (!nodes.containsKey(nodeId)) {
        final ODistributedNode dNode=new ODistributedNode(iManager,nodeId);
        nodes.put(nodeId,dNode);
        try {
          final ODistributedDatabaseInfo dbInfo=new ODistributedDatabaseInfo();
          dbInfo.databaseName=dbName;
          dNode.connectDatabase(dbInfo);
        }
 catch (        IOException e) {
          removeDistributedNode(nodeId,e);
        }
      }
    }
  }
}
