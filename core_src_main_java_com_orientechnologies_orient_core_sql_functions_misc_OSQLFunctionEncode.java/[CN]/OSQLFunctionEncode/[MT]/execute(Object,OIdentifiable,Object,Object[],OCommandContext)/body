{
  final Object candidate=iParameters[0];
  final String format=iParameters[1].toString();
  byte[] data=null;
  if (candidate instanceof byte[]) {
    data=(byte[])candidate;
  }
 else   if (candidate instanceof ORecordId) {
    final ORecord<?> rec=((ORecordId)candidate).getRecord();
    if (rec instanceof ORecordBytes) {
      data=((ORecordBytes)rec).toStream();
    }
  }
 else   if (candidate instanceof OSerializableStream) {
    data=((OSerializableStream)candidate).toStream();
  }
  if (data == null) {
    return null;
  }
  if (FORMAT_BASE64.equalsIgnoreCase(format)) {
    return OBase64Utils.encodeBytes(data);
  }
 else {
    throw new OException("unknowned format :" + format);
  }
}
