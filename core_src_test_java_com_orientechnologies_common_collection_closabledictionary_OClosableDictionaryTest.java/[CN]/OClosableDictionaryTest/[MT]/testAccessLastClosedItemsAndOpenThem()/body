{
  final OClosableDictionary<Long,CItem> dictionary=new OClosableDictionary<Long,CItem>(10);
  for (int i=0; i < 10; i++) {
    final CItem closableItem=new CItem(i);
    dictionary.add((long)i,closableItem);
  }
  for (int i=0; i < 5; i++) {
    OClosableHolder<CItem> holder=dictionary.acquire((long)i);
    dictionary.release(holder);
  }
  dictionary.emptyBuffers();
  for (int i=0; i < 5; i++) {
    dictionary.add(10L + i,new CItem(10 + i));
  }
  for (int i=5; i < 10; i++) {
    Assert.assertTrue(!dictionary.get((long)i).isOpen());
  }
  for (int i=5; i < 10; i++) {
    OClosableHolder<CItem> holder=dictionary.acquire((long)i);
    dictionary.release(holder);
  }
  dictionary.emptyBuffers();
  for (int i=5; i < 10; i++) {
    Assert.assertTrue(!dictionary.get((long)i).isOpen());
  }
  for (int i=5; i < 10; i++) {
    OClosableHolder<CItem> holder=dictionary.acquire((long)i);
    holder.get().open();
    dictionary.release(holder);
  }
  dictionary.emptyBuffers();
  for (int i=5; i < 10; i++) {
    Assert.assertTrue(dictionary.get((long)i).isOpen());
  }
  Assert.assertTrue(dictionary.checkAllLRUListItemsInMap());
  Assert.assertTrue(dictionary.checkAllOpenItemsInLRUList());
}
