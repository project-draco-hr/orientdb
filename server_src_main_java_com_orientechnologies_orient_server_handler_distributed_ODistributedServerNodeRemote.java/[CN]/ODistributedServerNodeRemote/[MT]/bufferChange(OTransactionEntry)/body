{
synchronized (bufferedChanges) {
    if (bufferedChanges.size() > manager.serverOutSynchMaxBuffers) {
      manager.removeNode(this);
      bufferedChanges.clear();
      databases.clear();
    }
 else {
      try {
        OTransactionEntry entry;
        for (int i=0; i < bufferedChanges.size(); ++i) {
          entry=bufferedChanges.get(i);
          if (entry.getRecord().getIdentity().equals(iRequest.getRecord().getIdentity())) {
            bufferedChanges.set(i,iRequest);
            return;
          }
        }
        bufferedChanges.add(iRequest);
      }
  finally {
        OLogManager.instance().info(this,"Can't reach the remote node '%s', buffering change %d/%d for the record %s",id,bufferedChanges.size(),manager.serverOutSynchMaxBuffers,iRequest.getRecord().getIdentity());
      }
    }
  }
}
