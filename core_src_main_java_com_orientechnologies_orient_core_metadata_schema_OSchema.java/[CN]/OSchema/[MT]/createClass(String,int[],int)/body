{
  document.getDatabase().checkSecurity(ODatabaseSecurityResources.SCHEMA,ORole.PERMISSION_CREATE);
  final String key=iClassName.toLowerCase();
  if (classes.containsKey(key))   throw new OSchemaException("Class " + iClassName + " already exists in current database");
  final OClass cls=new OClass(this,classes.size(),iClassName,iClusterIds,iDefaultClusterId);
  classes.put(key,cls);
  if (cls.getShortName() != null)   classes.put(cls.getShortName().toLowerCase(),cls);
  document.setDirty();
  return cls;
}
