{
  if (_className == null)   fetchClassName();
  if (_className == null)   return null;
  final ODatabaseDocument databaseRecord=getDatabaseIfDefined();
  if (databaseRecord != null && !databaseRecord.isClosed()) {
    final OSchema immutableSchema=((OMetadataInternal)databaseRecord.getMetadata()).getImmutableSchemaSnapshot();
    if (immutableSchema == null)     return null;
    if (_immutableClazz == null) {
      _immutableSchemaVersion=immutableSchema.getVersion();
      _immutableClazz=(OImmutableClass)immutableSchema.getClass(_className);
    }
 else {
      if (_immutableSchemaVersion < immutableSchema.getVersion()) {
        _immutableSchemaVersion=immutableSchema.getVersion();
        _immutableClazz=(OImmutableClass)immutableSchema.getClass(_className);
      }
    }
  }
  return _immutableClazz;
}
