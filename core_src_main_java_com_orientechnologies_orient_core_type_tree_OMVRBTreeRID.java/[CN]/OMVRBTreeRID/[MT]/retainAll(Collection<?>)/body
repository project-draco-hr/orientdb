{
  lock.acquireExclusiveLock();
  try {
    ((OMVRBTreeRIDProvider)dataProvider).lazyUnmarshall();
    if (hasNewItems()) {
      final Collection<ORecord<?>> v=newEntries.keySet();
      v.retainAll(c);
      if (newEntries.size() == 0)       newEntries=null;
    }
    boolean modified=false;
    final Iterator<?> e=iterator();
    while (e.hasNext()) {
      if (!c.contains(e.next())) {
        e.remove();
        modified=true;
      }
    }
    return modified;
  }
  finally {
    lock.releaseExclusiveLock();
  }
}
