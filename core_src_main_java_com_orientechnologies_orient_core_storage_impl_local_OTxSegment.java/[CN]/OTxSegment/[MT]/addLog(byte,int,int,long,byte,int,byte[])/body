{
  final int contentSize=iRecordContent != null ? iRecordContent.length : 0;
  acquireExclusiveLock();
  try {
    final int size=OFFSET_RECORD_CONTENT + contentSize;
    int offset=file.allocateSpace(size);
    file.writeByte(offset,STATUS_COMMITTING);
    offset+=OConstants.SIZE_BYTE;
    file.writeByte(offset,iOperation);
    offset+=OConstants.SIZE_BYTE;
    file.writeInt(offset,iTxId);
    offset+=OConstants.SIZE_INT;
    file.writeShort(offset,(short)iClusterId);
    offset+=OConstants.SIZE_SHORT;
    file.writeLong(offset,iClusterOffset);
    offset+=OConstants.SIZE_LONG;
    file.writeByte(offset,iRecordType);
    offset+=OConstants.SIZE_BYTE;
    file.writeInt(offset,iRecordVersion);
    offset+=OConstants.SIZE_INT;
    file.writeInt(offset,contentSize);
    offset+=OConstants.SIZE_INT;
    file.write(offset,iRecordContent);
    offset+=contentSize;
    file.synch();
  }
  finally {
    releaseExclusiveLock();
  }
}
