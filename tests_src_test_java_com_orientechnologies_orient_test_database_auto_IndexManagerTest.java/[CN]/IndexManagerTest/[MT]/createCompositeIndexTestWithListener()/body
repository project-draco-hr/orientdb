{
  final AtomicInteger atomicInteger=new AtomicInteger(0);
  final OProgressListener progressListener=new OProgressListener(){
    public void onBegin(    final Object iTask,    final long iTotal){
      atomicInteger.incrementAndGet();
    }
    public boolean onProgress(    final Object iTask,    final long iCounter,    final float iPercent){
      return true;
    }
    public void onCompletition(    final Object iTask,    final boolean iSucceed){
      atomicInteger.incrementAndGet();
    }
  }
;
  final OIndexManagerProxy indexManager=databaseDocument.getMetadata().getIndexManager();
  final OIndex result=indexManager.createIndex("compositetwo",OClass.INDEX_TYPE.NOTUNIQUE.toString(),new OCompositeIndexDefinition(CLASS_NAME,Arrays.asList(new OPropertyIndexDefinition(CLASS_NAME,"fOne",OType.INTEGER),new OPropertyIndexDefinition(CLASS_NAME,"fTwo",OType.STRING),new OPropertyIndexDefinition(CLASS_NAME,"fThree",OType.BOOLEAN))),new int[]{databaseDocument.getClusterIdByName(CLASS_NAME)},progressListener);
  assertEquals(result.getName(),"compositetwo");
  assertEquals(atomicInteger.get(),2);
  indexManager.reload();
  assertEquals(databaseDocument.getMetadata().getIndexManager().getClassIndex(CLASS_NAME,"compositetwo").getName(),result.getName());
}
