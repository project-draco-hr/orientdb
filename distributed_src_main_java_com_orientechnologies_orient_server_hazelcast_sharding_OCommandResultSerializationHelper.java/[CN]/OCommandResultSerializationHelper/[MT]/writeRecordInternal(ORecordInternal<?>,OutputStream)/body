{
  stream.write(record.getRecordType());
  writeRecordId(record.getIdentity(),stream);
  stream.write(OBinaryProtocol.int2bytes(record.getVersion()));
  try {
    final byte[] bytes=record.toStream();
    stream.write(OBinaryProtocol.int2bytes(bytes.length));
    stream.write(bytes);
  }
 catch (  Exception e) {
    OLogManager.instance().error(null,"Error on unmarshalling record " + record.getIdentity().toString(),OSerializationException.class);
  }
}
