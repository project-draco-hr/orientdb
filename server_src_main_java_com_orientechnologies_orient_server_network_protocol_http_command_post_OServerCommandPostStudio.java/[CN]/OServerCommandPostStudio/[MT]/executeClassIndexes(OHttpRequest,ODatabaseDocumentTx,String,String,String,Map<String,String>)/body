{
  final OClass cls=db.getMetadata().getSchema().getClass(rid);
  if (cls == null) {
    sendTextContent(iRequest,OHttpUtils.STATUS_INTERNALERROR_CODE,"Error",null,OHttpUtils.CONTENT_TEXT_PLAIN,"Error: Class '" + rid + "' not found.");
    return;
  }
  if ("add".equals(operation)) {
    iRequest.data.commandInfo="Studio add index";
    try {
      final String[] fieldNames=fields.get("fields").trim().split("\\s*,\\s*");
      final String indexType=fields.get("type");
      cls.createIndex(fields.get("name"),indexType,fieldNames);
      sendTextContent(iRequest,OHttpUtils.STATUS_OK_CODE,"OK",null,OHttpUtils.CONTENT_TEXT_PLAIN,"Index " + fields.get("name") + " created successfully");
    }
 catch (    Exception e) {
      sendTextContent(iRequest,OHttpUtils.STATUS_INTERNALERROR_CODE,"Error on creating a new index for class " + rid + ": "+ e,null,OHttpUtils.CONTENT_TEXT_PLAIN,"Error on creating a new index for class " + rid + ": "+ e);
    }
  }
 else   if ("del".equals(operation)) {
    iRequest.data.commandInfo="Studio delete index";
    try {
      final OIndex<?> index=cls.getClassIndex(className);
      if (index == null) {
        sendTextContent(iRequest,OHttpUtils.STATUS_INTERNALERROR_CODE,"Error",null,OHttpUtils.CONTENT_TEXT_PLAIN,"Error: Index '" + className + "' not found in class '"+ rid+ "'.");
        return;
      }
      db.getMetadata().getIndexManager().dropIndex(index.getName());
      sendTextContent(iRequest,OHttpUtils.STATUS_OK_CODE,"OK",null,OHttpUtils.CONTENT_TEXT_PLAIN,"Index " + className + " deleted successfully.");
    }
 catch (    Exception e) {
      sendTextContent(iRequest,OHttpUtils.STATUS_INTERNALERROR_CODE,"Error on deletion index '" + className + "' for class "+ rid+ ": "+ e,null,OHttpUtils.CONTENT_TEXT_PLAIN,"Error on deletion index '" + className + "' for class "+ rid+ ": "+ e);
    }
  }
 else   sendTextContent(iRequest,OHttpUtils.STATUS_INTERNALERROR_CODE,"Error",null,OHttpUtils.CONTENT_TEXT_PLAIN,"Operation not supported");
}
