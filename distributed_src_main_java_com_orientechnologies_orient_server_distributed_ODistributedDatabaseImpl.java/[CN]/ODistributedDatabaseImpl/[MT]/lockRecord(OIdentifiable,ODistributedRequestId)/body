{
  final ODistributedRequestId oldReqId=lockManager.putIfAbsent(iRecord.getIdentity(),iRequestId);
  final boolean locked=oldReqId == null;
  if (!locked) {
    if (iRequestId.equals(oldReqId))     return true;
  }
  if (ODistributedServerLog.isDebugEnabled())   if (locked)   ODistributedServerLog.debug(this,getLocalNodeName(),null,DIRECTION.NONE,"Distributed transaction: locked record %s in database '%s' owned by server '%s'",iRecord,databaseName,manager.getNodeNameById(iRequestId.getNodeId()));
 else   ODistributedServerLog.info(this,getLocalNodeName(),null,DIRECTION.NONE,"Distributed transaction: cannot lock record %s in database '%s' owned by %s",iRecord,databaseName,oldReqId);
  return locked;
}
