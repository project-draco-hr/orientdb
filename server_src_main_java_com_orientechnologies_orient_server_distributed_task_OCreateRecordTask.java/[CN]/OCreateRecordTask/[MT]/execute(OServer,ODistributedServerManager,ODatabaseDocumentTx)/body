{
  ODistributedServerLog.debug(this,iManager.getLocalNodeName(),getNodeSource(),DIRECTION.IN,"creating record %s/%s v.%d...",database.getName(),rid.toString(),version);
  getRecord();
  final long clusterPosToReach=rid.getClusterPosition();
  if (ORecordId.isPersistent(clusterPosToReach)) {
    ORecordInternal.setIdentity(record,rid.getClusterId(),ORID.CLUSTER_POS_INVALID);
  }
  while (true) {
    if (clusterId > -1)     record.save(database.getClusterNameById(clusterId),true);
 else     if (rid.getClusterId() != -1)     record.save(database.getClusterNameById(rid.getClusterId()),true);
 else     record.save();
    rid=(ORecordId)record.getIdentity();
    if (clusterPosToReach > 0 && rid.clusterPosition < clusterPosToReach) {
      rid.getRecord().delete();
    }
 else     break;
  }
  ODistributedServerLog.debug(this,iManager.getLocalNodeName(),getNodeSource(),DIRECTION.IN,"+-> assigned new rid %s/%s v.%d",database.getName(),rid.toString(),record.getVersion());
  return new OPlaceholder(record);
}
