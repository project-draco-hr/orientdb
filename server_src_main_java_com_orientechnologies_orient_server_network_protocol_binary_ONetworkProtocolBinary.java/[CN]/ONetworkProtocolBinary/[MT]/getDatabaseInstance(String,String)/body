{
  final String path;
  final OStorage stg=Orient.instance().getStorage(iDbName);
  if (stg != null)   path=stg.getURL();
 else   if (iStorageMode.equals(OEngineLocal.NAME)) {
    path=iStorageMode + ":${ORIENTDB_HOME}/databases/" + iDbName;
  }
 else   if (iStorageMode.equals(OEngineMemory.NAME)) {
    path=iStorageMode + ":" + iDbName;
  }
 else   throw new IllegalArgumentException("Can't create database: storage mode '" + iStorageMode + "' is not supported.");
  return new ODatabaseDocumentTx(path);
}
