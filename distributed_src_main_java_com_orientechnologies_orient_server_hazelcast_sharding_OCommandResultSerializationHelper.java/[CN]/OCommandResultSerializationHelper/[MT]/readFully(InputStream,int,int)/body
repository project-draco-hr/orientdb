{
  if (len < 0)   throw new IndexOutOfBoundsException();
  final byte[] bytes=new byte[len];
  int n=0;
  while (n < len) {
    int count=stream.read(bytes,off + n,len - n);
    if (count < 0) {
      throw new EOFException();
    }
    n+=count;
  }
  return bytes;
}
