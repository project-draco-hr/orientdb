{
  connection.data.driverName=channel.readString();
  connection.data.driverVersion=channel.readString();
  connection.data.protocolVersion=channel.readShort();
  connection.data.clientId=channel.readString();
  if (connection.data.protocolVersion > OChannelBinaryProtocol.PROTOCOL_VERSION_21)   connection.data.serializationImpl=channel.readString();
 else   connection.data.serializationImpl=ORecordSerializerSchemaAware2CSV.NAME;
  if (tokenBased == null) {
    if (connection.data.protocolVersion > OChannelBinaryProtocol.PROTOCOL_VERSION_26)     tokenBased=channel.readBoolean();
 else     tokenBased=false;
  }
 else {
    if (connection.data.protocolVersion > OChannelBinaryProtocol.PROTOCOL_VERSION_26)     if (channel.readBoolean() != tokenBased) {
      throw new OException("Not supported mixed connection managment");
    }
  }
  if (tokenBased && tokenHandler == null) {
    throw new OException("The server doesn't support the token based authentication");
  }
}
