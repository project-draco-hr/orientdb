{
  final ODatabaseRecord database=getDatabase();
  database.checkSecurity(ODatabaseSecurityResources.COMMAND,ORole.PERMISSION_READ);
  OCommandRequestText textRequest=(OCommandRequestText)iRequest;
  init(textRequest.getText());
  if (iRequest instanceof OSQLSynchQuery) {
    request=(OSQLSynchQuery<ORecordSchemaAware<?>>)iRequest;
  }
 else   if (iRequest instanceof OSQLAsynchQuery)   request=(OSQLAsynchQuery<ORecordSchemaAware<?>>)iRequest;
 else {
    request=new OSQLSynchQuery<ORecordSchemaAware<?>>(textRequest.getText());
    if (textRequest.getResultListener() != null)     request.setResultListener(textRequest.getResultListener());
  }
  return this;
}
