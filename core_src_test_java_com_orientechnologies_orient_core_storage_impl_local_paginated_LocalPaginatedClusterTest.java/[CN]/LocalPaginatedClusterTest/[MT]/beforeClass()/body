{
  paginatedCluster=new OPaginatedCluster();
  System.out.println("Start LocalPaginatedClusterTest");
  buildDirectory=System.getProperty("buildDirectory");
  if (buildDirectory == null || buildDirectory.isEmpty())   buildDirectory=".";
  buildDirectory+="/localPaginatedClusterTest";
  OLocalPaginatedStorage storage=mock(OLocalPaginatedStorage.class);
  OStorageConfiguration storageConfiguration=mock(OStorageConfiguration.class);
  storageConfiguration.clusters=new ArrayList<OStorageClusterConfiguration>();
  storageConfiguration.fileTemplate=new OStorageSegmentConfiguration();
  storageConfiguration.binaryFormatVersion=Integer.MAX_VALUE;
  when(storage.getComponentsFactory()).thenReturn(new OCurrentStorageComponentsFactory(storageConfiguration));
  when(storageConfiguration.getDirectory()).thenReturn(buildDirectory);
  when(storageConfiguration.getContextConfiguration()).thenReturn(contextConfiguration);
  when(storage.getStoragePath()).thenReturn(buildDirectory);
  OStorageVariableParser variableParser=new OStorageVariableParser(buildDirectory);
  when(storage.getVariableParser()).thenReturn(variableParser);
  diskCache=new OReadWriteDiskCache(400L * 1024 * 1024* 1024,2648L * 1024 * 1024,OGlobalConfiguration.DISK_CACHE_PAGE_SIZE.getValueAsInteger() * 1024,1000000,100,storage,null,false,false);
  atomicOperationsManager=new OAtomicOperationsManager(storage);
  when(storage.getDiskCache()).thenReturn(diskCache);
  when(storage.getAtomicOperationsManager()).thenReturn(atomicOperationsManager);
  when(storage.getConfiguration()).thenReturn(storageConfiguration);
  when(storage.getMode()).thenReturn("rw");
  when(storageConfiguration.getDirectory()).thenReturn(buildDirectory);
  paginatedCluster.configure(storage,5,"paginatedClusterTest",buildDirectory,-1);
  paginatedCluster.create(-1);
}
