{
  scriptEngineManager=new ScriptEngineManager();
  registerSharedEngine(OSQLScriptEngine.NAME,new OSQLScriptEngineFactory().getScriptEngine());
  for (  ScriptEngineFactory f : scriptEngineManager.getEngineFactories()) {
    if (f.getParameter("THREADING") != null)     registerSharedEngine(f.getLanguageName().toLowerCase(),f.getScriptEngine());
 else     registerEngine(f.getLanguageName().toLowerCase(),f);
    if (defaultLanguage == null)     defaultLanguage=f.getLanguageName();
  }
  if (!existsEngine(DEF_LANGUAGE)) {
    registerEngine(DEF_LANGUAGE,scriptEngineManager.getEngineByName(DEF_LANGUAGE).getFactory());
    defaultLanguage=DEF_LANGUAGE;
  }
  registerFormatter(OSQLScriptEngine.NAME,new OSQLScriptFormatter());
  registerFormatter(DEF_LANGUAGE,new OJSScriptFormatter());
  registerFormatter("ruby",new ORubyScriptFormatter());
}
