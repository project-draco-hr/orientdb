{
  boolean checkData=true;
  OClass userClass=database.getMetadata().getSchema().getClass("OUser");
  if (userClass == null) {
    userClass=database.getMetadata().getSchema().createClass("OUser",identityClass);
    checkData=false;
  }
 else   if (!userClass.getSuperClasses().contains(identityClass))   userClass.setSuperClasses(Arrays.asList(identityClass));
  if (!userClass.existsProperty("name")) {
    ((OClassImpl)userClass).createProperty("name",OType.STRING,(OType)null,checkData).setMandatory(true).setNotNull(true).setCollate("ci");
    userClass.createIndex("OUser.name",INDEX_TYPE.UNIQUE,ONullOutputListener.INSTANCE,"name");
  }
 else {
    final OProperty name=userClass.getProperty("name");
    if (name.getAllIndexes().isEmpty())     userClass.createIndex("OUser.name",INDEX_TYPE.UNIQUE,ONullOutputListener.INSTANCE,"name");
  }
  if (!userClass.existsProperty("password"))   ((OClassImpl)userClass).createProperty("password",OType.STRING,(OType)null,checkData).setMandatory(true).setNotNull(true);
  if (!userClass.existsProperty("roles"))   ((OClassImpl)userClass).createProperty("roles",OType.LINKSET,roleClass,checkData);
  if (!userClass.existsProperty("status"))   ((OClassImpl)userClass).createProperty("status",OType.STRING,(OType)null,checkData).setMandatory(true).setNotNull(true);
}
