{
  if (!enabled)   return;
  acquireExclusiveLock();
  try {
    for (    ORecordInternal<?> record : iValues) {
      if (record == null || record.isDirty() || record.getIdentity().isNew())       continue;
      if (record.isPinned()) {
        final ORecordInternal<?> prevEntry=entries.get(record.getIdentity());
        if (prevEntry != null && prevEntry.getVersion() >= record.getVersion())         continue;
        record.detach();
        entries.put(record.getIdentity(),record);
      }
 else       entries.remove(record.getIdentity());
    }
  }
  finally {
    releaseExclusiveLock();
  }
}
