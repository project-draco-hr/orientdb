{
  final Map<String,ODocument> linked=(Map<String,ODocument>)fieldValue;
  iContext.onBeforeMap(iRootRecord,fieldName,iUserObject);
  for (  String key : (linked).keySet()) {
    ODocument d=linked.get(key);
    if (d != null) {
      final Integer fieldDepthLevel=parsedRecords.get(d.getIdentity());
      if (!d.getIdentity().isValid() || (fieldDepthLevel != null && fieldDepthLevel.intValue() == iLevelFromRoot)) {
        removeParsedFromMap(parsedRecords,d);
        iContext.onBeforeDocument(iRootRecord,d,key,iUserObject);
        final Object userObject=iListener.fetchLinkedMapEntry(iRootRecord,iUserObject,fieldName,key,d,iContext);
        processRecord(d,userObject,iFetchPlan,iCurrentLevel,iLevelFromRoot,iFieldDepthLevel,parsedRecords,iFieldPathFromRoot,iListener,iContext);
        iContext.onAfterDocument(iRootRecord,d,key,iUserObject);
      }
 else {
        iListener.parseLinkedCollectionValue(iRootRecord,d,iUserObject,key,iContext);
      }
    }
  }
  iContext.onAfterMap(iRootRecord,fieldName,iUserObject);
}
