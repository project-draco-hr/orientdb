{
  int mapSize=map.size();
  if (getTreeSize() == 0 && mapSize != 0 && map instanceof SortedMap) {
    Comparator<?> c=((SortedMap<? extends K,? extends V>)map).comparator();
    if (c == comparator || (c != null && c.equals(comparator))) {
      ++modCount;
      try {
        buildFromSorted(mapSize,map.entrySet().iterator(),null,null);
      }
 catch (      java.io.IOException cannotHappen) {
      }
catch (      ClassNotFoundException cannotHappen) {
      }
      return;
    }
  }
  super.putAll(map);
}
