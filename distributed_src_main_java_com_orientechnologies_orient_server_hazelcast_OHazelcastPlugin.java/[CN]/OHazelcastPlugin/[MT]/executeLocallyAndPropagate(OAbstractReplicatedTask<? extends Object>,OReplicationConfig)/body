{
  OAbstractReplicatedTask<? extends Object> taskToPropagate=iTask;
  Object localResult=null;
  final ORef<Long> journalOffset=new ORef<Long>();
  try {
    localResult=enqueueLocalExecution(iTask,journalOffset);
  }
 catch (  Exception e) {
    updateJournal(iTask,iTask.getDatabaseSynchronizer(),journalOffset.value,false);
    taskToPropagate=new ONoOperationTask(iTask);
    throw e;
  }
 finally {
    final Map<String,Object> remoteResults=replicate(taskToPropagate,iReplicationData);
    updateJournal(iTask,iTask.getDatabaseSynchronizer(),journalOffset.value,true);
    checkForConflicts(taskToPropagate,localResult,remoteResults,iReplicationData.minSuccessfulOperations);
  }
  return localResult;
}
