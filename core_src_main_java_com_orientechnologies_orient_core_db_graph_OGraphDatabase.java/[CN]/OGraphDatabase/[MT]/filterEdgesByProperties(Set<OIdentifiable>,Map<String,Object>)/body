{
  acquireReadLock(null);
  try {
    if (iProperties == null)     if (iEdges != null)     return Collections.unmodifiableSet(iEdges);
 else     return Collections.emptySet();
    final OMVRBTreeRIDSet result;
    result=new OMVRBTreeRIDSet();
    if (iEdges != null)     for (    OIdentifiable item : iEdges) {
      final ODocument doc=(ODocument)item;
      for (      Entry<String,Object> prop : iProperties.entrySet()) {
        if (prop.getKey() != null && doc.containsField(prop.getKey())) {
          if (prop.getValue() == null) {
            if (doc.field(prop.getKey()) == null)             result.add(item);
          }
 else           if (prop.getValue().equals(doc.field(prop.getKey())))           result.add(item);
        }
      }
    }
    return result;
  }
  finally {
    releaseReadLock(null);
  }
}
