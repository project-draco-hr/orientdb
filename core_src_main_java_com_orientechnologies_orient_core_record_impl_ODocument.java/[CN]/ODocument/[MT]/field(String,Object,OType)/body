{
  checkForLoading();
  checkForFields();
  final boolean knownProperty=_fieldValues.containsKey(iPropertyName);
  final Object oldValue=_fieldValues.get(iPropertyName);
  if (knownProperty)   if (iPropertyValue == null) {
    if (oldValue == null)     return this;
  }
 else {
    try {
      if (iPropertyValue == oldValue)       return this;
    }
 catch (    Exception e) {
      OLogManager.instance().warn(this,"Error on checking the value of property %s against the record %s",e,iPropertyName,getIdentity());
    }
  }
  if (_clazz != null) {
    OProperty prop=_clazz.getProperty(iPropertyName);
    if (prop != null) {
      if (iPropertyValue instanceof Enum)       if (prop.getType().isAssignableFrom(1))       iPropertyValue=((Enum<?>)iPropertyValue).ordinal();
 else       iPropertyValue=((Enum<?>)iPropertyValue).name();
      if (!(iPropertyValue instanceof String) && !prop.getType().isAssignableFrom(iPropertyValue))       throw new IllegalArgumentException("Property '" + iPropertyName + "' of type '"+ prop.getType()+ "' can't accept value of type: "+ iPropertyValue.getClass());
    }
  }
  if (_status != STATUS.UNMARSHALLING) {
    setDirty();
    if (knownProperty && _trackingChanges) {
      if (_fieldOriginalValues == null)       _fieldOriginalValues=new HashMap<String,Object>();
      _fieldOriginalValues.put(iPropertyName,oldValue);
    }
  }
  if (oldValue != null) {
    if (oldValue instanceof ORecord<?> && iPropertyValue instanceof String)     iPropertyValue=new ORecordId((String)iPropertyValue);
 else     if (oldValue instanceof Collection<?> && iPropertyValue instanceof String) {
      final List<ODocument> newValue=new ArrayList<ODocument>();
      iPropertyValue=newValue;
      final String stringValue=(String)iPropertyValue;
      if (stringValue != null && stringValue.length() > 0) {
        final String[] items=stringValue.split(",");
        for (        String s : items) {
          newValue.add(new ODocument(_database,new ORecordId(s)));
        }
      }
    }
 else     if (iPropertyValue instanceof Enum) {
      if (oldValue instanceof Number)       iPropertyValue=((Enum<?>)iPropertyValue).ordinal();
 else       iPropertyValue=iPropertyValue.toString();
    }
  }
 else {
    if (iPropertyValue instanceof Enum)     iPropertyValue=iPropertyValue.toString();
  }
  _fieldValues.put(iPropertyName,iPropertyValue);
  setFieldType(iPropertyName,iType);
  return this;
}
