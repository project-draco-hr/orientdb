{
  if (iDatabase == null)   throw new IllegalArgumentException("Database is null");
  logger.setDatabase(iDatabase.databaseName);
synchronized (this) {
    if (!iDatabase.isOnline())     throw new IllegalArgumentException("Database '" + iDatabase.databaseName + "' is not replicated");
    logger.log(this,Level.WARNING,TYPE.REPLICATION,DIRECTION.OUT,"starting alignment against distributed node");
    try {
      databases.put(iDatabase.databaseName,iDatabase);
      if (iDatabase.connection == null)       iDatabase.connection=new ONodeConnection(replicator,id,replicator.getConflictResolver());
      iDatabase.setSynchronizing();
      iDatabase.connection.align(iDatabase.databaseName,iOptions);
      iDatabase.setOnline();
    }
 catch (    Exception e) {
      removeDatabase(iDatabase.databaseName);
      logger.log(this,Level.WARNING,TYPE.REPLICATION,DIRECTION.NONE,"cannot find database on remote server. Removing it from shared list",e);
    }
  }
}
