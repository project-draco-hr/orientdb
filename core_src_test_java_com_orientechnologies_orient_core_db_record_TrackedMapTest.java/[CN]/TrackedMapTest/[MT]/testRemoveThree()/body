{
  final ODocument doc=new ODocument();
  final OTrackedMap<String> map=new OTrackedMap<String>(doc);
  map.put("key1","value1");
  doc.unsetDirty();
  Assert.assertFalse(doc.isDirty());
  map.setInternalStatus(ORecordElement.STATUS.UNMARSHALLING);
  final ORef<Boolean> changed=new ORef<Boolean>(false);
  map.addChangeListener(new OMultiValueChangeListener<Object,String>(){
    public void onAfterRecordChanged(    final OMultiValueChangeEvent<Object,String> event){
      changed.value=true;
    }
  }
);
  map.remove("key1");
  Assert.assertFalse(changed.value);
  Assert.assertFalse(doc.isDirty());
}
