{
  if (txEntry.type == ORecordOperation.LOADED)   return;
  byte[] stream=null;
  try {
switch (txEntry.type) {
case ORecordOperation.CREATED:
case ORecordOperation.UPDATED:
      stream=txEntry.getRecord().toStream();
    break;
}
}
 catch (Exception e) {
iNetwork.writeByte((byte)-1);
throw new OTransactionException("Error on transaction commit",e);
}
iNetwork.writeByte((byte)1);
iNetwork.writeByte(txEntry.type);
iNetwork.writeRID(txEntry.getRecord().getIdentity());
iNetwork.writeByte(txEntry.getRecord().getRecordType());
switch (txEntry.type) {
case ORecordOperation.CREATED:
iNetwork.writeBytes(stream);
break;
case ORecordOperation.UPDATED:
iNetwork.writeVersion(txEntry.getRecord().getRecordVersion());
iNetwork.writeBytes(stream);
if (iNetwork.getSrvProtocolVersion() >= 22) iNetwork.writeBoolean(txEntry.getRecord().isContentChanged());
break;
case ORecordOperation.DELETED:
iNetwork.writeVersion(txEntry.getRecord().getRecordVersion());
break;
}
}
