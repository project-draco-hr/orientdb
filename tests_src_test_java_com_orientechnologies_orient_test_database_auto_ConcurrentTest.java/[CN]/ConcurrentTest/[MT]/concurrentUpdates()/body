{
  ODatabaseDocumentTx database1=new ODatabaseDocumentTx(url).open("admin","admin");
  ODatabaseDocumentTx database2=new ODatabaseDocumentTx(url).open("admin","admin");
  ODatabaseDocumentTx database3=new ODatabaseDocumentTx(url).open("admin","admin");
  ODocument doc1=database1.newInstance();
  doc1.field("INIT","ok");
  database1.save(doc1);
  ORID rid1=doc1.getIdentity();
  ODocument doc2=database1.newInstance();
  doc2.field("INIT","ok");
  database1.save(doc2);
  ORID rid2=doc2.getIdentity();
  UpdateField vUpdate1=new UpdateField(database1,rid1,rid2,"thread1");
  UpdateField vUpdate2=new UpdateField(database2,rid2,rid1,"thread2");
  UpdateField vUpdate3=new UpdateField(database3,rid2,rid1,"thread3");
  Thread vThread1=new Thread(vUpdate1);
  Thread vThread2=new Thread(vUpdate2);
  Thread vThread3=new Thread(vUpdate3);
  vThread1.start();
  vThread2.start();
  vThread3.start();
  vThread1.join();
  vThread2.join();
  vThread3.join();
  doc1=database1.load(rid1);
  Assert.assertEquals(doc1.field(vUpdate1.threadName),vUpdate1.fieldValue,vUpdate1.threadName);
  Assert.assertEquals(doc1.field(vUpdate2.threadName),vUpdate2.fieldValue,vUpdate2.threadName);
  Assert.assertEquals(doc1.field(vUpdate3.threadName),vUpdate3.fieldValue,vUpdate3.threadName);
  System.out.println("RESULT doc 1:");
  System.out.println(doc1.toJSON());
  doc2=database1.load(rid2);
  Assert.assertEquals(doc2.field(vUpdate1.threadName),vUpdate1.fieldValue,vUpdate1.threadName);
  Assert.assertEquals(doc2.field(vUpdate2.threadName),vUpdate2.fieldValue,vUpdate2.threadName);
  Assert.assertEquals(doc2.field(vUpdate3.threadName),vUpdate3.fieldValue,vUpdate3.threadName);
  System.out.println("RESULT doc 2:");
  System.out.println(doc2.toJSON());
  database1.close();
  database2.close();
}
