{
  return new OLazyRecordIterator(new OLazyIterator<OIdentifiable>(){
{
      if (OSerializationSetThreadLocal.check((ODocument)sourceRecord)) {
        iter=new HashSet<Entry<OIdentifiable,Object>>(ORecordLazySet.super.map.entrySet()).iterator();
      }
 else       iter=ORecordLazySet.super.map.entrySet().iterator();
    }
    private Iterator<Entry<OIdentifiable,Object>> iter;
    @Override public boolean hasNext(){
      return iter.hasNext();
    }
    @Override public OIdentifiable next(){
      Entry<OIdentifiable,Object> entry=iter.next();
      if (entry.getValue() != ENTRY_REMOVAL)       return (OIdentifiable)entry.getValue();
      return entry.getKey();
    }
    @Override public void remove(){
      iter.remove();
    }
    @Override public OIdentifiable update(    OIdentifiable iValue){
      if (iValue != null)       map.put(iValue.getIdentity(),iValue.getRecord());
      return iValue;
    }
  }
,autoConvertToRecord);
}
