{
  System.out.println("Starting test against " + serverInstance.size() + " server nodes...");
  try {
    for (    final ServerRun server : serverInstance) {
      banner("STARTING SERVER -> " + server.getServerId() + "...");
      server.startServer(getDistributedServerConfiguration(server));
      onServerStarting(server);
      if (delayServerStartup > 0)       try {
        Thread.sleep(delayServerStartup * serverInstance.size());
      }
 catch (      InterruptedException e) {
      }
      onServerStarted(server);
    }
    if (delayServerAlign > 0)     try {
      System.out.println("Server started, waiting for synchronization (" + (delayServerAlign * serverInstance.size() / 1000) + "secs)...");
      Thread.sleep(delayServerAlign * serverInstance.size());
    }
 catch (    InterruptedException e) {
    }
    for (    ServerRun server : serverInstance) {
      final ODocument cfg=server.getServerInstance().getDistributedManager().getClusterConfiguration();
      Assert.assertNotNull(cfg);
    }
    OLogManager.instance().flush();
    banner("Executing test...");
    try {
      executeTest();
    }
  finally {
      onAfterExecution();
    }
  }
  finally {
    banner("Test finished");
    OLogManager.instance().flush();
    banner("Shutting down nodes...");
    for (    ServerRun server : serverInstance) {
      System.out.println("Shutting down node " + server.getServerId() + "...");
      server.shutdownServer();
    }
    onTestEnded();
    banner("Shutdown HZ...");
    Hazelcast.shutdownAll();
    banner("Clean server directories...");
    deleteServers();
  }
}
