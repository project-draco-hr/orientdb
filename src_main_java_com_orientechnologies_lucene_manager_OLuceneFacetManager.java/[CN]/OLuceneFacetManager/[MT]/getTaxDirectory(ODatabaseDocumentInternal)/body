{
  Directory dir=null;
  final OAbstractPaginatedStorage storageLocalAbstract=(OAbstractPaginatedStorage)database.getStorage().getUnderlying();
  if (storageLocalAbstract instanceof OLocalPaginatedStorage) {
    String pathname=getIndexFacetPath((OLocalPaginatedStorage)storageLocalAbstract);
    dir=NIOFSDirectory.open(new File(pathname));
  }
 else {
    dir=new RAMDirectory();
  }
  return dir;
}
