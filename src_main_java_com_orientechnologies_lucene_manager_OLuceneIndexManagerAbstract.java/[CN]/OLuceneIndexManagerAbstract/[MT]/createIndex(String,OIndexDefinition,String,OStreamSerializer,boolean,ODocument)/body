{
  this.index=indexDefinition;
  this.indexName=indexName;
  this.serializer=valueSerializer;
  this.automatic=isAutomatic;
  this.clusterIndexName=clusterIndexName;
  try {
    ODatabaseRecord database=getDatabase();
    final OStorageLocalAbstract storageLocalAbstract=(OStorageLocalAbstract)database.getStorage().getUnderlying();
    Directory dir=NIOFSDirectory.open(new File(storageLocalAbstract.getStoragePath() + File.separator + indexName));
    this.index=indexDefinition;
    indexWriter=createIndexWriter(dir,metadata);
    mgrWriter=new TrackingIndexWriter(indexWriter);
    manager=new SearcherManager(indexWriter,true,null);
    nrt=new ControlledRealTimeReopenThread(mgrWriter,manager,60.00,0.1);
    nrt.start();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
}
