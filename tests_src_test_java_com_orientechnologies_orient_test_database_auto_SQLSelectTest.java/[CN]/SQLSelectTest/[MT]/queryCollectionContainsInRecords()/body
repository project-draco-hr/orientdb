{
  database.open("admin","admin");
  record.reset();
  record.setClassName("Animal");
  record.field("name","Cat");
  Collection<ODocument> races=new HashSet<ODocument>();
  races.add(((ODocument)database.newInstance("AnimalRace")).field("name","European"));
  races.add(((ODocument)database.newInstance("AnimalRace")).field("name","Siamese"));
  record.field("races",races);
  record.save();
  List<ODocument> result=database.command(new OSQLSynchQuery<ODocument>("select * from cluster:animal where races contains (name in ['European','Asiatic'])")).execute();
  boolean found=false;
  for (int i=0; i < result.size() && !found; ++i) {
    record=result.get(i);
    Assert.assertTrue(record.getClassName().equalsIgnoreCase("animal"));
    Assert.assertNotNull(record.field("races"));
    races=record.field("races");
    for (    ODocument race : races) {
      if (((String)race.field("name")).equals("European") || ((String)race.field("name")).equals("Asiatic")) {
        found=true;
        break;
      }
    }
  }
  Assert.assertTrue(found);
  result=database.command(new OSQLSynchQuery<ODocument>("select * from cluster:animal where races contains (name in ['Asiatic','European'])")).execute();
  found=false;
  for (int i=0; i < result.size() && !found; ++i) {
    record=result.get(i);
    Assert.assertTrue(record.getClassName().equalsIgnoreCase("animal"));
    Assert.assertNotNull(record.field("races"));
    races=record.field("races");
    for (    ODocument race : races) {
      if (((String)race.field("name")).equals("European") || ((String)race.field("name")).equals("Asiatic")) {
        found=true;
        break;
      }
    }
  }
  Assert.assertTrue(found);
  result=database.command(new OSQLSynchQuery<ODocument>("select * from cluster:animal where races contains (name in ['aaa','bbb'])")).execute();
  Assert.assertEquals(result.size(),0);
  result=database.command(new OSQLSynchQuery<ODocument>("select * from cluster:animal where races containsall (name in ['European','Asiatic'])")).execute();
  Assert.assertEquals(result.size(),0);
  result=database.command(new OSQLSynchQuery<ODocument>("select * from cluster:animal where races containsall (name in ['European','Siamese'])")).execute();
  Assert.assertEquals(result.size(),1);
  record.delete();
  database.close();
}
