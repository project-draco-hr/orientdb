{
  final int size=capacity * 4 + 4;
  final int ptr=memory.allocate(size);
  if (ptr == ODirectMemory.NULL_POINTER)   throw new IllegalStateException("There is no enough memory to allocate for capacity = " + capacity);
  int pos=4;
  for (int i=0; i < capacity; i++) {
    memory.setInt(ptr,pos,0);
    pos+=4;
  }
  memory.setInt(ptr,0,capacity);
  return ptr;
}
