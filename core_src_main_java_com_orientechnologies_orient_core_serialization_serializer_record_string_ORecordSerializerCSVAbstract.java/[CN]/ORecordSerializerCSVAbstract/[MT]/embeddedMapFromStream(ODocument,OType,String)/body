{
  if (iValue.length() == 0)   return null;
  String value=iValue.substring(1,iValue.length() - 1);
  @SuppressWarnings("rawtypes") final Map map=new ORecordLazyMap(iSourceDocument,ODocument.RECORD_TYPE);
  if (value.length() == 0)   return map;
  final List<String> items=OStringSerializerHelper.smartSplit(value,OStringSerializerHelper.RECORD_SEPARATOR);
  List<String> entry;
  String mapValue;
  Object mapValueObject;
  for (  String item : items) {
    if (item != null && item.length() > 0) {
      entry=OStringSerializerHelper.smartSplit(item,OStringSerializerHelper.ENTRY_SEPARATOR);
      if (entry.size() > 0) {
        mapValue=entry.get(1);
        if (iLinkedType == null) {
          if (mapValue.length() > 0) {
            final char begin=mapValue.charAt(0);
            if (begin == OStringSerializerHelper.PARENTHESIS_BEGIN)             iLinkedType=OType.EMBEDDED;
 else             if (begin == OStringSerializerHelper.LINK)             iLinkedType=OType.LINK;
 else             if (Character.isDigit(begin) || begin == '+' || begin == '-')             iLinkedType=getType(mapValue);
 else             if (begin == '\'' || begin == '"')             iLinkedType=OType.STRING;
 else             if (begin == OStringSerializerHelper.MAP_BEGIN)             iLinkedType=OType.EMBEDDEDMAP;
          }
 else           iLinkedType=OType.EMBEDDED;
        }
        if (iLinkedType == OType.EMBEDDED)         mapValue=mapValue.substring(1,mapValue.length() - 1);
        mapValueObject=fieldTypeFromStream(iSourceDocument,iLinkedType,mapValue);
        if (mapValueObject != null && mapValueObject instanceof ODocument)         ((ODocument)mapValueObject).setOwner(iSourceDocument);
        map.put(fieldTypeFromStream(iSourceDocument,OType.STRING,entry.get(0)),mapValueObject);
      }
    }
  }
  return map;
}
