{
  super(iDatabase);
  clientTxId=iChannel.readInt();
  setUsingLog(iChannel.readByte() == 1);
  while (iChannel.readByte() == 1) {
    try {
      OTransactionEntryProxy entry=new OTransactionEntryProxy();
      final ORecordId rid=(ORecordId)entry.getRecord().getIdentity();
      entry.status=iChannel.readByte();
      rid.clusterId=iChannel.readShort();
      rid.clusterPosition=iChannel.readLong();
      ((OTransactionRecordProxy)entry.getRecord()).setRecordType(iChannel.readByte());
switch (entry.status) {
case OTransactionRecordEntry.CREATED:
        entry.clusterName=iChannel.readString();
      entry.getRecord().fromStream(iChannel.readBytes());
    createdRecords.put(rid.copy(),entry.getRecord());
  break;
case OTransactionRecordEntry.UPDATED:
entry.getRecord().setVersion(iChannel.readInt());
entry.getRecord().fromStream(iChannel.readBytes());
updatedRecords.put(rid,entry.getRecord());
break;
case OTransactionRecordEntry.DELETED:
entry.getRecord().setVersion(iChannel.readInt());
break;
default :
throw new OTransactionException("Unrecognized tx command: " + entry.status);
}
recordEntries.put((ORecordId)entry.getRecord().getIdentity(),entry);
}
 catch (IOException e) {
throw new OSerializationException("Can't read transaction record from the network",e);
}
}
indexEntries=new ODocument(iChannel.readBytes());
}
