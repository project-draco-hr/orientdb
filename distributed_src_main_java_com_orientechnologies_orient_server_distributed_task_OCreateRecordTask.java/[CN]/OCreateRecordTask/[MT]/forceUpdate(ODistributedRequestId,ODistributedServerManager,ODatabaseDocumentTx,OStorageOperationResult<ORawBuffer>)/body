{
  final ORecord loadedRecordInstance=Orient.instance().getRecordFactoryManager().newInstance(loadedRecord.getResult().recordType);
  ORecordInternal.fill(loadedRecordInstance,rid,loadedRecord.getResult().version,loadedRecord.getResult().getBuffer(),false);
  if (Arrays.equals(loadedRecord.getResult().getBuffer(),content))   return loadedRecordInstance;
  ODistributedServerLog.debug(this,iManager.getLocalNodeName(),getNodeSource(),DIRECTION.IN,"Overwriting content of record %s/%s v.%d reqId=%s previous content: %s (stored) vs %s (network)",database.getName(),rid.toString(),version,requestId,loadedRecord.getResult(),getRecord());
  if (loadedRecord.getResult().recordType == ODocument.RECORD_TYPE) {
    final ODocument newDocument=(ODocument)getRecord();
    ODocument loadedDocument=(ODocument)loadedRecordInstance;
    loadedDocument.merge(newDocument,false,false).getVersion();
    loadedDocument.setDirty();
    ORecordInternal.setVersion(loadedDocument,ORecordVersionHelper.setRollbackMode(version));
  }
 else   ORecordInternal.fill(loadedRecordInstance,rid,ORecordVersionHelper.setRollbackMode(version),content,true);
  return loadedRecordInstance.save();
}
