{
  final long memoryThreshold=(long)(maxMemory * 0.75);
  final long startingMemory=totalMemory;
  if (OLogManager.instance().isDebugEnabled())   OLogManager.instance().debug(null,"Freeing off-heap memory as mmmap blocks, target is %s...",OFileUtils.getSizeAsString(startingMemory - memoryThreshold));
  Collections.sort(bufferPoolLRU,new Comparator<OMMapBufferEntry>(){
    public int compare(    final OMMapBufferEntry o1,    final OMMapBufferEntry o2){
      return (int)(o1.getLastUsed() - o2.getLastUsed());
    }
  }
);
  for (Iterator<OMMapBufferEntry> it=bufferPoolLRU.iterator(); it.hasNext(); ) {
    final OMMapBufferEntry entry=it.next();
    if (removeEntry(entry))     it.remove();
    if (totalMemory < memoryThreshold)     break;
  }
  if (OLogManager.instance().isDebugEnabled())   OLogManager.instance().debug(null,"Freed off-heap memory as mmmap blocks for %s...",OFileUtils.getSizeAsString(startingMemory - totalMemory));
}
