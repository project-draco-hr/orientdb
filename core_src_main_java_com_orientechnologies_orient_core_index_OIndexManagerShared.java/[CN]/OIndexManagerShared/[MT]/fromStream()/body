{
  acquireExclusiveLock();
  try {
    final Collection<ODocument> idxs=document.field(CONFIG_INDEXES);
    if (idxs != null) {
      OIndexInternal<?> index;
      boolean configUpdated=false;
      for (      final ODocument d : idxs) {
        try {
          index=OIndexes.createIndex(getDatabase(),(String)d.field(OIndexInternal.CONFIG_TYPE));
          if (((OIndexInternal<?>)index).loadFromConfiguration(d)) {
            addIndexInternal(index);
          }
 else           configUpdated=true;
        }
 catch (        Exception e) {
          OLogManager.instance().error(this,"Error on loading index by configuration: %s",e,d);
        }
      }
      if (configUpdated)       save();
    }
  }
  finally {
    releaseExclusiveLock();
  }
}
