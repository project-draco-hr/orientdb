{
  if (iParent != parent) {
    this.parent=(OMVRBTreeEntryPersistent<K,V>)iParent;
    if (parent != null && !parent.record.getIdentity().equals(parentRid))     markDirty();
    this.parentRid=iParent == null ? ORecordId.EMPTY_RECORD_ID : parent.record.getIdentity();
    if (parent != null) {
      if (parent.left == this && !parent.leftRid.equals(record.getIdentity()))       parent.leftRid=record.getIdentity();
      if (parent.left != this && parent.leftRid.isValid() && parent.leftRid.equals(record.getIdentity()))       parent.left=this;
      if (parent.right == this && !parent.rightRid.equals(record.getIdentity()))       parent.rightRid=record.getIdentity();
      if (parent.right != this && parent.rightRid.isValid() && parent.rightRid.equals(record.getIdentity()))       parent.right=this;
    }
  }
  return iParent;
}
