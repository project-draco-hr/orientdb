{
synchronized (this) {
    databases.remove(iDatabase.databaseName);
    OLogManager.instance().warn(this,"Starting replication for database '%s' against distributed node %s:%d...",iDatabase.databaseName,networkAddress,networkPort);
    try {
      iDatabase.storage=new ODistributedStorage(id + "/" + iDatabase.databaseName,"rw",replicator.getConflictResolver());
      iDatabase.storage.open(iDatabase.userName,iDatabase.userPassword,null);
      iDatabase.sessionId=iDatabase.storage.getSessionId();
      databases.put(iDatabase.databaseName,iDatabase);
    }
 catch (    Exception e) {
      databases.remove(iDatabase.databaseName);
      OLogManager.instance().warn(this,"Database '" + iDatabase.databaseName + "' is not present on remote server. Removing database from shared list.",e);
    }
  }
}
