{
  final Lock lock=manager.getLock(databaseName + ".cfg");
  lock.lock();
  try {
    final ODistributedConfiguration cfg=manager.getDatabaseConfiguration(databaseName);
    final List<String> foundPartition=cfg.addNewNodeInServerList(getLocalNodeName());
    if (foundPartition != null) {
      manager.setDatabaseStatus(getLocalNodeName(),databaseName,ODistributedServerManager.DB_STATUS.ONLINE);
      ODistributedServerLog.info(this,getLocalNodeName(),null,DIRECTION.NONE,"adding node '%s' in partition: db=%s %s",getLocalNodeName(),databaseName,foundPartition);
      manager.updateCachedDatabaseConfiguration(databaseName,cfg.serialize(),true,true);
    }
  }
  finally {
    lock.unlock();
  }
}
