{
  final long time=System.currentTimeMillis();
  OLogManager.instance().info(this,"REPL <%s> synchronization started. Storing delta of updates...",iDatabaseName);
  try {
    ODocument cfg=new ODocument().field("nodes",iDbCfg,OType.EMBEDDEDSET);
    final OChannelBinaryClient network=beginRequest(OClusterProtocol.REQUEST_NODE2NODE_REPLICATION_SYNCHRONIZE);
    try {
      network.writeString(iDatabaseName);
      network.writeBytes(cfg.toStream());
      network.flush();
    }
  finally {
      endRequest();
    }
    OLogManager.instance().info(this,"------------------------------------------------------------------");
    beginResponse();
    try {
      int ops=0;
      final ORecordOperation opLog=new ORecordOperation();
      final int nodes=network.readInt();
      for (int n=0; n < nodes; ++n) {
        final String nodeId=network.readString();
        final int logEntries=network.readInt();
        for (int l=0; l < logEntries; ++l) {
          final byte[] buffer=network.readBytes();
          if (buffer == null)           break;
          opLog.fromStream(buffer);
          ops++;
          OLogManager.instance().info(this,"REPL <%s> (%d) received record %s",iDatabaseName,ops,opLog.record);
          replicator.getOperationLog(nodeId,iDatabaseName).appendLog(opLog.serial,opLog.type,(ORecordId)opLog.record.getIdentity());
        }
      }
      if (OLogManager.instance().isInfoEnabled())       OLogManager.instance().info(this,"REPL <%s> synchronization completed. Received %d operations from remote node (%dms)",iDatabaseName,ops,(System.currentTimeMillis() - time));
    }
  finally {
      endResponse();
    }
  }
 catch (  OException e) {
    throw e;
  }
catch (  Exception e) {
    throw new OIOException("REPL <" + iDatabaseName + "> error on synchronization",e);
  }
}
