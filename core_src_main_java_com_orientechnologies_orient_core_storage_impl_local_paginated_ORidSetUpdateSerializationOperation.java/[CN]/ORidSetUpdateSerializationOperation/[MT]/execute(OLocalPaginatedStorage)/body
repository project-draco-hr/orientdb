{
  OSBTreeBonsai<OIdentifiable,Integer> tree=loadTree();
  try {
    if (clear)     tree.clear();
    for (    Map.Entry<OIdentifiable,OModifiableInteger> entry : changedValues.entrySet()) {
      Integer storedCounter=tree.get(entry.getKey());
      if (storedCounter == null)       storedCounter=0;
      storedCounter+=entry.getValue().intValue();
      if (storedCounter <= 0)       tree.remove(entry.getKey());
 else       tree.put(entry.getKey(),storedCounter);
    }
  }
  finally {
    releaseTree();
  }
}
