{
  final Class<?> selfClass=self.getClass();
  for (  String fieldName : doc.fieldNames()) {
    Object value=getValue(self,fieldName,false,null);
    if (value instanceof OLazyObjectMultivalueElement) {
      ((OLazyObjectMultivalueElement<?>)value).detach(nonProxiedInstance);
      if (nonProxiedInstance)       value=((OLazyObjectMultivalueElement<?>)value).getNonOrientInstance();
    }
    OObjectEntitySerializer.setFieldValue(OObjectEntitySerializer.getField(fieldName,selfClass),self,value);
  }
  OObjectEntitySerializer.setIdField(selfClass,self,doc.getIdentity());
  OObjectEntitySerializer.setVersionField(selfClass,self,doc.getRecordVersion().copy());
}
