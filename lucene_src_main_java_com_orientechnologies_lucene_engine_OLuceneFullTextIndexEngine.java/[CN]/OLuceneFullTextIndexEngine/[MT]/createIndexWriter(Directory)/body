{
  Analyzer analyzer=getAnalyzer(metadata);
  IndexWriterConfig iwc=new IndexWriterConfig(analyzer);
  iwc.setOpenMode(IndexWriterConfig.OpenMode.CREATE_OR_APPEND);
  facetManager=new OLuceneFacetManager(this,metadata);
  OLogManager.instance().debug(this,"Creating Lucene index in '%s'...",directory);
  return new IndexWriter(directory,iwc);
}
