{
  OServerPluginHelper.invokeHandlerCallbackOnAfterClientRequest(server,connection,(byte)requestType);
  if (connection != null) {
    if (!Boolean.TRUE.equals(tokenBased)) {
      if (connection.database != null)       if (!connection.database.isClosed() && connection.database.getLocalCache() != null)       connection.database.getLocalCache().clear();
    }
 else {
      if (connection.database != null && !connection.database.isClosed())       connection.database.close();
      connection.database=null;
    }
    connection.data.lastCommandExecutionTime=System.currentTimeMillis() - connection.data.lastCommandReceived;
    connection.data.totalCommandExecutionTime+=connection.data.lastCommandExecutionTime;
    connection.data.lastCommandInfo=connection.data.commandInfo;
    connection.data.lastCommandDetail=connection.data.commandDetail;
    setDataCommandInfo("Listening");
    connection.data.commandDetail="-";
  }
}
