{
  final Iterable<ODatabaseListener> tmpListeners=getListenersCopy();
  close();
  try {
    if (storage == null)     storage=Orient.instance().loadStorage(url);
    storage.delete();
    storage=null;
    for (    ODatabaseListener listener : tmpListeners)     try {
      listener.onDelete(this);
    }
 catch (    Throwable t) {
    }
    status=STATUS.CLOSED;
    ODatabaseRecordThreadLocal.INSTANCE.set(null);
  }
 catch (  OException e) {
    throw e;
  }
catch (  Exception e) {
    throw new ODatabaseException("Cannot delete database",e);
  }
}
