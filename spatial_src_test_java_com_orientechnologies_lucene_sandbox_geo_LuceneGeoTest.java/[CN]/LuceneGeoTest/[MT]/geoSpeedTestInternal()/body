{
  RecursivePrefixTreeStrategy strategy=new RecursivePrefixTreeStrategy(new GeohashPrefixTree(JtsSpatialContext.GEO,11),"location");
  IndexWriterConfig conf=new IndexWriterConfig(new StandardAnalyzer());
  final RAMDirectory directory=new RAMDirectory();
  final IndexWriter writer=new IndexWriter(directory,conf);
  ODocument entries=loadMultiPolygon();
  OMultiPolygonShapeBuilder builder=new OMultiPolygonShapeBuilder();
  Shape multiPolygon=builder.fromDoc(entries);
  Document doc=new Document();
  for (  IndexableField f : strategy.createIndexableFields(multiPolygon)) {
    doc.add(f);
  }
  writer.addDocument(doc);
  writer.commit();
  writer.close();
}
