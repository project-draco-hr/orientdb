{
  acquireExclusiveLock();
  try {
    databaseName=ODatabaseRecordThreadLocal.INSTANCE.get().getName();
    this.name=name;
    this.type=type;
    this.indexEngine=indexEngine;
    this.algorithm=algorithm;
    this.metadata=metadata;
    this.valueContainerAlgorithm=valueContainerAlgorithm;
    indexEngine.init();
    Orient.instance().registerWeakOrientStartupListener(this);
    Orient.instance().registerWeakOrientShutdownListener(this);
  }
  finally {
    releaseExclusiveLock();
  }
}
