{
  database.getEntityManager().registerEntityClass(CustomClass.class);
  OObjectSerializerContext serializerContext=new OObjectSerializerContext();
  serializerContext.bind(new OObjectSerializer<CustomType,Long>(){
    public Long serializeFieldValue(    Class<?> itype,    CustomType iFieldValue){
      serialized++;
      return iFieldValue.value;
    }
    public CustomType unserializeFieldValue(    Class<?> itype,    Long iFieldValue){
      unserialized++;
      return new CustomType(iFieldValue);
    }
  }
);
  OObjectSerializerHelper.bindSerializerContext(null,serializerContext);
  database.getMetadata().getSchema().createClass("CustomClass");
  List<CustomType> customTypesList=new ArrayList<CustomType>();
  customTypesList.add(new CustomType(102L));
  Set<CustomType> customTypeSet=new HashSet<CustomType>();
  customTypeSet.add(new CustomType(103L));
  Map<Long,CustomType> customTypeMap=new HashMap<Long,CustomType>();
  customTypeMap.put(1L,new CustomType(104L));
  CustomClass pojo=new CustomClass("test",33L,new CustomType(101L),customTypesList,customTypeSet,customTypeMap);
  serialized=0;
  unserialized=0;
  database.save(pojo);
  Assert.assertEquals(serialized,4);
  Assert.assertEquals(unserialized,0);
  database.reload(pojo);
  Assert.assertEquals(serialized,4);
  Assert.assertEquals(unserialized,4);
}
