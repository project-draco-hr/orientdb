{
  if (returnsMatches()) {
    ODocument doc=getDatabase().newInstance();
    for (    Map.Entry<String,OIdentifiable> entry : matchContext.matched.entrySet()) {
      if (isExplicitAlias(entry.getKey())) {
        doc.field(entry.getKey(),entry.getValue());
      }
    }
    Object result=getResult(request);
    if (request.getResultListener() != null) {
      request.getResultListener().result(doc);
    }
  }
 else   if (returnsPaths()) {
    ODocument doc=getDatabase().newInstance();
    for (    Map.Entry<String,OIdentifiable> entry : matchContext.matched.entrySet()) {
      doc.field(entry.getKey(),entry.getValue());
    }
    Object result=getResult(request);
    if (request.getResultListener() != null) {
      request.getResultListener().result(doc);
    }
  }
 else {
    ODocument doc=getDatabase().newInstance();
    for (    OIdentifier alias : returnItems) {
      doc.field(alias.getValue(),matchContext.matched.get(alias.getValue()));
    }
    Object result=getResult(request);
    if (request.getResultListener() != null) {
      request.getResultListener().result(doc);
    }
  }
}
