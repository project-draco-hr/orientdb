{
  final long filePosition=iPosition.clusterPosition * RECORD_SIZE;
  acquireSharedLock();
  try {
    final long[] pos=fileSegment.getRelativePosition(filePosition);
    final OFile f=fileSegment.files[(int)pos[0]];
    long p=pos[1];
    f.writeShort(p,(short)iPosition.dataSegmentId);
    f.writeLong(p+=OBinaryProtocol.SIZE_SHORT,iPosition.dataSegmentPos);
    f.writeByte(p+=OBinaryProtocol.SIZE_LONG,iPosition.recordType);
    f.writeInt(p+=OBinaryProtocol.SIZE_BYTE,iPosition.recordVersion);
  }
  finally {
    releaseSharedLock();
  }
}
