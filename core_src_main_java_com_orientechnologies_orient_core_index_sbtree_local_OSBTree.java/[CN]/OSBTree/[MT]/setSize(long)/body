{
  OAtomicOperation atomicOperation=storage.getAtomicOperationsManager().getCurrentOperation();
  OCacheEntry rootCacheEntry=diskCache.load(fileId,ROOT_INDEX,false);
  rootCacheEntry.acquireExclusiveLock();
  try {
    OSBTreeBucket<K,V> rootBucket=new OSBTreeBucket<K,V>(rootCacheEntry,keySerializer,keyTypes,valueSerializer,getChangesTree(atomicOperation,rootCacheEntry));
    rootBucket.setTreeSize(size);
    rootCacheEntry.markDirty();
  }
  finally {
    rootCacheEntry.releaseExclusiveLock();
    diskCache.release(rootCacheEntry);
  }
}
