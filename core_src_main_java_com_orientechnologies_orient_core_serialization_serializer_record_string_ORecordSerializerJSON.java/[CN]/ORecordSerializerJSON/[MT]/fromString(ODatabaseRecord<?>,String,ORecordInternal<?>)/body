{
  iSource=iSource.trim();
  if (!iSource.startsWith("{") || !iSource.endsWith("}"))   throw new OSerializationException("Error on unmarshalling JSON content: content must be embraced by { }");
  if (iRecord != null)   iRecord.setDirty();
  iSource=iSource.substring(1,iSource.length() - 1).trim();
  String[] fields=OStringParser.getWords(iSource,":,");
  try {
    if (fields != null && fields.length > 0) {
      String fieldName;
      String fieldValue;
      for (int i=0; i < fields.length; i+=2) {
        fieldName=fields[i];
        fieldValue=fields[i + 1];
        if (fieldName.equals(ATTRIBUTE_ID))         iRecord.setIdentity(new ORecordId(fieldValue));
 else         if (fieldName.equals(ATTRIBUTE_VERSION))         iRecord.setVersion(Integer.parseInt(fieldValue));
 else         if (fieldName.equals(ATTRIBUTE_TYPE)) {
          if (iRecord == null || iRecord.getRecordType() != fieldValue.charAt(0)) {
            iRecord=ORecordFactory.newInstance((byte)fieldValue.charAt(0));
            iRecord.setDatabase(iDatabase);
          }
        }
 else         if (fieldName.equals(ATTRIBUTE_CLASS) && iRecord instanceof ODocument)         ((ODocument)iRecord).setClassName("null".equals(fieldValue) ? null : fieldValue);
 else         if (fieldName.equals("value")) {
          if (iRecord instanceof ORecordColumn) {
            fieldValue=fieldValue.trim();
            if (!fieldValue.startsWith("[") || !fieldValue.endsWith("]"))             throw new OSerializationException("Error on unmarshalling JSON content: value must be embraced by [ ]");
            fieldValue=fieldValue.substring(1,fieldValue.length() - 1).trim();
            String[] items=OStringParser.getWords(fieldValue,",");
            for (            String item : items) {
              ((ORecordColumn)iRecord).add(item);
            }
          }
 else           if (iRecord instanceof ORecordBytes) {
            iRecord.fromStream(OBase64Utils.decode(OStringSerializerHelper.decode(fieldValue)));
          }
 else           if (iRecord instanceof ORecordStringable) {
            ((ORecordStringable)iRecord).value(fieldValue);
          }
        }
 else {
          if (iRecord instanceof ODocument)           ((ODocument)iRecord).field(fieldName,extractFieldValue((ODocument)iRecord,fieldName,fieldValue));
        }
      }
    }
  }
 catch (  Exception e) {
    throw new OSerializationException("Error on unmarshalling JSON content",e);
  }
  return iRecord;
}
