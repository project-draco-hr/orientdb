{
  final String[] parts=checkSyntax(iRequest.url,3,"Syntax error: function/<database>/<name>[/param]*");
  iRequest.data.commandInfo="Execute a function";
  ODatabaseDocumentTx db=null;
  Object result=null;
  try {
    db=getProfiledDatabaseInstance(iRequest);
    final OFunction f=db.getMetadata().getFunctionManager().getFunction(parts[2]);
    final Object[] args=new Object[parts.length - 3];
    for (int i=3; i < parts.length; ++i)     args[i - 3]=parts[i];
    result=f.execute(args);
  }
  finally {
    if (db != null)     OSharedDocumentDatabase.release(db);
  }
  if (result != null) {
    if (result instanceof ODocument && ((ODocument)result).isEmbedded()) {
      sendTextContent(iRequest,OHttpUtils.STATUS_OK_CODE,OHttpUtils.STATUS_OK_DESCRIPTION,null,OHttpUtils.CONTENT_JSON,((ODocument)result).toJSON(),true,null);
    }
 else     sendTextContent(iRequest,OHttpUtils.STATUS_OK_CODE,OHttpUtils.STATUS_OK_DESCRIPTION,null,OHttpUtils.CONTENT_TEXT_PLAIN,result,true,null);
  }
 else   sendTextContent(iRequest,OHttpUtils.STATUS_OK_NOCONTENT_CODE,"",null,OHttpUtils.CONTENT_TEXT_PLAIN,null,true,null);
  return false;
}
