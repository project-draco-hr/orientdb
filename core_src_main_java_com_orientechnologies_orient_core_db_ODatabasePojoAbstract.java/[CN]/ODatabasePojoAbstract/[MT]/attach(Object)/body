{
  checkOpeness();
  final ODocument record=objects2Records.get(System.identityHashCode(iPojo));
  if (record != null)   return;
  if (OObjectSerializerHelper.hasObjectID(iPojo)) {
    for (    Field field : iPojo.getClass().getDeclaredFields()) {
      Object value=OObjectSerializerHelper.getFieldValue(iPojo,field.getName());
      if (value instanceof OLazyObjectMap<?>) {
        ((OLazyObjectMap)value).assignDatabase(this);
      }
 else       if (value instanceof OLazyObjectList<?>) {
        ((OLazyObjectList)value).assignDatabase(this);
      }
 else       if (value instanceof OLazyObjectSet<?>) {
        ((OLazyObjectList)value).assignDatabase(this);
      }
    }
  }
 else {
    throw new OObjectNotDetachedException("Cannot attach a non detached object");
  }
}
