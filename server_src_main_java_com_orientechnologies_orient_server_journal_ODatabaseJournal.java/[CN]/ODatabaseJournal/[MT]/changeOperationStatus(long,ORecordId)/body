{
  lock.acquireExclusiveLock();
  try {
    final int varSize=file.readInt(iOffsetEndOperation - OFFSET_BACK_SIZE);
    final long offset=iOffsetEndOperation - OFFSET_BACK_SIZE - varSize- OFFSET_VARDATA;
    OLogManager.instance().warn(this,"Updating status operation #%d.%d rid %s",file.readLong(iOffsetEndOperation - OFFSET_BACK_RUNID),file.readLong(iOffsetEndOperation - OFFSET_BACK_OPERATID),iRid);
    file.write(offset + OFFSET_STATUS,new byte[]{1});
    if (iRid != null)     file.writeLong(offset + OFFSET_VARDATA + OBinaryProtocol.SIZE_SHORT,iRid.clusterPosition);
    file.synch();
  }
  finally {
    lock.releaseExclusiveLock();
  }
}
