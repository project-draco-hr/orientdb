{
  if (iLockType == LOCK.SHARED) {
    final Object sharedLock=sharedLocks.get(iResourceId);
    if (sharedLock == null)     throw new OLockException("Error on releasing a non acquired SHARED lock by the requester " + iRequester + " on resource: "+ iResourceId);
    downsizeSharedLock(iResourceId,sharedLock);
  }
 else {
    final REQUESTER_TYPE exclusiveLock=exclusiveLocks.remove(iResourceId);
    if (exclusiveLock == null)     throw new OLockException("Error on releasing a non acquired EXCLUSIVE lock by the requester " + iRequester + " on resource: "+ iResourceId);
  }
  lockQueue.wakeupWaiters(iResourceId);
}
