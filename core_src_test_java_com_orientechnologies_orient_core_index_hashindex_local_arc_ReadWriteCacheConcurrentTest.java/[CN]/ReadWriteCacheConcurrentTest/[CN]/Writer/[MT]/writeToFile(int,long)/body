{
  OStoragePerformanceStatistic storagePerformanceStatistic=new OStoragePerformanceStatistic(OGlobalConfiguration.DISK_CACHE_PAGE_SIZE.getValueAsInteger() * 1024,"test",1);
  OCacheEntry cacheEntry=readBuffer.load(fileIds.get(fileNumber),pageIndex,false,writeBuffer,1,storagePerformanceStatistic);
  if (cacheEntry == null) {
    do {
      if (cacheEntry != null)       readBuffer.release(cacheEntry,writeBuffer,storagePerformanceStatistic);
      cacheEntry=readBuffer.allocateNewPage(fileIds.get(fileNumber),writeBuffer,storagePerformanceStatistic);
    }
 while (cacheEntry.getPageIndex() < pageIndex);
  }
  if (cacheEntry.getPageIndex() > pageIndex) {
    readBuffer.release(cacheEntry,writeBuffer,storagePerformanceStatistic);
    cacheEntry=readBuffer.load(fileIds.get(fileNumber),pageIndex,false,writeBuffer,1,storagePerformanceStatistic);
  }
  OCachePointer pointer=cacheEntry.getCachePointer();
  pointer.acquireExclusiveLock();
  final ByteBuffer buffer=pointer.getBuffer();
  buffer.position(systemOffset);
  buffer.put(new byte[]{version.byteValue(),2,3,seed,5,6,(byte)fileNumber,(byte)(pageIndex & 0xFF)});
  cacheEntry.markDirty();
  pointer.releaseExclusiveLock();
  readBuffer.release(cacheEntry,writeBuffer,storagePerformanceStatistic);
}
