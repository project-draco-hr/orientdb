{
synchronized (syncObject) {
    if (commitDelay > 0 && !commitExecutor.isShutdown()) {
      commitExecutor.shutdown();
      try {
        commitExecutor.awaitTermination(commitDelay * 100,TimeUnit.MILLISECONDS);
      }
 catch (      InterruptedException e) {
        OLogManager.instance().error(this,"Can not shutdown background WAL commit thread.");
      }
    }
    for (    LogSegment logSegment : logSegments)     logSegment.close();
    masterRecordLSNHolder.close();
  }
}
