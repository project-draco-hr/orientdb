{
  if (iName == null)   throw new IllegalArgumentException("Storage path is null");
  final String name=iName.indexOf(':') > -1 ? iName.substring(iName.indexOf(':') + 1) : iName;
  final String dbName=Orient.isRegisterDatabaseByPath() ? getDatabaseDirectory() + name : name;
  final String dbPath=Orient.isRegisterDatabaseByPath() ? dbName : getDatabaseDirectory() + name;
  final OStorage stg=Orient.instance().getStorage(dbName);
  if (stg != null)   return stg.getURL();
  String dbURL=configuration.getStoragePath(name);
  if (dbURL == null) {
    if (new File(OIOUtils.getPathFromDatabaseName(dbPath) + "/default.odh").exists())     dbURL="local:" + dbPath;
 else     if (new File(OIOUtils.getPathFromDatabaseName(dbPath) + "/default.pcl").exists())     dbURL="plocal:" + dbPath;
 else     throw new OConfigurationException("Database '" + name + "' ("+ dbName+ ") is not configured on server");
  }
  return dbURL;
}
