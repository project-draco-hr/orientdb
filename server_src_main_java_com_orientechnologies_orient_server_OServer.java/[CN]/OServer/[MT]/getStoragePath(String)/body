{
  String name=iName.indexOf(':') > -1 ? iName.substring(iName.indexOf(':') + 1) : iName;
  int pos=name.lastIndexOf('/');
  if (pos > -1)   name=name.substring(pos + 1);
  final OStorage stg=Orient.instance().getStorage(name);
  if (stg != null)   return stg.getURL();
  String dbPath=configuration.getStoragePath(name);
  if (dbPath == null) {
    dbPath=OSystemVariableResolver.resolveSystemVariables("${" + Orient.ORIENTDB_HOME + "}/databases/"+ name+ "/");
    File f=new File(dbPath + "default.odh");
    if (!f.exists())     throw new OConfigurationException("Database '" + name + "' is not configured on server");
    dbPath="local:${" + Orient.ORIENTDB_HOME + "}/databases/"+ name;
  }
  return dbPath;
}
