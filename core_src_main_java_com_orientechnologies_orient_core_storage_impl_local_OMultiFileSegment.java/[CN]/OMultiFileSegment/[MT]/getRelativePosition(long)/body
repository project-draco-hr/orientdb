{
  readWriteLock.readLock().lock();
  try {
    if (iPosition < fileMaxSize)     return new long[]{0l,iPosition};
    final int fileNum=(int)(iPosition / fileMaxSize);
    if (fileNum >= files.length && fileNum < 0)     throw new ODatabaseException("Record position #" + iPosition + " was bound to file #"+ fileNum+ " that is out of limit (files range 0-"+ (files.length - 1)+ ")");
    final int fileRec=(int)(iPosition % fileMaxSize);
    if (fileNum >= files.length)     throw new ODatabaseException("Record position #" + iPosition + " was bound to file #"+ fileNum+ " but configured files are only "+ files.length);
    if (fileRec >= files[fileNum].getFilledUpTo() && fileRec < 0)     throw new ODatabaseException("Record position #" + iPosition + " was bound to file #"+ fileNum+ " but the position #"+ fileRec+ " is out of file size "+ files[fileNum].getFilledUpTo());
    return new long[]{fileNum,fileRec};
  }
  finally {
    readWriteLock.readLock().unlock();
  }
}
