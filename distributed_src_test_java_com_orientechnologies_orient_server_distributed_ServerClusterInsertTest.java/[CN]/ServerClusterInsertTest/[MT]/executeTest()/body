{
  System.out.println("Creating Writers and Readers threads...");
  final ExecutorService writerExecutor=Executors.newCachedThreadPool();
  final ExecutorService readerExecutor=Executors.newCachedThreadPool();
  for (  ServerRun server : serverInstance) {
    Writer writer=new Writer(getDatabaseURL(server));
    writerExecutor.submit(writer);
    Reader reader=new Reader(getDatabaseURL(server));
    readerExecutor.submit(reader);
  }
  System.out.println("Threads started, waiting for the end");
  writerExecutor.shutdown();
  Assert.assertTrue(writerExecutor.awaitTermination(3,TimeUnit.MINUTES));
  System.out.println("Writer threads finished, shutting down Reader threads...");
  readerExecutor.shutdownNow();
  Assert.assertTrue(readerExecutor.awaitTermination(10,TimeUnit.SECONDS));
  System.out.println("All threads have finished, shutting down server instances");
  for (  ServerRun server : serverInstance) {
    printStats(getDatabaseURL(server));
  }
}
