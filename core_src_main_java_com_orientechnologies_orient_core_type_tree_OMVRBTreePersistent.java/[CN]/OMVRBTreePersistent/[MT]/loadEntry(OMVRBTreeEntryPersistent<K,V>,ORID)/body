{
  OMVRBTreeEntryPersistent<K,V> entry=searchNodeInCache(iRecordId);
  if (entry == null) {
    entry=createEntry(iParent,iRecordId);
    addNodeInCache(entry);
    if (entry.parent == null && entry.dataProvider.getParent().isValid()) {
      final OMVRBTreeEntryPersistent<K,V> parentNode=searchNodeInCache(entry.dataProvider.getParent());
      if (parentNode != null)       entry.setParent(parentNode);
    }
    if (entry.left == null && entry.dataProvider.getLeft().isValid()) {
      final OMVRBTreeEntryPersistent<K,V> leftNode=searchNodeInCache(entry.dataProvider.getLeft());
      if (leftNode != null)       entry.setLeft(leftNode);
    }
    if (entry.right == null && entry.dataProvider.getRight().isValid()) {
      final OMVRBTreeEntryPersistent<K,V> rightNode=searchNodeInCache(entry.dataProvider.getRight());
      if (rightNode != null)       entry.setRight(rightNode);
    }
  }
 else {
    if (iParent != null)     entry.setParent(iParent);
  }
  entry.checkEntryStructure();
  return entry;
}
