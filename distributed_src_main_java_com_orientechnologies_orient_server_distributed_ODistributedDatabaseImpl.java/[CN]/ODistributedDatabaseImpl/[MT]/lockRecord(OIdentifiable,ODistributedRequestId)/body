{
  final ODistributedRequestId oldReqId=lockManager.putIfAbsent(iRecord.getIdentity(),iRequestId);
  final boolean locked=oldReqId == null;
  if (!locked) {
    if (iRequestId.equals(oldReqId)) {
      ODistributedServerLog.info(this,getLocalNodeName(),null,DIRECTION.NONE,"Distributed transaction: %s re=locked record %s in database '%s' owned by %s",iRequestId,iRecord,databaseName,iRequestId);
      return true;
    }
  }
  if (locked)   ODistributedServerLog.info(this,getLocalNodeName(),null,DIRECTION.NONE,"Distributed transaction: %s locked record %s in database '%s'",iRequestId,iRecord,databaseName);
 else   ODistributedServerLog.info(this,getLocalNodeName(),null,DIRECTION.NONE,"Distributed transaction: %s cannot lock record %s in database '%s' owned by %s",iRequestId,iRecord,databaseName,oldReqId);
  return locked;
}
