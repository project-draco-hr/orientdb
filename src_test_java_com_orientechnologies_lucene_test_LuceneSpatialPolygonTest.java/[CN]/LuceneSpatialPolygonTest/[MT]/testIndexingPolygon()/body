{
  InputStream systemResourceAsStream=ClassLoader.getSystemResourceAsStream("germany.json");
  ODocument doc=new ODocument().fromJSON(systemResourceAsStream);
  Map geometry=doc.field("geometry");
  String type=(String)geometry.get("type");
  ODocument location=new ODocument(type);
  location.field("coordinates",geometry.get("coordinates"));
  ODocument germany=new ODocument("Place");
  germany.field("name","Germany");
  germany.field("location",location);
  databaseDocumentTx.save(germany);
  OIndex<?> index=databaseDocumentTx.getMetadata().getIndexManager().getIndex("Place.location");
  Assert.assertEquals(index.getSize(),1);
  String query="select * from Place where location STContains { 'shape' : { 'type' : 'Point' , 'coordinates' : [13.383333,52.516667]} } ";
  List<ODocument> docs=databaseDocumentTx.query(new OSQLSynchQuery<ODocument>(query));
  Assert.assertEquals(docs.size(),1);
  query="select * from Place where location STContains { 'shape' : { 'type' : 'Rectangle' , 'coordinates' : [13.0884,52.33812,13.76134,52.675499]} } ";
  docs=databaseDocumentTx.query(new OSQLSynchQuery<ODocument>(query));
  Assert.assertEquals(docs.size(),1);
  query="select * from Place where location STContains { 'shape' : { 'type' : 'Point' , 'coordinates' : [12.5,41.9]} } ";
  docs=databaseDocumentTx.query(new OSQLSynchQuery<ODocument>(query));
  Assert.assertEquals(docs.size(),0);
  query="select * from Place where location STContains { 'shape' : { 'type' : 'Rectangle' , 'coordinates' : [12.37528,41.802872,12.62256,41.991791]} } ";
  docs=databaseDocumentTx.query(new OSQLSynchQuery<ODocument>(query));
  Assert.assertEquals(docs.size(),0);
}
