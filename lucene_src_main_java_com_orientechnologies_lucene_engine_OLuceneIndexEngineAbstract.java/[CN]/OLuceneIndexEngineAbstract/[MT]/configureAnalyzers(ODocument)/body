{
  String defaultAnalyzerFQN=metadata.field("analyzer");
  if (defaultAnalyzerFQN != null) {
    for (    String field : index.getFields()) {
      indexAnalyzer.add(field,buildAnalyzer(defaultAnalyzerFQN));
      queryAnalyzer.add(field,buildAnalyzer(defaultAnalyzerFQN));
    }
  }
  String indexAnalyzerFQN=metadata.field("index_analyzer");
  if (indexAnalyzerFQN != null) {
    for (    String field : index.getFields()) {
      indexAnalyzer.add(field,buildAnalyzer(indexAnalyzerFQN));
    }
  }
  String queryAnalyzerFQN=metadata.field("query_analyzer");
  if (queryAnalyzerFQN != null) {
    for (    String field : index.getFields()) {
      queryAnalyzer.add(field,buildAnalyzer(queryAnalyzerFQN));
    }
  }
  for (  String meta : metadata.fieldNames()) {
    if (meta.contains("index") || meta.contains("query")) {
      String fieldName=meta.substring(0,meta.indexOf("_"));
      if (meta.contains("index")) {
        indexAnalyzer.add(fieldName,buildAnalyzer(metadata.<String>field(meta)));
      }
 else       if (meta.contains("query")) {
        queryAnalyzer.add(fieldName,buildAnalyzer(metadata.<String>field(meta)));
      }
    }
  }
}
