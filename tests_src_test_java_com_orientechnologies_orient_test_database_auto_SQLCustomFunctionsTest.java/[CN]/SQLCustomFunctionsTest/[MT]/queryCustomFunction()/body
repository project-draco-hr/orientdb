{
  database.open("admin","admin");
  OSQLParser.getInstance().registerFunction("max",new OSQLFunctionAbstract("max",2,2){
    public String getSyntax(){
      return "max(<first>, <second>)";
    }
    public Object execute(    ORecordInternal<?> iRecord,    Object[] iParameters){
      if (iParameters[0] == null || iParameters[1] == null)       return null;
      final double v1=Double.parseDouble(iParameters[0].toString());
      final double v2=Double.parseDouble(iParameters[1].toString());
      return Math.max(v1,v2);
    }
  }
);
  List<ODocument> result=database.command(new OSQLSynchQuery<ODocument>("select from Account where max(nr,1000) > 0")).execute();
  Assert.assertTrue(result.size() != 0);
  OSQLParser.getInstance().unregisterFunction("max");
  database.close();
}
