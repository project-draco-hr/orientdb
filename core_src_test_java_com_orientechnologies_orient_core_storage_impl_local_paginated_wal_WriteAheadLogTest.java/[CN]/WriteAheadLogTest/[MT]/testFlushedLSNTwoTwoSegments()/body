{
  long seek=System.currentTimeMillis();
  System.out.println("testFlushedLSNTwoTwoSegments seek " + seek);
  Random random=new Random(seek);
  int writtenContent=0;
  OWALRecord walRecord;
  while (writtenContent <= 4 * OWALPage.PAGE_SIZE) {
    int contentSize=random.nextInt(OWALPage.PAGE_SIZE - 1) + 1;
    walRecord=new TestRecord(contentSize);
    writeAheadLog.logRecord(walRecord);
    writtenContent+=contentSize;
  }
  int contentSize=random.nextInt(OWALPage.PAGE_SIZE - 1) + 1;
  walRecord=new TestRecord(contentSize);
  writeAheadLog.logRecord(walRecord);
  writeAheadLog.flush();
  Assert.assertEquals(writeAheadLog.getFlushedLSN(),walRecord.getLsn());
  writeAheadLog.close();
  writeAheadLog=createWAL();
  Assert.assertEquals(writeAheadLog.getFlushedLSN(),walRecord.getLsn());
}
