{
  if (!(iConfig instanceof ODocument))   throw new OTransactionException("QueryBlock: expected document as content");
  String command=parse(iContext,(ODocument)iConfig);
  command=(String)resolveValue(iContext,command);
  debug(iContext,"Executing: " + (iReadOnly ? "query" : "command") + ": "+ command.replace("%","%%")+ "...");
  final OCommandRequestText cmd=new OSQLSynchQuery<OIdentifiable>(command.toString());
  cmd.getContext().setParent(iContext);
  final String returnVariable=getFieldOfClass(iContext,iConfig,"return",String.class);
  if (returnVariable != null) {
    final List<?> result=cmd.execute();
    debug(iContext,"Returned %d records",result.size());
    return result;
  }
  return cmd;
}
