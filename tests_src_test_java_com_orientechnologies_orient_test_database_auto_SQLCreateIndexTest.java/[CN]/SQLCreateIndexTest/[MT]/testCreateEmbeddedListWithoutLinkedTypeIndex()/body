{
  try {
    database.command(new OCommandSQL("CREATE INDEX sqlCreateIndexEmbeddedListWithoutLinkedTypeIndex ON sqlCreateIndexTestClass (prop6) UNIQUE")).execute();
    Assert.fail();
  }
 catch (  OResponseProcessingException e) {
    Assert.assertTrue(e.getCause() instanceof OIndexException);
    OIndexException exception=(OIndexException)e.getCause();
    Assert.assertTrue(exception.getMessage().contains("Linked type was not provided. " + "You should provide linked type for embedded collections that are going to be indexed."));
  }
catch (  OIndexException e) {
    Assert.assertTrue(e.getMessage().contains("Linked type was not provided. " + "You should provide linked type for embedded collections that are going to be indexed."));
  }
  final OIndex<?> index=database.getMetadata().getSchema().getClass("sqlCreateIndexTestClass").getClassIndex("sqlCreateIndexEmbeddedListWithoutLinkedTypeIndex");
  Assert.assertNull(index,"Index created while wrong query was executed");
}
