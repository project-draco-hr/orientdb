{
  createConnectionPool();
  OChannelBinaryClient network=null;
  try {
    network=beginRequest(OChannelBinaryProtocol.REQUEST_DB_OPEN);
    network.writeString(name).writeString(iUserName).writeString(iUserPassword);
  }
  finally {
    endRequest(network);
  }
  final int sessionId;
  try {
    beginResponse(network);
    sessionId=network.readInt();
    if (debug)     System.out.println("new sess: " + sessionId);
    OLogManager.instance().debug(null,"Client connected with session id: " + sessionId);
    int tot=network.readInt();
    String clusterName;
    for (int i=0; i < tot; ++i) {
      clusterName=network.readString().toLowerCase();
      clustersIds.put(clusterName,network.readInt());
      clustersTypes.put(clusterName,network.readString());
    }
    updateClusterConfiguration(network.readBytes());
  }
  finally {
    endResponse(network);
  }
  setSessionId(sessionId);
  defaultClusterId=clustersIds.get(OStorage.CLUSTER_DEFAULT_NAME);
  open=true;
}
