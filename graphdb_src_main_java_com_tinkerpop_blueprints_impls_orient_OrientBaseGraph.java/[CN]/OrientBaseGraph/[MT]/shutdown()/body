{
  makeActive();
  try {
    if (!database.isClosed())     database.commit();
  }
 catch (  RuntimeException e) {
    OLogManager.instance().error(this,"Error during context close for db " + url,e);
    throw e;
  }
catch (  Exception e) {
    OLogManager.instance().error(this,"Error during context close for db " + url,e);
    throw new OException("Error during context close for db " + url,e);
  }
 finally {
    try {
      database.close();
    }
 catch (    Exception e) {
      OLogManager.instance().error(this,"Error during context close for db " + url,e);
    }
  }
  final OrientBaseGraph graph=pollFromInitQueue();
  currentGraph.set(graph);
  if (graph != null)   graph.makeActive();
  url=null;
  username=null;
  password=null;
}
