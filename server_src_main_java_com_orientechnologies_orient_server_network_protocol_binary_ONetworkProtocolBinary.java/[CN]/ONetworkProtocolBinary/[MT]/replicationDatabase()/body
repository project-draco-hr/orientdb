{
  setDataCommandInfo("Replication command");
  final ODocument request=new ODocument(channel.readBytes());
  final ODistributedServerManager manager=OServerMain.server().getHandler(ODistributedServerManager.class);
  final ODistributedNode node=manager.getReplicator().getOrCreateDistributedNode((String)request.field("node"));
  final ODistributedDatabaseInfo db=node.getOrCreateDatabaseEntry((String)request.field("db"));
  ODocument response=null;
  final String operation=request.field("operation");
  if (operation.equals("start")) {
    checkServerAccess("server.replication.start");
    node.startDatabaseReplication(db);
  }
 else   if (operation.equals("stop")) {
    checkServerAccess("server.replication.stop");
    node.stopDatabaseReplication(db);
  }
 else   if (operation.equals("align")) {
    checkServerAccess("server.replication.align");
    node.startDatabaseAlignment(node.getOrCreateDatabaseEntry(db.databaseName),(String)request.field("options"));
  }
  sendResponse(response);
}
