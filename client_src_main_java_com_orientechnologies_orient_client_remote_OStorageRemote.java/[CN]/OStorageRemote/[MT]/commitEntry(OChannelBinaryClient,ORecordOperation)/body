{
  if (txEntry.type == ORecordOperation.LOADED)   return;
  byte[] stream=null;
  try {
switch (txEntry.type) {
case ORecordOperation.CREATED:
case ORecordOperation.UPDATED:
      stream=txEntry.getRecord().toStream();
    break;
}
}
 catch (Exception e) {
iNetwork.writeByte((byte)-1);
throw new OTransactionException("Error on transaction commit",e);
}
iNetwork.writeByte((byte)1);
iNetwork.writeByte(txEntry.type);
iNetwork.writeShort((short)txEntry.getRecord().getIdentity().getClusterId());
iNetwork.writeLong(txEntry.getRecord().getIdentity().getClusterPosition());
iNetwork.writeByte(txEntry.getRecord().getRecordType());
switch (txEntry.type) {
case ORecordOperation.CREATED:
iNetwork.writeBytes(stream);
break;
case ORecordOperation.UPDATED:
iNetwork.writeInt(txEntry.getRecord().getVersion());
iNetwork.writeBytes(stream);
break;
case ORecordOperation.DELETED:
iNetwork.writeInt(txEntry.getRecord().getVersion());
break;
}
}
