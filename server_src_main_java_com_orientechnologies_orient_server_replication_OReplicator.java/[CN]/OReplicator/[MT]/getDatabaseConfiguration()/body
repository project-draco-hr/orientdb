{
  final ODocument doc=new ODocument();
  for (  String dbName : OServerMain.server().getAvailableStorageNames().keySet()) {
    final ODocument dbCfg=new ODocument().addOwner(doc);
    doc.field(dbName,dbCfg);
    final File dbDir=new File(OSystemVariableResolver.resolveSystemVariables(DIRECTORY_NAME + "/" + dbName));
    if (dbDir.exists() && dbDir.isDirectory()) {
      for (      File f : dbDir.listFiles()) {
        if (f.isFile() && f.getName().endsWith(OOperationLog.EXTENSION)) {
          final String nodeId=f.getName().substring(0,f.getName().indexOf('.')).replace('_','.').replace('-',':');
          final ODistributedNode node=nodes.get(nodeId);
          if (node != null) {
            try {
              dbCfg.field(nodeId,node.getOperationId());
            }
 catch (            IOException e) {
            }
          }
        }
      }
    }
  }
  return doc;
}
