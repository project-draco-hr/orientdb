{
  acquireWriteLock();
  try {
    final long currentSize=this.size;
    if (maxSize > 0 && currentSize + size > maxSize)     throw new IllegalArgumentException("Cannot enlarge file since the configured max size (" + OFileUtils.getSizeAsString(maxSize) + ") was reached! "+ toString());
    this.size+=size;
    return currentSize;
  }
  finally {
    releaseWriteLock();
  }
}
