{
  maxSize=OGlobalConfiguration.STORAGE_CACHE_SIZE.getValueAsInteger();
  cache=new LinkedHashMap<String,ORawBuffer>(maxSize,0.75f,true){
    @Override protected boolean removeEldestEntry(    java.util.Map.Entry<String,ORawBuffer> iEldest){
      return size() > maxSize;
    }
  }
;
  Orient.instance().getMemoryWatchDog().addListener(new Listener(){
    /** 
 * Auto reduce cache size of 10%
 */
    public void memoryUsageLow(    final long usedMemory,    final long maxMemory){
      final int threshold=maxSize * 90 / 100;
      if (cache.size() < threshold)       return;
      OLogManager.instance().debug(this,"Low memory: auto reduce the storage cache size from %d to %d",maxSize,threshold);
      maxSize=threshold;
    }
  }
);
}
