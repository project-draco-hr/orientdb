{
  checkSecurity(OUser.QUERY,OUser.READ);
  OQueryInternal<REC> query=(OQueryInternal<REC>)iQuery;
  try {
    query.setDatabase((ODatabaseRecord<REC>)getDatabaseOwner());
    if (query.getRecord() == null)     query.setRecord((REC)getDatabaseOwner().newInstance());
    return query;
  }
 catch (  Exception e) {
    OLogManager.instance().error(this,"Error on query execution",e,ODatabaseException.class);
  }
  return null;
}
