{
  final OTransactionIndexChanges indexChanges=database.getTransaction().getIndexChanges(delegate.getName());
  final Set<OIdentifiable> result;
  if (indexChanges == null || !indexChanges.cleared)   result=new TreeSet<OIdentifiable>(super.get(iKey));
 else   result=new TreeSet<OIdentifiable>();
  if (indexChanges != null && indexChanges.containsChangesPerKey(iKey)) {
    final OTransactionIndexChangesPerKey value=indexChanges.getChangesPerKey(iKey);
    if (value != null) {
      for (      final OTransactionIndexEntry entry : value.entries) {
        if (entry.operation == OPERATION.REMOVE) {
          if (entry.value == null)           result.clear();
 else           result.remove(entry.value);
        }
 else         if (entry.operation == OPERATION.PUT) {
          result.add(entry.value);
        }
      }
    }
  }
  return result;
}
