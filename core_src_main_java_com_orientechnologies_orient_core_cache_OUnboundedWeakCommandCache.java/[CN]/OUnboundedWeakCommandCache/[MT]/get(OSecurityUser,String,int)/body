{
  if (!enable)   return null;
  final String key=getKey(iUser,queryText,iLimit);
  final WeakReference<OCachedResult> value;
  lock.lock();
  try {
    value=cache.get(key);
  }
  finally {
    lock.unlock();
  }
  final Object result=get(value);
  final OProfilerMBean profiler=Orient.instance().getProfiler();
  if (profiler.isRecording()) {
    if (result != null) {
      profiler.updateCounter(profiler.getDatabaseMetric(databaseName,"queryCache.hit"),"Results returned by Query Cache",+1);
    }
 else {
      profiler.updateCounter(profiler.getDatabaseMetric(databaseName,"queryCache.miss"),"Results not returned by Query Cache",+1);
    }
  }
  return result;
}
