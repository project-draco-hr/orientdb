{
  final long timer=OProfiler.getInstance().startChrono();
  try {
    if (OIntegerSerializer.INSTANCE.deserialize(iStream,0) >= 0) {
      OLogManager.instance().warn(this,"Previous version of serialization format was found for node with id " + record.getIdentity() + " conversion to new format will be performed."+ " It will take some time. If this message is shown constantly please recreate indexes.");
      iStream=convertIntoNewSerializationFormat(iStream);
      OLogManager.instance().warn(this,"Conversion of data to new serialization format for node " + record.getIdentity() + " was finished. ");
    }
    if (((OMVRBTreeMapProvider<K,V>)treeDataProvider).valueSerializer instanceof OBinarySerializer)     fromStreamUsingBinarySerializer(iStream);
 else     fromStreamUsingBinaryStreamSerializer(iStream);
    return this;
  }
 catch (  IOException e) {
    throw new OSerializationException("Can not unmarshall tree node with id ",e);
  }
 finally {
    OProfiler.getInstance().stopChrono("OMVRBTreeMapEntry.fromStream",timer);
  }
}
