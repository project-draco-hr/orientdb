{
  try {
    acquireExclusiveLock();
    files[0].shrink(0);
    if (files.length > 1) {
      for (int i=1; i < files.length; ++i) {
        if (files[i] != null)         files[i].delete();
      }
      final OFile f=files[0];
      files=new OFile[1];
      files[0]=f;
      final OStorageFileConfiguration fileConfig=config.infoFiles[0];
      config.infoFiles=new OStorageFileConfiguration[1];
      config.infoFiles[0]=fileConfig;
      config.root.update();
    }
  }
  finally {
    releaseExclusiveLock();
  }
}
