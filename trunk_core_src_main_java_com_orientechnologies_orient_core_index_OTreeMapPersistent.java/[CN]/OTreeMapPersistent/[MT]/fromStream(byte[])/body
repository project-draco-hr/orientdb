{
  final long timer=OProfiler.getInstance().startChrono();
  try {
    OMemoryInputStream stream=new OMemoryInputStream(iStream);
    ORID rootRid=new ORecordId().fromStream(stream.getAsByteArray());
    size=stream.getAsInteger();
    lastPageSize=stream.getAsShort();
    keySerializer=OStreamSerializerFactory.get(database,stream.getAsString());
    valueSerializer=OStreamSerializerFactory.get(database,stream.getAsString());
    if (rootRid.isValid())     root=new OTreeMapEntryPersistent<K,V>(this,null,rootRid);
    return this;
  }
 catch (  Exception e) {
    OLogManager.instance().error(this,"Error on unmarshalling OTreeMapPersistent object",e,OSerializationException.class);
  }
 finally {
    OProfiler.getInstance().stopChrono("OTreeMapPersistent.fromStream",timer);
  }
  return this;
}
