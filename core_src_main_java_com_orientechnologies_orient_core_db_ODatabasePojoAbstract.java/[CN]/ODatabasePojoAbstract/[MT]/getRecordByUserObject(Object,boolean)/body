{
  checkOpeness();
  if (iPojo instanceof ODocument)   return (ODocument)iPojo;
  ODocument record=objects2Records.get(System.identityHashCode(iPojo));
  if (record == null) {
    if (iIsMandatory)     throw new OObjectNotManagedException("The object " + iPojo + " is not managed by the current database");
    record=underlying.newInstance(iPojo.getClass().getSimpleName());
    registerPojo((T)iPojo,record);
    pojo2Stream((T)iPojo,record);
  }
  return record;
}
