{
  try {
    if (status == STATUS.OPEN)     throw new IllegalStateException("Database " + getName() + " is already open");
    if (storage == null)     storage=Orient.instance().loadStorage(url);
    final OStorageConfiguration configuration=storage.getConfiguration();
    if (configuration != null) {
      if (!(storage instanceof OStorageMemory))       configuration.load();
      OBinarySerializerFactory.registerFactory(new OCurrentStorageVersions(configuration));
    }
    storage.open(iUserName,iUserPassword,properties);
    status=STATUS.OPEN;
    callOnOpenListeners();
  }
 catch (  OException e) {
    throw e;
  }
catch (  Exception e) {
    throw new ODatabaseException("Cannot open database",e);
  }
  return (DB)this;
}
