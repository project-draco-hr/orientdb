{
  if (iThis == null) {
    return null;
  }
  final String format=iParams.length > 0 ? ((String)iParams[0]).replace("\"","") : null;
  if (iThis instanceof ORecord) {
    final ORecord record=(ORecord)iThis;
    return iParams.length == 1 ? record.toJSON(format) : record.toJSON();
  }
 else   if (iThis instanceof Map) {
    final ODocument doc=new ODocument().fromMap((Map<String,Object>)iThis);
    return iParams.length == 1 ? doc.toJSON(format) : doc.toJSON();
  }
 else   if (OMultiValue.isMultiValue(iThis)) {
    final List<String> result=new ArrayList<String>();
    for (    Object o : OMultiValue.getMultiValueIterable(iThis)) {
      if (o != null && o instanceof OIdentifiable) {
        final ORecord record=((OIdentifiable)o).getRecord();
        result.add(iParams.length == 1 ? record.toJSON(format) : record.toJSON());
      }
    }
    return result;
  }
  return null;
}
