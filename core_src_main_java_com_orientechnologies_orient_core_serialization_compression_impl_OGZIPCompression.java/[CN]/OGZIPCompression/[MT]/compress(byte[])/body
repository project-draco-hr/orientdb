{
  try {
    final OMemoryStream memoryOutputStream=new OMemoryStream();
    final GZIPOutputStream gzipOutputStream=new GZIPOutputStream(memoryOutputStream);
    try {
      gzipOutputStream.write(content);
      gzipOutputStream.finish();
    }
  finally {
      gzipOutputStream.close();
    }
    return memoryOutputStream.toByteArray();
  }
 catch (  IOException ioe) {
    throw new IllegalStateException("Exception during data compression.",ioe);
  }
}
