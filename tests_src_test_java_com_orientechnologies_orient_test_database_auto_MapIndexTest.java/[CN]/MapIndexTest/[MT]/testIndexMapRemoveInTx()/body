{
  final Mapper mapper=new Mapper();
  Map<String,Integer> map=new HashMap<String,Integer>();
  map.put("key1",10);
  map.put("key2",20);
  mapper.setIntMap(map);
  database.save(mapper);
  try {
    database.begin();
    database.delete(mapper);
    database.commit();
  }
 catch (  Exception e) {
    database.rollback();
    throw e;
  }
  final List<ODocument> resultByKey=database.command(new OCommandSQL("select key, rid from index:mapIndexTestKey")).execute();
  Assert.assertNotNull(resultByKey);
  Assert.assertEquals(resultByKey.size(),0);
  final List<ODocument> resultByValue=database.command(new OCommandSQL("select key, rid from index:mapIndexTestValue")).execute();
  Assert.assertNotNull(resultByValue);
  Assert.assertEquals(resultByValue.size(),0);
}
