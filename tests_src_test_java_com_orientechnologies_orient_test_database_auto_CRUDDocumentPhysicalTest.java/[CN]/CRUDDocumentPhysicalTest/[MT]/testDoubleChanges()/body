{
  database=ODatabaseDocumentPool.global().acquire(url,"admin","admin");
  ODocument vDoc=database.newInstance();
  vDoc.setClassName("Profile");
  vDoc.field("nick","JayM1").field("name","Jay").field("surname","Miner");
  vDoc.save();
  vDoc=database.load(vDoc.getIdentity());
  vDoc.field("nick","JayM2");
  vDoc.field("nick","JayM3");
  vDoc.save();
  OPropertyIndex index=database.getMetadata().getSchema().getClass("Profile").getProperty("nick").getIndex();
  OIdentifiable vOldName=(OIdentifiable)index.getUnderlying().get("JayM1");
  Assert.assertNull(vOldName);
  OIdentifiable vIntermediateName=(OIdentifiable)index.getUnderlying().get("JayM2");
  Assert.assertNull(vIntermediateName);
  OIdentifiable vNewName=(OIdentifiable)index.getUnderlying().get("JayM3");
  Assert.assertNotNull(vNewName);
  database.close();
}
