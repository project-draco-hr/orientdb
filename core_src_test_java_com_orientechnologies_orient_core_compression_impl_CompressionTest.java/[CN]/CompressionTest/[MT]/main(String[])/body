{
  long seed=System.currentTimeMillis();
  Random random=new Random(seed);
  final int iterationsCount=1000;
  byte[][] contents=new byte[iterationsCount][];
  for (int i=0; i < iterationsCount; i++) {
    int contentSize=random.nextInt(10 * 1024 - 100) + 100;
    byte[] content=new byte[contentSize];
    random.nextBytes(content);
    contents[i]=content;
  }
  for (  String name : OCompressionFactory.INSTANCE.getCompressions()) {
    long compressedSize=0;
    long startTime=System.currentTimeMillis();
    for (int i=0; i < iterationsCount; i++) {
      final OCompression compression=OCompressionFactory.INSTANCE.getCompression(name);
      final byte[] compressedContent=compression.compress(contents[i]);
      compressedSize+=compressedContent.length;
      Assert.assertEquals(contents[i],compression.uncompress(compressedContent));
    }
    System.out.println("Compression/Decompression test against " + name + " took: "+ (System.currentTimeMillis() - seed)+ "ms, total byte size: "+ compressedSize);
  }
}
