{
  if (record.getThrown() == null) {
    return customFormatMessage(record);
  }
  final StringBuilder buffer=new StringBuilder();
  buffer.append(record.getMessage());
  Throwable current=record.getThrown();
  while (current != null) {
    buffer.append(EOL).append(current.getMessage());
    for (    StackTraceElement stackTraceElement : record.getThrown().getStackTrace()) {
      buffer.append(EOL).append("-> ");
      buffer.append(stackTraceElement.toString());
    }
    current=current.getCause();
  }
  return buffer.toString();
}
