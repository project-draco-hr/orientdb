{
  if (!OGlobalConfiguration.FILE_MMAP_USE_OLD_MANAGER.getValueAsBoolean() && OGlobalConfiguration.FILE_MMAP_LOCK_MEMORY.getValueAsBoolean()) {
    try {
      Class<?> MemoryLocker=ClassLoader.getSystemClassLoader().loadClass("com.orientechnologies.nio.MemoryLocker");
      Method lockMemory=MemoryLocker.getMethod("lockMemory",boolean.class);
      lockMemory.invoke(null,OGlobalConfiguration.JNA_DISABLE_USE_SYSTEM_LIBRARY.getValueAsBoolean());
    }
 catch (    ClassNotFoundException e) {
      OLogManager.instance().warn(null,"[OEngineLocal.createStorage] Error on locking memory! It seems that orient-nio jar is not in classpath");
    }
catch (    NoSuchMethodException e) {
      throw new OMemoryLockException("Error while locking memory",e);
    }
catch (    InvocationTargetException e) {
      throw new OMemoryLockException("Error while locking memory",e);
    }
catch (    IllegalAccessException e) {
      throw new OMemoryLockException("Error while locking memory",e);
    }
  }
}
