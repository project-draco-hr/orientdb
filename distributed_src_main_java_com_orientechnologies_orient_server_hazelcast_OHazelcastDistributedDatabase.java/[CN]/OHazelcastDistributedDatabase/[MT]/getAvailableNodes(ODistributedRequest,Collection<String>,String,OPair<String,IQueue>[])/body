{
  int availableNodes;
  if (iRequest.getTask().isRequireNodeOnline()) {
    availableNodes=0;
    int i=0;
    for (    String node : iNodes) {
      if (reqQueues[i].getValue() != null && manager.isNodeAvailable(node,databaseName))       availableNodes++;
 else {
        if (ODistributedServerLog.isDebugEnabled())         ODistributedServerLog.debug(this,getLocalNodeName(),node,DIRECTION.OUT,"skip expected response from node '%s' for request %s because it's not online (queue=%s)",node,iRequest,reqQueues[i].getValue() != null);
      }
      ++i;
    }
  }
 else {
    availableNodes=0;
    for (    OPair<String,IQueue> q : reqQueues)     if (q.getValue() != null)     availableNodes++;
  }
  return availableNodes;
}
