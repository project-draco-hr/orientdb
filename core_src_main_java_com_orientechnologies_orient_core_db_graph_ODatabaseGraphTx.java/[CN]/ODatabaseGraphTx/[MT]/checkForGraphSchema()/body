{
  OClass vertex=underlying.getMetadata().getSchema().getClass(OGraphDatabase.VERTEX_CLASS_NAME);
  OClass edge=underlying.getMetadata().getSchema().getClass(OGraphDatabase.EDGE_CLASS_NAME);
  if (vertex == null) {
    vertex=underlying.getMetadata().getSchema().createClass(OGraphDatabase.VERTEX_CLASS_NAME,underlying.addPhysicalCluster(OGraphDatabase.VERTEX_CLASS_NAME));
    edge=underlying.getMetadata().getSchema().createClass(OGraphDatabase.EDGE_CLASS_NAME,underlying.addPhysicalCluster(OGraphDatabase.EDGE_CLASS_NAME));
    edge.createProperty(OGraphDatabase.EDGE_FIELD_IN,OType.LINK,vertex);
    edge.createProperty(OGraphDatabase.EDGE_FIELD_OUT,OType.LINK,vertex);
    vertex.createProperty(OGraphDatabase.VERTEX_FIELD_IN_EDGES,OType.LINKSET,edge);
    vertex.createProperty(OGraphDatabase.VERTEX_FIELD_OUT_EDGES,OType.LINKSET,edge);
  }
 else {
    if (vertex.getProperty(OGraphDatabase.VERTEX_FIELD_OUT_EDGES).getType() == OType.LINKLIST)     vertex.getProperty(OGraphDatabase.VERTEX_FIELD_OUT_EDGES).setType(OType.LINKSET);
    if (vertex.getProperty(OGraphDatabase.VERTEX_FIELD_IN_EDGES).getType() == OType.LINKLIST)     vertex.getProperty(OGraphDatabase.VERTEX_FIELD_IN_EDGES).setType(OType.LINKSET);
  }
}
