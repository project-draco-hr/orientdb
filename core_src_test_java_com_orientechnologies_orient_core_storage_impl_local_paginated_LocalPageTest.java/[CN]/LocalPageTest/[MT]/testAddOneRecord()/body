{
  long pagePointer=directMemory.allocate(new byte[OLocalPage.PAGE_SIZE]);
  try {
    OLocalPage localPage=new OLocalPage(pagePointer,true);
    int freeSpace=localPage.getFreeSpace();
    Assert.assertEquals(freeSpace,OLocalPage.PAGE_SIZE - 5 * OIntegerSerializer.INT_SIZE);
    Assert.assertEquals(localPage.getRecordsCount(),0);
    int position=localPage.appendRecord(new byte[]{1,2,3,4,5,6,5,4,3,2,1});
    Assert.assertEquals(localPage.getRecordsCount(),1);
    Assert.assertEquals(position,0);
    Assert.assertEquals(localPage.getFreeSpace(),freeSpace - 19);
    Assert.assertFalse(localPage.isDeleted(0));
    long pointer=localPage.getRecordPointer(0);
    Assert.assertEquals(directMemory.get(pointer,11),new byte[]{1,2,3,4,5,6,5,4,3,2,1});
  }
  finally {
    directMemory.free(pagePointer);
  }
}
