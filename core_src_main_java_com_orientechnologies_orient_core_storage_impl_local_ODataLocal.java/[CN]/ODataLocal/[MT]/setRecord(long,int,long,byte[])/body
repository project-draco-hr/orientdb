{
  acquireExclusiveLock();
  try {
    long[] pos=getRelativePosition(iPosition);
    final OFile file=files[(int)pos[0]];
    final int recordSize=file.readInt(pos[1]);
    if (iContent.length == recordSize) {
      file.write(pos[1] + RECORD_FIX_SIZE,iContent);
      OProfiler.getInstance().updateCounter("ODataLocal.setRecord:tot.reused.space",+1);
    }
 else     if (iContent.length < recordSize) {
      writeRecord(pos,iClusterSegment,iClusterPosition,iContent);
      holeSegment.createHole(iPosition + RECORD_FIX_SIZE + iContent.length,iContent.length - recordSize);
      OProfiler.getInstance().updateCounter("ODataLocal.setRecord:part.reused.space",+1);
    }
 else {
      pos=allocateSpace(iContent.length + RECORD_FIX_SIZE);
      writeRecord(pos,iClusterSegment,iClusterPosition,iContent);
      holeSegment.createHole(iPosition,recordSize);
      OProfiler.getInstance().updateCounter("ODataLocal.setRecord:new.space",+1);
    }
    return getAbsolutePosition(pos);
  }
  finally {
    releaseExclusiveLock();
  }
}
