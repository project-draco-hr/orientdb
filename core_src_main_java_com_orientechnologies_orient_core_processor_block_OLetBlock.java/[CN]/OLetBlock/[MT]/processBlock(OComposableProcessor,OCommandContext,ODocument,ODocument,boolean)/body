{
  final Boolean copy=getFieldOfClass(iContext,iConfig,"copy",Boolean.class);
  final Boolean flatMultivalues=getFieldOfClass(iContext,iConfig,"flatMultivalues",Boolean.class);
  Object target=getField(iContext,iConfig,"target");
  if (target != null && target.equals("null"))   target=new ODocument();
  final Object value=getRawField(iConfig,"value");
  if (value != null) {
    if (value instanceof ODocument) {
      final ODocument doc=((ODocument)value);
      for (      String fieldName : doc.fieldNames()) {
        final Object v=resolveValue(iContext,doc.field(fieldName),true);
        if (target != null) {
          debug(iContext,"Set value %s in document field '%s'",v,fieldName);
          ((ODocument)target).field(fieldName,v);
        }
 else         assignVariable(iContext,fieldName,v);
      }
    }
 else     if (value instanceof Map<?,?>) {
      for (      Entry<Object,Object> entry : ((Map<Object,Object>)value).entrySet()) {
        final Object v=resolveValue(iContext,getValue(entry.getValue(),copy),true);
        if (target != null) {
          debug(iContext,"Set value %s in document field '%s'",v,entry.getKey());
          ((ODocument)target).field(entry.getKey().toString(),v);
        }
 else         assignVariable(iContext,entry.getKey().toString(),v);
      }
    }
 else {
      final String name=getRequiredFieldOfClass(iContext,iConfig,"name",String.class);
      Object v=getValue(getRequiredField(iContext,iConfig,"value"),copy);
      v=flatMultivalues(iContext,copy,flatMultivalues,v);
      if (target != null) {
        if (OMultiValue.isMultiValue(v)) {
          for (int i=0; i < OMultiValue.getSize(v); ++i) {
            final Object fieldName=OMultiValue.getValue(v,i);
            if (fieldName != null && !((ODocument)target).containsField(fieldName.toString())) {
              debug(iContext,"Set value %s in document field '%s'",null,fieldName);
              ((ODocument)target).field(fieldName.toString(),(Object)null);
            }
          }
        }
        if (name != null)         assignVariable(iContext,name,target);
      }
 else       assignVariable(iContext,name,v);
    }
  }
  return null;
}
