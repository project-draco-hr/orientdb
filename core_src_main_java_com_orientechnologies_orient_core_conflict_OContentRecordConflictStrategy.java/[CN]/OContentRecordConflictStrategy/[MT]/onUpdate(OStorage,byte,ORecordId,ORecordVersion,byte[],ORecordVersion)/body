{
  final boolean hasSameContent;
  if (iRecordType == ODocument.RECORD_TYPE) {
    OStorageOperationResult<ORawBuffer> res=storage.readRecord(rid,null,false,null,false,LOCKING_STRATEGY.NONE);
    final ODocument storedRecord=new ODocument(rid).fromStream(res.getResult().getBuffer());
    final ODocument newRecord=new ODocument().fromStream(iRecordContent);
    final ODatabaseDocumentInternal currentDb=ODatabaseRecordThreadLocal.INSTANCE.get();
    hasSameContent=ODocumentHelper.hasSameContentOf(storedRecord,currentDb,newRecord,currentDb,null,false);
  }
 else {
    final ORecordAbstract storedRecord=rid.getRecord();
    hasSameContent=Arrays.equals(storedRecord.toStream(),iRecordContent);
  }
  if (hasSameContent)   iDatabaseVersion.setCounter(Math.max(iDatabaseVersion.getCounter(),iRecordVersion.getCounter()));
 else   checkVersions(rid,iRecordVersion,iDatabaseVersion);
  return null;
}
