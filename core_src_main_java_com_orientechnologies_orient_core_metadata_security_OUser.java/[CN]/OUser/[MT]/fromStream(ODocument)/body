{
  if (document != null)   return;
  document=iSource;
  roles=new HashSet<ORole>();
  final Collection<ODocument> loadedRoles=iSource.field("roles");
  if (loadedRoles != null)   for (  final ODocument d : loadedRoles) {
    final ORole role=document.getDatabase().getMetadata().getSecurity().getRole((String)d.field("name"));
    if (role == null) {
      OLogManager.instance().warn(this,"User '%s' declare to have the role '%s' but it does not exist in database, skipt it",getName(),d.field("name"));
      document.getDatabase().getMetadata().getSecurity().repair();
    }
 else     roles.add(role);
  }
}
