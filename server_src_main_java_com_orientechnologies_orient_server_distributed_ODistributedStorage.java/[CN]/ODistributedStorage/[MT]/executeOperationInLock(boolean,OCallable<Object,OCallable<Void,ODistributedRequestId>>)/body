{
  if (iExclusiveLock)   messageManagementLock.writeLock().lock();
 else   messageManagementLock.readLock().lock();
  final AtomicBoolean acquiredMessageManagementLock=new AtomicBoolean(true);
  final OCallable<Void,ODistributedRequestId> unlockCallback=new OCallable<Void,ODistributedRequestId>(){
    @Override public Void call(    final ODistributedRequestId req){
      if (acquiredMessageManagementLock.compareAndSet(true,false))       if (iExclusiveLock)       messageManagementLock.writeLock().unlock();
 else       messageManagementLock.readLock().unlock();
      return null;
    }
  }
;
  return callback.call(unlockCallback);
}
