{
  acquireWriteLock();
  try {
    if (channel == null || mode.indexOf('w') < 0)     return;
    final ByteBuffer buffer=getBuffer(1);
    buffer.put(0,(byte)(value ? 1 : 0));
    writeBuffer(buffer,SOFTLY_CLOSED_OFFSET);
    try {
      channel.force(true);
    }
 catch (    IOException e) {
      OLogManager.instance().warn(this,"Error during flush of file %s. Data may be lost in case of power failure.",getName(),e);
    }
  }
  finally {
    releaseWriteLock();
  }
}
