{
  final ORecordInternal<?> record=Orient.instance().getRecordFactoryManager().newInstance(recordType);
  if (record.getRecordType() == ODocument.RECORD_TYPE) {
    record.fill(rid,OVersionFactory.instance().createVersion(),null,true);
    getRecordSerializer().fromStream(buffer,record,null);
    record.setDirty();
  }
 else   record.fill(rid,OVersionFactory.instance().createVersion(),buffer,true);
  iDatabase.save(record);
  return record;
}
