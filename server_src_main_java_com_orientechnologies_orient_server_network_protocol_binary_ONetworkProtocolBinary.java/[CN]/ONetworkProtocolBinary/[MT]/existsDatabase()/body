{
  setDataCommandInfo("Exists database");
  final String dbName=channel.readString();
  final String storageType;
  if (connection.data.protocolVersion >= 16)   storageType=channel.readString();
 else   storageType="local";
  checkServerAccess("database.exists");
  if (storageType != null)   connection.database=getDatabaseInstance(dbName,ODatabaseDocument.TYPE,storageType);
 else {
    for (    String engine : Orient.instance().getEngines()) {
      if (!engine.equalsIgnoreCase(OEngineRemote.NAME)) {
        connection.database=getDatabaseInstance(dbName,ODatabaseDocument.TYPE,engine);
        if (connection.database.exists())         break;
        Orient.instance().unregisterStorage(connection.database.getStorage());
      }
    }
  }
  beginResponse();
  try {
    sendOk(clientTxId);
    channel.writeByte((byte)(connection.database.exists() ? 1 : 0));
  }
  finally {
    endResponse();
  }
}
