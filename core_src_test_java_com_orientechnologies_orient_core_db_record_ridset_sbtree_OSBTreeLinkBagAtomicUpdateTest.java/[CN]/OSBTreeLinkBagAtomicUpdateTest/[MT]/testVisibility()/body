{
  ODocument document=new ODocument();
  OSBTreeRidBag ridBag=new OSBTreeRidBag();
  document.field("ridBag",ridBag);
  ODocument docOne=new ODocument();
  docOne.save();
  ODocument docTwo=new ODocument();
  docTwo.save();
  ridBag.add(docOne);
  ridBag.add(docTwo);
  document.save();
  ODocument copyOne=db.load(document.getIdentity());
  ODocument copyTwo=db.load(document.getIdentity());
  Assert.assertNotSame(copyOne,copyTwo);
  OSBTreeRidBag ridBagOne=copyOne.field("ridBag");
  OSBTreeRidBag ridBagTwo=copyTwo.field("ridBag");
  ODocument docTree=new ODocument();
  docTree.save();
  ODocument docFour=new ODocument();
  docFour.save();
  ridBagOne.remove(docOne);
  ridBagOne.add(docTree);
  ridBagTwo.add(docFour);
  Assert.assertEquals(ridBagOne.size(),2);
  Assert.assertEquals(ridBagTwo.size(),3);
}
