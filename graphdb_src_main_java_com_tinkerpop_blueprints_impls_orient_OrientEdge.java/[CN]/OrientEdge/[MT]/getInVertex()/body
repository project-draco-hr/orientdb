{
  final OrientBaseGraph graph=getGraph();
  if (vIn != null)   return vIn;
  if (graph != null)   graph.setCurrentGraphInThreadLocal();
  final ODocument doc=getRecord();
  if (doc == null)   return null;
  if (settings != null && settings.keepInMemoryReferences)   return doc.rawField(OrientBaseGraph.CONNECTION_IN);
 else   return doc.field(OrientBaseGraph.CONNECTION_IN);
}
