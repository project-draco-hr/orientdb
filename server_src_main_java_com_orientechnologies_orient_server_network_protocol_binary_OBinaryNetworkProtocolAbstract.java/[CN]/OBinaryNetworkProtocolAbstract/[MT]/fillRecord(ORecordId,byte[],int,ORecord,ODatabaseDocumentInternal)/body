{
  String dbSerializerName="";
  if (iDatabase != null)   dbSerializerName=iDatabase.getSerializer().toString();
  String name=getRecordSerializerName();
  if (ORecordInternal.getRecordType(record) == ODocument.RECORD_TYPE && !dbSerializerName.equals(name)) {
    ORecordInternal.fill(record,rid,version,null,true);
    try {
      ORecordSerializer ser=ORecordSerializerFactory.instance().getFormat(name);
      ONetworkThreadLocalSerializer.setNetworkSerializer(ser);
      record.fromStream(buffer);
    }
  finally {
      ONetworkThreadLocalSerializer.setNetworkSerializer(null);
    }
    record.setDirty();
  }
 else   ORecordInternal.fill(record,rid,version,buffer,true);
}
