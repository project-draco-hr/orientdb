{
  if (!iRequest.isMultipart) {
    iResponse.sendTextContent(iRequest,OHttpUtils.STATUS_INVALIDMETHOD_CODE,"Request is not multipart/form-data",null,OHttpUtils.CONTENT_TEXT_PLAIN,"Request is not multipart/form-data");
  }
 else   if (iRequest.multipartStream == null || iRequest.multipartStream.available() <= 0) {
    iResponse.sendTextContent(iRequest,OHttpUtils.STATUS_INVALIDMETHOD_CODE,"Content stream is null or empty",null,OHttpUtils.CONTENT_TEXT_PLAIN,"Content stream is null or empty");
  }
 else {
    database=getProfiledDatabaseInstance(iRequest);
    try {
      buffer=new StringWriter();
      writer=new OJSONWriter(buffer);
      writer.beginObject();
      parse(iRequest,iResponse,new OHttpMultipartContentBaseParser(),new OHttpMultipartFileToRecordContentParser(),database);
      saveRecord(iRequest,iResponse);
      writer.flush();
      iResponse.sendTextContent(iRequest,OHttpUtils.STATUS_OK_CODE,"OK",null,OHttpUtils.CONTENT_JSON,buffer.toString());
    }
  finally {
      if (database != null)       database.close();
      database=null;
      if (buffer != null)       buffer.close();
      buffer=null;
      if (writer != null)       writer.close();
      writer=null;
      fileDocument=null;
      fileName=null;
      fileType=null;
      if (fileRID != null)       fileRID.reset();
      fileRID=null;
    }
  }
  return false;
}
