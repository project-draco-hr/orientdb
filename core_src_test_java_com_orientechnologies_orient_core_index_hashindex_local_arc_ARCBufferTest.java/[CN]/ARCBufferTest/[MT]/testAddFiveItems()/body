{
  for (int i=0; i < 5; i++) {
    long pagePointer=buffer.loadAndLockForWrite("arcBufferTest",".tst",i);
    directMemory.set(pagePointer,new byte[]{(byte)i,1,2,3,4,5,6,(byte)i},8);
    buffer.releaseWriteLock("arcBufferTest",".tst",i);
  }
  assertFile(0,new byte[]{0,1,2,3,4,5,6,0});
  for (int i=1; i < 5; i++)   Assert.assertTrue(buffer.inFetchedOnceLRU("arcBufferTest.tst",i));
  Assert.assertEquals(buffer.getFilledUpTo("arcBufferTest",".tst"),5);
  buffer.flush();
  for (int i=0; i < 5; i++) {
    assertFile(i,new byte[]{(byte)i,1,2,3,4,5,6,(byte)i});
  }
}
