{
  database=new ODatabaseFlat(url);
  database.open("admin","admin");
  if (database.getMetadata().getSchema().existsClass("Account"))   return;
  database.getStorage().addCluster("csv",OClusterLocal.TYPE);
  database.getStorage().addCluster("flat",OClusterLocal.TYPE);
  database.getStorage().addCluster("binary",OClusterLocal.TYPE);
  OClass account=database.getMetadata().getSchema().createClass("Account",database.getStorage().addCluster("account",OClusterLocal.TYPE));
  account.createProperty("id",OType.INTEGER);
  account.createProperty("birthDate",OType.DATE);
  OClass profile=database.getMetadata().getSchema().createClass("Profile",database.getStorage().addCluster("profile",OClusterLocal.TYPE));
  profile.createProperty("nick",OType.STRING).setMin("3").setMax("30");
  profile.createProperty("name",OType.STRING).setMin("3").setMax("30").createIndex(true);
  profile.createProperty("surname",OType.STRING).setMin("3").setMax("30");
  profile.createProperty("registeredOn",OType.DATE).setMin("2010-01-01 00:00:00");
  profile.createProperty("lastAccessOn",OType.DATE).setMin("2010-01-01 00:00:00");
  OClass whiz=database.getMetadata().getSchema().createClass("Whiz");
  whiz.createProperty("id",OType.INTEGER);
  whiz.createProperty("account",OType.LINK,profile).setMandatory(true).setNotNull(true);
  whiz.createProperty("date",OType.DATE).setMin("2010-01-01 00:00:00");
  whiz.createProperty("text",OType.STRING).setMandatory(true).setMin("1").setMax("140");
  whiz.createProperty("replyTo",OType.LINK,profile);
  database.getMetadata().getSchema().save();
  database.close();
}
