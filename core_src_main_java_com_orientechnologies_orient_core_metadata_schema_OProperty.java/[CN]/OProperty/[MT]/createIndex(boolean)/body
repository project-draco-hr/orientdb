{
  if (!iUnique)   throw new UnsupportedOperationException("OrientDB supports only unique indexes. Contact the staff to know when no-unique indexes will be available");
  if (index != null)   throw new IllegalStateException("Index already created");
  try {
    index=new OTreeMapDatabase<String,ODocument>((ODatabaseRecord<?>)database,OStorage.CLUSTER_INDEX_NAME,OStreamSerializerString.INSTANCE,new OStreamSerializerAnyRecord((ODatabaseRecord<? extends ORecord<?>>)database));
    populateIndex();
    if (database != null)     index.save();
  }
 catch (  Exception e) {
    OLogManager.instance().exception("Unable to create %s index for property %s",e,ODatabaseException.class,iUnique ? "unique" : "not unique",toString());
  }
  return index;
}
