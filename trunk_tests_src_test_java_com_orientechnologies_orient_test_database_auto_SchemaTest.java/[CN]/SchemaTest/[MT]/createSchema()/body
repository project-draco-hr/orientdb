{
  database=new ODatabaseFlat(url);
  database.open("admin","admin");
  if (database.getMetadata().getSchema().existsClass("Animal"))   return;
  database.getStorage().addCluster("csv");
  database.getStorage().addCluster("binary");
  OClass person=database.getMetadata().getSchema().createClass("Person",database.getStorage().addCluster("person"));
  OClass animal=database.getMetadata().getSchema().createClass("Animal",database.getStorage().addCluster("animal"));
  animal.createProperty("id",OType.INTEGER).setMandatory(true);
  animal.createProperty("name",OType.STRING).setMin("3").setMax("30");
  animal.createProperty("type",OType.STRING);
  animal.createProperty("race",OType.STRING);
  animal.createProperty("location",OType.STRING);
  animal.createProperty("price",OType.FLOAT).setMin("0");
  OClass race=database.getMetadata().getSchema().createClass("AnimalRace");
  race.createProperty("name",OType.STRING).setMandatory(true).setMin("3");
  OClass animalType=database.getMetadata().getSchema().createClass("AnimalType");
  animalType.createProperty("name",OType.STRING).setMandatory(true);
  animalType.createProperty("races",OType.EMBEDDEDSET,race);
  OClass orderItem=database.getMetadata().getSchema().createClass("OrderItem");
  orderItem.createProperty("id",OType.INTEGER);
  orderItem.createProperty("animal",OType.LINK,animal);
  orderItem.createProperty("quantity",OType.INTEGER).setMin("1");
  orderItem.createProperty("price",OType.FLOAT).setMin("0");
  OClass order=database.getMetadata().getSchema().createClass("Order");
  order.createProperty("id",OType.INTEGER).setMandatory(true);
  order.createProperty("date",OType.DATE).setMin("2009-01-01 00:00:00");
  order.createProperty("customer",OType.STRING);
  order.createProperty("items",OType.EMBEDDEDLIST,orderItem);
  order.createProperty("totalPrice",OType.FLOAT);
  database.getMetadata().getSchema().save();
  database.close();
}
