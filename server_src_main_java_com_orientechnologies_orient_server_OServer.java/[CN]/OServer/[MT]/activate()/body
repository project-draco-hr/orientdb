{
  try {
    for (    OServerLifecycleListener l : lifecycleListeners)     l.onBeforeActivate();
    if (configuration.network != null) {
      if (configuration.network.sockets != null) {
        for (        OServerSocketFactoryConfiguration f : configuration.network.sockets) {
          Class<? extends OServerSocketFactory> fClass=(Class<? extends OServerSocketFactory>)loadClass(f.implementation);
          OServerSocketFactory factory=fClass.newInstance();
          try {
            factory.config(f.name,f.parameters);
            networkSocketFactories.put(f.name,factory);
          }
 catch (          OConfigurationException e) {
            OLogManager.instance().error(this,"Error creating socket factory",e);
          }
        }
      }
      for (      OServerNetworkProtocolConfiguration p : configuration.network.protocols)       networkProtocols.put(p.name,(Class<? extends ONetworkProtocol>)loadClass(p.implementation));
      for (      OServerNetworkListenerConfiguration l : configuration.network.listeners)       networkListeners.add(new OServerNetworkListener(this,networkSocketFactories.get(l.socket),l.ipAddress,l.portRange,l.protocol,networkProtocols.get(l.protocol),l.parameters,l.commands));
    }
 else     OLogManager.instance().warn(this,"Network configuration was not found");
    try {
      loadStorages();
      loadUsers();
    }
 catch (    IOException e) {
      OLogManager.instance().error(this,"Error on reading server configuration",e,OConfigurationException.class);
    }
    registerPlugins();
    for (    OServerLifecycleListener l : lifecycleListeners)     l.onAfterActivate();
    running=true;
    OLogManager.instance().info(this,"OrientDB Server v" + OConstants.getVersion() + " is active.");
  }
 catch (  ClassNotFoundException e) {
    running=false;
    throw e;
  }
catch (  InstantiationException e) {
    running=false;
    throw e;
  }
catch (  IllegalAccessException e) {
    running=false;
    throw e;
  }
catch (  RuntimeException e) {
    running=false;
    throw e;
  }
 finally {
    startupLatch.countDown();
  }
  return this;
}
