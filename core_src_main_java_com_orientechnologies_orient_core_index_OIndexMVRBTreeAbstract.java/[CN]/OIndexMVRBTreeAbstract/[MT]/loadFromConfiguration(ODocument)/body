{
  acquireExclusiveLock();
  try {
    final ORID rid=(ORID)iConfig.field(CONFIG_MAP_RID,ORID.class);
    if (rid == null)     return null;
    configuration=iConfig;
    name=configuration.field(OIndexInternal.CONFIG_NAME);
    automatic=(Boolean)(configuration.field(OIndexInternal.CONFIG_AUTOMATIC) != null ? configuration.field(OIndexInternal.CONFIG_AUTOMATIC) : true);
    final String configuredKeyType=configuration.field(OIndexInternal.CONFIG_KEYTYPE);
    if (configuredKeyType != null)     keyType=OType.valueOf(configuredKeyType.toUpperCase(Locale.ENGLISH));
    clustersToIndex.clear();
    final Collection<? extends String> clusters=configuration.field(CONFIG_CLUSTERS);
    if (clusters != null)     clustersToIndex.addAll(clusters);
    map=new OMVRBTreeDatabaseLazySave<Object,T>(getDatabase(),rid);
    map.load();
    installHooks(iConfig.getDatabase());
    return this;
  }
  finally {
    releaseExclusiveLock();
  }
}
