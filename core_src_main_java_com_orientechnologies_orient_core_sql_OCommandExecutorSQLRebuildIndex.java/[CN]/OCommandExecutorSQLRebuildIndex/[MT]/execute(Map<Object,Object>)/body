{
  if (name == null)   throw new OCommandExecutionException("Can't execute the command because it hasn't been parsed yet");
  if (name.equals("*")) {
    long totalIndexed=0;
    for (    OIndex<?> idx : database.getMetadata().getIndexManager().getIndexes()) {
      if (idx.isAutomatic())       totalIndexed+=idx.rebuild();
    }
    return totalIndexed;
  }
 else {
    final OIndex<?> idx=database.getMetadata().getIndexManager().getIndex(name);
    if (idx == null)     throw new OCommandExecutionException("Index '" + name + "' not found");
    if (!idx.isAutomatic())     throw new OCommandExecutionException("Can't rebuild index '" + name + "' because it's manual and there aren't indications of what to index");
    return idx.rebuild();
  }
}
