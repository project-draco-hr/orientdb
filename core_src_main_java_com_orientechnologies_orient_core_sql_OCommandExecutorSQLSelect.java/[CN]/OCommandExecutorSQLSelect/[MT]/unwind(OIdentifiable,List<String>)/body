{
  List<OIdentifiable> result=new ArrayList<OIdentifiable>();
  if (unwindFields.size() == 0) {
    result.add(iRecord);
  }
 else {
    String firstField=unwindFields.get(0);
    List<String> nextFields=unwindFields.subList(1,unwindFields.size());
    ODocument doc;
    if (iRecord instanceof ODocument) {
      doc=(ODocument)iRecord;
    }
 else {
      doc=iRecord.getRecord();
    }
    Object fieldValue=doc.field(firstField);
    if (fieldValue == null || !(fieldValue instanceof Iterable)) {
      result.addAll(unwind(doc,nextFields));
    }
 else {
      for (      Object o : (Iterable)fieldValue) {
        ODocument unwindedDoc=new ODocument();
        doc.copyTo(unwindedDoc);
        unwindedDoc.field(firstField,o);
        result.addAll(unwind(unwindedDoc,nextFields));
      }
    }
  }
  return result;
}
