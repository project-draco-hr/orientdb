{
  if (!super.equals(obj))   return false;
  if (!recordId.isValid()) {
    final ORecordVirtualAbstract other=(ORecordVirtualAbstract)obj;
    if (fields == null || other.fields == null)     return false;
    if (fields.size() != other.fields.size())     return false;
    String k;
    Object v;
    Object otherV;
    for (    Entry<String,T> field : fields.entrySet()) {
      k=field.getKey();
      if (k != null && !other.containsField(k))       return false;
      v=fields.get(k);
      otherV=other.fields.get(k);
      if (v == null && otherV == null)       continue;
      if (v == null && otherV != null || otherV == null && v != null)       return false;
      if (!v.equals(otherV))       return false;
    }
  }
  return true;
}
