{
  final int pos=position;
  final byte[] result=new byte[pos];
  final byte[] mbuf=buffer;
  if (pos < NATIVE_COPY_THRESHOLD)   for (int i=0; i < pos; ++i)   result[i]=mbuf[i];
 else   System.arraycopy(mbuf,0,result,0,pos);
  return result;
}
