{
  final String[] parts=checkSyntax(iRequest.url,2,"Syntax error: profiler/<query>/[<from>/<to>]");
  iRequest.data.commandInfo="Profiler information";
  try {
    StringWriter jsonBuffer=new StringWriter();
    OJSONWriter json=new OJSONWriter(jsonBuffer);
    final String to=parts.length > 2 ? parts[2] : null;
    final String from=parts.length > 3 ? parts[3] : null;
    json.append(OProfiler.getInstance().toJSON(parts[1],from,to));
    sendTextContent(iRequest,OHttpUtils.STATUS_OK_CODE,"OK",null,OHttpUtils.CONTENT_JSON,jsonBuffer.toString());
  }
 catch (  Exception e) {
    sendTextContent(iRequest,OHttpUtils.STATUS_BADREQ_CODE,OHttpUtils.STATUS_BADREQ_DESCRIPTION,null,OHttpUtils.CONTENT_TEXT_PLAIN,e);
  }
  return false;
}
