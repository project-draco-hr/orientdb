{
  acquireExclusiveLock();
  try {
    clearMetadata();
    final Collection<ODocument> idxs=document.field(CONFIG_INDEXES);
    if (idxs != null) {
      for (      ODocument d : idxs) {
        try {
          OIndexInternal<?> newIndex=OIndexes.createIndex(getDatabase(),(String)d.field(OIndexInternal.CONFIG_TYPE),document.<String>field(OIndexInternal.ALGORITHM),document.<String>field(OIndexInternal.VALUE_CONTAINER_ALGORITHM));
          OIndexInternal.IndexMetadata newIndexMetadata=newIndex.loadMetadata(d);
          addIndexInternal(getRemoteIndexInstance(newIndex instanceof OIndexMultiValues,newIndexMetadata.getType(),newIndexMetadata.getName(),newIndexMetadata.getClustersToIndex(),newIndexMetadata.getIndexDefinition(),(ORID)d.field(OIndexAbstract.CONFIG_MAP_RID,OType.LINK),d));
        }
 catch (        Exception e) {
          OLogManager.instance().error(this,"Error on loading of index by configuration: %s",e,d);
        }
      }
    }
  }
  finally {
    releaseExclusiveLock();
  }
}
