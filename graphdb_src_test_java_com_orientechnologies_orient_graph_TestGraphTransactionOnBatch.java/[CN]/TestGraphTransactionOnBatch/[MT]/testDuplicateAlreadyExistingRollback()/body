{
  OClass clazz=db.getMetadata().getSchema().createClass("Test");
  clazz.setSuperClass(V);
  clazz.createProperty("id",OType.STRING).createIndex(INDEX_TYPE.UNIQUE);
  db.command(new OCommandSQL("create vertex Test SET id = \"12345678\"")).execute();
  try {
    db.command(new OCommandScript("sql","BEGIN \n LET a = create vertex Test SET id = \"12345678\" \n RETURN $a \n COMMIT")).execute();
    Assert.fail("expected record duplicate exception");
  }
 catch (  ORecordDuplicatedException ex) {
  }
  List<ODocument> res=db.query(new OSQLSynchQuery("select from Test"));
  Assert.assertEquals(1,res.size());
}
