{
  while (target.hasNext()) {
    field=target.next();
    final Object fieldValue;
    if (field instanceof OSQLFilterItem)     fieldValue=((OSQLFilterItem)field).getValue(doc,null,null);
 else     fieldValue=doc.rawField(field.toString());
    if (fieldValue != null) {
      final OTraverseAbstractProcess<?> subProcess;
      if (fieldValue instanceof Iterator<?> || OMultiValue.isMultiValue(fieldValue)) {
        final Iterator<Object> coll=OMultiValue.getMultiValueIterator(fieldValue);
        subProcess=new OTraverseMultiValueProcess(command,coll,getPath());
      }
 else       if (fieldValue instanceof OIdentifiable && ((OIdentifiable)fieldValue).getRecord() instanceof ODocument) {
        subProcess=new OTraverseRecordProcess(command,(ODocument)((OIdentifiable)fieldValue).getRecord(),parentPath);
      }
 else       continue;
      command.getContext().push(subProcess);
      return null;
    }
  }
  return drop();
}
