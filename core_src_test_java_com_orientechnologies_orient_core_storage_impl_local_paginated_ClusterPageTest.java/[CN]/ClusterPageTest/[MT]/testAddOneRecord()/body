{
  long pagePointer=directMemory.allocate(new byte[OClusterPage.PAGE_SIZE]);
  try {
    OClusterPage localPage=new OClusterPage(pagePointer,true,ODurablePage.TrackMode.FULL);
    int freeSpace=localPage.getFreeSpace();
    Assert.assertEquals(localPage.getRecordsCount(),0);
    ORecordVersion recordVersion=OVersionFactory.instance().createVersion();
    recordVersion.increment();
    int position=localPage.appendRecord(recordVersion,new byte[]{1,2,3,4,5,6,5,4,3,2,1},false);
    Assert.assertEquals(localPage.getRecordsCount(),1);
    Assert.assertEquals(localPage.getRecordSize(0),11);
    Assert.assertEquals(position,0);
    Assert.assertEquals(localPage.getFreeSpace(),freeSpace - (27 + OVersionFactory.instance().getVersionSize()));
    Assert.assertFalse(localPage.isDeleted(0));
    Assert.assertEquals(localPage.getRecordVersion(0),recordVersion);
    int pageOffset=localPage.getRecordPageOffset(0);
    Assert.assertEquals(localPage.getBinaryValue(pageOffset,11),new byte[]{1,2,3,4,5,6,5,4,3,2,1});
    assertChangesTracking(localPage,pagePointer);
  }
  finally {
    directMemory.free(pagePointer);
  }
}
