{
  acquireExclusiveLock();
  try {
    final int keySize;
    if (indexDefinition == null || indexDefinition instanceof ORuntimeKeyIndexDefinition)     keySize=1;
 else     keySize=indexDefinition.getTypes().length;
    sbTree=new OSBTree<Object,V>(DATA_FILE_EXTENSION,keySize,OGlobalConfiguration.INDEX_DURABLE_IN_NON_TX_MODE.getValueAsBoolean());
    ODatabaseRecord database=getDatabase();
    final OStorageLocalAbstract storageLocalAbstract=(OStorageLocalAbstract)database.getStorage().getUnderlying();
    sbTree.load(indexName,indexDefinition != null ? indexDefinition.getTypes() : null,storageLocalAbstract);
  }
  finally {
    releaseExclusiveLock();
  }
}
