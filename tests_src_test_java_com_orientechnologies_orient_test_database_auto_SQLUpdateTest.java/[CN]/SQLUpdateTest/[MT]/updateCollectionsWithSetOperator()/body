{
  database.open("admin","admin");
  List<ODocument> docs=database.query(new OSQLSynchQuery<ODocument>("select from Account"));
  for (  ODocument doc : docs) {
    final int records=(Integer)database.command(new OCommandSQL("update Account set addresses = [#12:0, #12:1,#12:2] where @rid = " + doc.getIdentity())).execute();
    Assert.assertEquals(records,1);
    ODocument loadedDoc=database.load(doc.getIdentity(),"*:-1",true);
    Assert.assertEquals(((List<?>)loadedDoc.field("addresses")).size(),3);
    Assert.assertEquals(((OIdentifiable)((List<?>)loadedDoc.field("addresses")).get(0)).getIdentity().toString(),"#12:0");
    loadedDoc.field("addresses",doc.field("addresses"));
    database.save(loadedDoc);
  }
  database.close();
}
