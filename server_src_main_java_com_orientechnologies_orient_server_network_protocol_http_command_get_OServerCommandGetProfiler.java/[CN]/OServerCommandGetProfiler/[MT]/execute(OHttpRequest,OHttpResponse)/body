{
  final String[] parts=checkSyntax(iRequest.url,2,"Syntax error: profiler/<command>/[<config>]|[<from>/<to>]");
  iRequest.data.commandInfo="Profiler information";
  try {
    final String command=parts[1];
    if (command.equalsIgnoreCase("start")) {
      Orient.instance().getProfiler().startRecording();
      iResponse.send(OHttpUtils.STATUS_OK_CODE,"OK",OHttpUtils.CONTENT_TEXT_PLAIN,"Recording started",null);
    }
 else     if (command.equalsIgnoreCase("stop")) {
      Orient.instance().getProfiler().stopRecording();
      iResponse.send(OHttpUtils.STATUS_OK_CODE,"OK",OHttpUtils.CONTENT_TEXT_PLAIN,"Recording stopped",null);
    }
 else     if (command.equalsIgnoreCase("configure")) {
      Orient.instance().getProfiler().configure(parts[2]);
      iResponse.send(OHttpUtils.STATUS_OK_CODE,"OK",OHttpUtils.CONTENT_TEXT_PLAIN,"Profiler configured with: " + parts[2],null);
    }
 else     if (command.equalsIgnoreCase("status")) {
      final String status=Orient.instance().getProfiler().isRecording() ? "on" : "off";
      iResponse.send(OHttpUtils.STATUS_OK_CODE,"OK",OHttpUtils.CONTENT_TEXT_PLAIN,status,null);
    }
 else     if (command.equalsIgnoreCase("metadata")) {
      iResponse.send(OHttpUtils.STATUS_OK_CODE,"OK",OHttpUtils.CONTENT_JSON,Orient.instance().getProfiler().metadataToJSON(),null);
    }
 else {
      final String par1=parts.length > 2 ? parts[2] : null;
      final String par2=parts.length > 3 ? parts[3] : null;
      StringWriter jsonBuffer=new StringWriter();
      OJSONWriter json=new OJSONWriter(jsonBuffer);
      json.append(Orient.instance().getProfiler().toJSON(command,par1,par2));
      iResponse.send(OHttpUtils.STATUS_OK_CODE,"OK",OHttpUtils.CONTENT_JSON,jsonBuffer.toString(),null);
    }
  }
 catch (  Exception e) {
    iResponse.send(OHttpUtils.STATUS_BADREQ_CODE,OHttpUtils.STATUS_BADREQ_DESCRIPTION,OHttpUtils.CONTENT_TEXT_PLAIN,e,null);
  }
  return false;
}
