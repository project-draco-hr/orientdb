{
  Set<Document> deletedDocs=queryContext.changes().getDeletedDocs();
  MemoryIndex memoryIndex=new MemoryIndex();
  int match=0;
  for (  Document doc : deletedDocs) {
    memoryIndex.reset();
    for (    IndexableField field : doc.getFields()) {
      if (field.stringValue() != null) {
        memoryIndex.addField(field.name(),field.stringValue(),manager.indexAnalyzer());
      }
 else {
        try {
          memoryIndex.addField(field.name(),field.tokenStream(manager.indexAnalyzer(),null));
        }
 catch (        IOException e) {
          e.printStackTrace();
        }
      }
    }
    if (queryContext.filter != null) {
      try {
        TopDocs topDocs1=memoryIndex.createSearcher().search(query,queryContext.filter,1);
        match+=topDocs1.totalHits;
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
 else {
      match+=(memoryIndex.search(query) > 0.0f) ? 1 : 0;
    }
  }
  return match;
}
