{
  OWALRecordsFactory.INSTANCE.registerNewRecord((byte)128,WriteAheadLogTest.TestRecord.class);
  String buildDirectory=System.getProperty("buildDirectory");
  if (buildDirectory == null || buildDirectory.isEmpty())   buildDirectory=".";
  testDir=new File(buildDirectory,"WriteAheadLogConcurrencyTest");
  if (!testDir.exists())   testDir.mkdir();
  OLocalPaginatedStorage localPaginatedStorage=mock(OLocalPaginatedStorage.class);
  when(localPaginatedStorage.getStoragePath()).thenReturn(testDir.getAbsolutePath());
  when(localPaginatedStorage.getName()).thenReturn("WriteAheadLogConcurrencyTest");
  writeAheadLog=new OWriteAheadLog(200,500,OWALPage.PAGE_SIZE * 800,100L * 1024L * 1024L* 1024L,localPaginatedStorage);
  writerExecutor=Executors.newCachedThreadPool();
}
