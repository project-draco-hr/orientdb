{
  acquireExclusiveLock();
  try {
    configuration.setInternalStatus(ORecordElement.STATUS.UNMARSHALLING);
    try {
      configuration.field(OIndexInternal.CONFIG_TYPE,type);
      configuration.field(OIndexInternal.CONFIG_NAME,name);
      configuration.field(OIndexInternal.CONFIG_AUTOMATIC,automatic);
      if (keyType != null)       configuration.field(OIndexInternal.CONFIG_KEYTYPE,keyType.toString());
      configuration.field(CONFIG_CLUSTERS,clustersToIndex,OType.EMBEDDEDSET);
      configuration.field(CONFIG_MAP_RID,map.getRecord().getIdentity());
    }
  finally {
      configuration.setInternalStatus(ORecordElement.STATUS.LOADED);
    }
  }
  finally {
    releaseExclusiveLock();
  }
  return configuration;
}
