{
  final Set<OTransactionRecordEntry> allEntries=new HashSet<OTransactionRecordEntry>();
  final List<OTransactionRecordEntry> tmpEntries=new ArrayList<OTransactionRecordEntry>();
  while (iTx.getCurrentRecordEntries().iterator().hasNext()) {
    for (    OTransactionRecordEntry txEntry : iTx.getCurrentRecordEntries())     if (!allEntries.contains(txEntry))     tmpEntries.add(txEntry);
    iTx.clearRecordEntries();
    if (tmpEntries.size() > 0) {
      for (      OTransactionRecordEntry txEntry : tmpEntries)       commitEntry(iTx,txEntry,iTx.isUsingLog());
      allEntries.addAll(tmpEntries);
      tmpEntries.clear();
    }
  }
  OTransactionAbstract.updateCacheFromEntries(storage,iTx,allEntries,true);
  allEntries.clear();
}
