{
  final Map<OProperty,String> indexedProperties=getIndexedProperties(iRecord);
  if (indexedProperties != null) {
    ODocument doc=(ODocument)iRecord;
    final Set<String> dirtyFields=doc.getDirtyFields();
    if (dirtyFields != null && dirtyFields.size() > 0) {
      for (      Entry<OProperty,String> propEntry : indexedProperties.entrySet()) {
        if (dirtyFields.contains(propEntry.getKey().getName())) {
          propEntry.getKey().getIndex().remove(propEntry.getValue());
          propEntry.getKey().getIndex().lazySave();
        }
      }
      for (      Entry<OProperty,String> propEntry : indexedProperties.entrySet()) {
        if (dirtyFields.contains(propEntry.getKey().getName())) {
          propEntry.getKey().getIndex().put(propEntry.getValue(),(ORecordId)iRecord.getIdentity());
          propEntry.getKey().getIndex().lazySave();
        }
      }
    }
  }
}
