{
  final OBinarySerializer<K> keySerializer=((OMVRBTreeMapProvider<K,V>)treeDataProvider).keySerializer;
  if (serializedKeys[i] <= 0) {
    Orient.instance().getProfiler().updateCounter("OMVRBTreeMapEntry.serializeKey",1);
    keySerializer.serialize(keys[i],newBuffer,offset);
    offset+=keySerializer.getObjectSize(keys[i]);
  }
 else {
    final int size=keySerializer.getObjectSize(buffer,serializedKeys[i]);
    System.arraycopy(buffer,serializedKeys[i],newBuffer,offset,size);
    serializedKeys[i]=offset;
    offset+=size;
  }
  return offset;
}
