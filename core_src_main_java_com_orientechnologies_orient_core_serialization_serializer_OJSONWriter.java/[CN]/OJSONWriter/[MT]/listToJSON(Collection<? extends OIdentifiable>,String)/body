{
  final StringWriter buffer=new StringWriter();
  final OJSONWriter json=new OJSONWriter(buffer);
  json.beginCollection(0,false,null);
  if (iRecords != null) {
    int counter=0;
    String objectJson;
    for (    OIdentifiable rec : iRecords) {
      if (rec != null)       try {
        objectJson=rec.getRecord().toJSON(iFormat);
        if (counter++ > 0)         buffer.append(", ");
        buffer.append(objectJson);
      }
 catch (      Exception e) {
        OLogManager.instance().error(json,"Error transforming record " + rec.getIdentity() + " to JSON",e);
      }
    }
  }
  json.endCollection(0,false);
  return buffer.toString();
}
