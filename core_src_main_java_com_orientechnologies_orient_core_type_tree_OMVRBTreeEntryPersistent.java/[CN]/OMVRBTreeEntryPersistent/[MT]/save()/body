{
  if (!dataProvider.isEntryDirty())   return this;
  final boolean isNew=dataProvider.getIdentity().isNew();
  if (left != null && left.dataProvider.getIdentity().isNew()) {
    if (isNew) {
      left.dataProvider.save();
      left.updateRefsAfterCreation();
    }
 else     left.save();
  }
  if (right != null && right.dataProvider.getIdentity().isNew()) {
    if (isNew) {
      right.dataProvider.save();
      right.updateRefsAfterCreation();
    }
 else     right.save();
  }
  if (parent != null && parent.dataProvider.getIdentity().isNew()) {
    if (isNew) {
      parent.dataProvider.save();
      parent.updateRefsAfterCreation();
    }
 else     parent.save();
  }
  dataProvider.save();
  if (isNew)   updateRefsAfterCreation();
  checkEntryStructure();
  if (pTree.searchNodeInCache(dataProvider.getIdentity()) != this) {
    pTree.addNodeInMemory(this);
  }
  return this;
}
