{
  checkIfAttached();
  if (!settings.useVertexFieldsForEdgeLabels && label != null)   return false;
  if (settings.useLightweightEdges && (fields == null || fields.length == 0 || fields[0] == null)) {
    Object field=iFromVertex.field(iOutFieldName);
    if (field != null)     if (field instanceof Collection<?>)     if (((Collection<Object>)field).contains(iToVertex)) {
      new OrientEdge(graph,iFromVertex,iToVertex,label).convertToDocument();
      return false;
    }
    field=iToVertex.field(iInFieldName);
    if (field != null)     if (field instanceof Collection<?>)     if (((Collection<Object>)field).contains(iFromVertex)) {
      new OrientEdge(graph,iFromVertex,iToVertex,label).convertToDocument();
      return false;
    }
    if (settings.useClassForEdgeLabel) {
      final OClass cls=graph.getEdgeType(label);
      if (cls != null)       for (      OProperty p : cls.properties()) {
        if (p.isMandatory() || p.isNotNull())         return false;
      }
    }
    return true;
  }
  return false;
}
