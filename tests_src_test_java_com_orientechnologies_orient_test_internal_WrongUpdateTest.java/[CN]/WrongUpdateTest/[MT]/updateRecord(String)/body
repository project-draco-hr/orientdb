{
  ODatabaseDocumentTx database=new ODatabaseDocumentTx("plocal:indexExceptionTest");
  database.open("admin","admin");
  try {
    int numRetries=0;
    while (numRetries < NUM_RETRIES) {
      try {
        ODocument document=findById(database,id);
        document.field("test","test updated");
        database.save(document);
        break;
      }
 catch (      Throwable e) {
        System.out.println("********************************");
        System.out.println("Update Iteration=" + numRetries + ", id="+ id+ ", "+ e.toString());
        System.out.println("********************************");
        if (numRetries++ == NUM_RETRIES) {
          throw e;
        }
      }
    }
  }
  finally {
    if (database != null && !database.isClosed()) {
      database.close();
    }
  }
}
