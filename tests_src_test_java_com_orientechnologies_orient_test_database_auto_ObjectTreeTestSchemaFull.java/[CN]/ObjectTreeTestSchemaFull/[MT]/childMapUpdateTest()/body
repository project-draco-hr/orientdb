{
  OObjectDatabaseTx database=OObjectDatabasePool.global().acquire(url,"admin","admin");
  Planet p=database.newInstance(Planet.class);
  p.setName("Earth");
  p.setDistanceSun(1000);
  Satellite sat=database.newInstance(Satellite.class);
  sat.setDiameter(50);
  sat.setName("Moon");
  p.addSatelliteMap(sat);
  database.save(p);
  Assert.assertEquals(p.getDistanceSun(),1000);
  Assert.assertEquals(p.getName(),"Earth");
  ORID rid=database.getIdentity(p);
  database.close();
  database=OObjectDatabasePool.global().acquire(url,"admin","admin");
  p=database.load(rid);
  sat=p.getSatellitesMap().get("Moon");
  Assert.assertEquals(p.getDistanceSun(),1000);
  Assert.assertEquals(p.getName(),"Earth");
  Assert.assertEquals(sat.getDiameter(),50);
  sat.setDiameter(500);
  database.save(p);
  database.close();
  database=OObjectDatabasePool.global().acquire(url,"admin","admin");
  p=database.load(rid);
  sat=p.getSatellitesMap().get("Moon");
  Assert.assertEquals(sat.getDiameter(),500);
  Assert.assertEquals(p.getDistanceSun(),1000);
  Assert.assertEquals(p.getName(),"Earth");
  database.close();
}
