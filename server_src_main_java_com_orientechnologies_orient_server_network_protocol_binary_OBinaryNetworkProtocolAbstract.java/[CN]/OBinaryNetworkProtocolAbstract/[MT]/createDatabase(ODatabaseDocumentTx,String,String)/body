{
  if (iDatabase.exists())   throw new ODatabaseException("Database '" + iDatabase.getURL() + "' already exists");
  iDatabase.create();
  if (dbUser != null) {
    OUser oUser=iDatabase.getMetadata().getSecurity().getUser(dbUser);
    if (oUser == null) {
      iDatabase.getMetadata().getSecurity().createUser(dbUser,dbPasswd,new String[]{ORole.ADMIN});
    }
 else {
      oUser.setPassword(dbPasswd);
      oUser.save();
    }
  }
  OLogManager.instance().info(this,"Created database '%s' of type '%s'",iDatabase.getName(),iDatabase.getStorage() instanceof OStorageLocalAbstract ? "local" : "memory");
  return iDatabase;
}
