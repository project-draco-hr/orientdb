{
  lock.acquireExclusiveLock();
  try {
    final long start=System.currentTimeMillis();
    boolean result=diskCache.checkStoredPages(verbose ? listener : null);
    listener.onMessage("Check of storage completed in " + (System.currentTimeMillis() - start) + "ms. "+ (!result ? " with errors." : " without errors."));
    return result;
  }
  finally {
    lock.releaseExclusiveLock();
  }
}
