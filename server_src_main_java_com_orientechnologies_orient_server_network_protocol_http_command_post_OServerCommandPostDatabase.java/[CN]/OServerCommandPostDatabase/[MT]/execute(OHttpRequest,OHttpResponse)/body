{
  String[] urlParts=checkSyntax(iRequest.url,3,"Syntax error: database/<db>/<type>");
  iRequest.data.commandInfo="Create database";
  try {
    final String databaseName=urlParts[1].replace(OServerCommandAuthenticatedDbAbstract.DBNAME_DIR_SEPARATOR,'/');
    final String storageMode=urlParts[2];
    String url=getStoragePath(databaseName,storageMode);
    final String type=urlParts.length > 3 ? urlParts[3] : "document";
    if (url != null) {
      final ODatabaseDocumentTx database=Orient.instance().getDatabaseFactory().createDatabase(type,url);
      if (database.exists())       throw new ODatabaseException("Database '" + database.getURL() + "' already exists");
      for (      OStorage stg : Orient.instance().getStorages()) {
        if (stg.getName().equalsIgnoreCase(database.getName()) && stg.exists())         throw new ODatabaseException("Database named '" + database.getName() + "' already exists: "+ stg);
      }
      OLogManager.instance().info(this,"Creating database " + url);
      database.create();
      sendDatabaseInfo(iRequest,iResponse,database);
    }
 else {
      throw new OCommandExecutionException("The '" + storageMode + "' storage mode does not exists.");
    }
  }
  finally {
  }
  return false;
}
