{
  acquireWriteLock();
  try {
    if (headerDirty || dirty) {
      headerDirty=dirty=false;
      channel.force(false);
    }
  }
  finally {
    releaseWriteLock();
  }
}
