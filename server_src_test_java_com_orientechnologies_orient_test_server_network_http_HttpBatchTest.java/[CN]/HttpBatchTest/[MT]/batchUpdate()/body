{
  Assert.assertEquals(post("command/" + getDatabaseName() + "/sql/").payload("create class User",CONTENT.TEXT).getResponse().getStatusLine().getStatusCode(),200);
  Assert.assertEquals(post("command/" + getDatabaseName() + "/sql/").payload("insert into User content {\"userID\": \"35862601\"}",CONTENT.TEXT).setUserName("admin").setUserPassword("admin").getResponse().getStatusLine().getStatusCode(),200);
  String response=EntityUtils.toString(getResponse().getEntity());
  Assert.assertNotNull(response);
  ODocument insertedDocument=((List<ODocument>)new ODocument().fromJSON(response).field("result")).get(0);
  Assert.assertEquals(post("batch/" + getDatabaseName() + "/sql/").payload("{\n" + "    \"transaction\": true,\n" + "    \"operations\": [{\n"+ "        \"record\": {\n"+ "            \"userID\": \"35862601\",\n"+ "            \"externalID\": \"35862601\",\n"+ "            \"@rid\": \"" + insertedDocument.getIdentity() + "\", \"@class\": \"User\", \"@version\": "+ insertedDocument.getVersion()+ "\n"+ "        },\n"+ "        \"type\": \"u\"\n"+ "    }]\n"+ "}",CONTENT.JSON).getResponse().getStatusLine().getStatusCode(),200);
  Assert.assertEquals(post("batch/" + getDatabaseName() + "/sql/").payload("{\n" + "    \"transaction\": true,\n" + "    \"operations\": [{\n"+ "        \"record\": {\n"+ "            \"userID\": \"35862601\",\n"+ "            \"externalID\": \"35862601\",\n"+ "            \"@rid\": \"" + insertedDocument.getIdentity() + "\", \"@class\": \"User\", \"@version\": "+ (insertedDocument.getVersion() + 1)+ "\n"+ "        },\n"+ "        \"type\": \"u\"\n"+ "    }]\n"+ "}",CONTENT.JSON).getResponse().getStatusLine().getStatusCode(),200);
  Assert.assertEquals(post("batch/" + getDatabaseName() + "/sql/").payload("{\n" + "    \"transaction\": true,\n" + "    \"operations\": [{\n"+ "        \"record\": {\n"+ "            \"userID\": \"35862601\",\n"+ "            \"externalID\": \"35862601\",\n"+ "            \"@rid\": \"" + insertedDocument.getIdentity() + "\", \"@class\": \"User\", \"@version\": "+ (insertedDocument.getVersion() + 1)+ "\n"+ "        },\n"+ "        \"type\": \"u\"\n"+ "    }]\n"+ "}",CONTENT.JSON).getResponse().getStatusLine().getStatusCode(),409);
  batchWithEmpty();
}
