{
  ODistributedThreadLocal.INSTANCE.set("");
  try {
    final ORecordInternal<?> record=Orient.instance().getRecordFactoryManager().newInstance(iRecordType);
    final ODatabaseDocumentTx database=openDatabase(storageName);
    try {
      record.fill(iRecordId,iRecordVersion,iContent,true);
      if (iRecordId.getClusterId() == -1)       record.save(true);
 else       record.save(database.getClusterNameById(iRecordId.getClusterId()),true);
      return new OPhysicalPosition(record.getIdentity().getClusterPosition(),record.getRecordVersion());
    }
  finally {
      closeDatabase(database);
    }
  }
  finally {
    ODistributedThreadLocal.INSTANCE.set(null);
  }
}
