{
  long counter=0;
  for (  OHashTable<Object,Object> p : partitions) {
    if (transformer == null)     counter+=p.size();
 else {
      OHashIndexBucket.Entry<Object,Object> firstEntry=p.firstEntry();
      if (firstEntry == null)       return 0;
      OHashIndexBucket.Entry<Object,Object>[] entries=p.ceilingEntries(firstEntry.key);
      while (entries.length > 0) {
        for (        OHashIndexBucket.Entry<Object,Object> entry : entries)         counter+=transformer.transformFromValue(entry.value).size();
        entries=p.higherEntries(entries[entries.length - 1].key);
      }
    }
  }
  return counter;
}
