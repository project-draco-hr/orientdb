{
  SecretKeySpec secret=getSecretKeySpec();
  try {
    Cipher cipher=getCipher();
    cipher.init(Cipher.DECRYPT_MODE,secret,new IvParameterSpec(iv));
    byte[] contentToDecrypt;
    if (offset == 0 && length == content.length) {
      contentToDecrypt=content;
    }
 else {
      contentToDecrypt=new byte[length];
      System.arraycopy(content,offset,contentToDecrypt,0,length);
    }
    return cipher.doFinal(contentToDecrypt);
  }
 catch (  NoSuchAlgorithmException e) {
    throw new OSecurityException(e.getMessage(),e);
  }
catch (  NoSuchPaddingException e) {
    throw new OSecurityException(e.getMessage(),e);
  }
catch (  IllegalArgumentException e) {
    throw e;
  }
catch (  InvalidKeyException e) {
    throw new OSecurityException(e.getMessage(),e);
  }
catch (  IllegalBlockSizeException e) {
    throw new IllegalArgumentException(e.getMessage(),e);
  }
catch (  BadPaddingException e) {
    throw new OSecurityException("The given 'salt' could be wrong (" + e.getMessage() + ")",e);
  }
catch (  InvalidAlgorithmParameterException e) {
    throw new OSecurityException(e.getMessage(),e);
  }
}
