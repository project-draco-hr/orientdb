{
  acquireWriteLock(iVertex);
  try {
    final Object field=iVertex.field(vertexField);
    final Set<OIdentifiable> links;
    if (field instanceof OMVRBTreeRIDSet || field instanceof OSBTreeRIDSet) {
      links=(Set<OIdentifiable>)field;
    }
 else     if (field instanceof Collection<?>) {
      if (preferSBTreeSet)       links=new OSBTreeRIDSet((Collection<OIdentifiable>)field);
 else       links=new OMVRBTreeRIDSet(iVertex,(Collection<OIdentifiable>)field);
      iVertex.field(vertexField,links);
    }
 else {
      links=createRIDSet(iVertex);
      iVertex.field(vertexField,links);
    }
    links.add(edge);
  }
  finally {
    releaseWriteLock(iVertex);
  }
}
