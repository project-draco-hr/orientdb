{
  if (iIterator != null) {
    int counter=0;
    String objectJson;
    while (iIterator.hasNext()) {
      final OIdentifiable rec=iIterator.next();
      if (rec != null)       try {
        objectJson=rec.getRecord().toJSON(format);
        if (counter++ > 0)         buffer.append(", ");
        buffer.append(objectJson);
      }
 catch (      Exception e) {
        OLogManager.instance().error(this,"Error transforming record " + rec.getIdentity() + " to JSON",e);
      }
    }
  }
}
