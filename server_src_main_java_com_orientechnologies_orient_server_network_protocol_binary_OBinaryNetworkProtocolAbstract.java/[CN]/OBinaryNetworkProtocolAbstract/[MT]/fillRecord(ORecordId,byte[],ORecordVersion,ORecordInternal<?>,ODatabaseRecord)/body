{
  String dbSerializerName="";
  if (iDatabase != null)   dbSerializerName=iDatabase.getSerializer().toString();
  String name=getRecordSerializerName();
  if (record.getRecordType() == ODocument.RECORD_TYPE && !dbSerializerName.equals(name)) {
    record.fill(rid,version,null,true);
    try {
      ORecordSerializer ser=ORecordSerializerFactory.instance().getFormat(name);
      ONetworkThreadLocalSerializer.setNetworkSerializer(ser);
      record.fromStream(buffer);
    }
  finally {
      ONetworkThreadLocalSerializer.setNetworkSerializer(null);
    }
    record.setDirty();
  }
 else   record.fill(rid,version,buffer,true);
}
