{
  final IMap<Object,Object> undoMap=manager.getHazelcastInstance().getMap(getUndoMapName(databaseName));
  final ODistributedRequest undoRequest=(ODistributedRequest)undoMap.remove(databaseName);
  if (undoRequest != null) {
    ODistributedServerLog.warn(this,getLocalNodeNameAndThread(),null,DIRECTION.NONE,"restore last replication message before the crash for database %s: %s",databaseName,undoRequest);
    try {
      onMessage(undoRequest);
    }
 catch (    Throwable t) {
      ODistributedServerLog.error(this,getLocalNodeNameAndThread(),null,DIRECTION.NONE,"error on executing restored message for database %s",t,databaseName);
    }
  }
  return undoMap;
}
