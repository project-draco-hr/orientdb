{
  for (Class<?> currentClass=iClass; currentClass != Object.class; ) {
    for (    Field f : currentClass.getDeclaredFields()) {
      if (f.getName().equals("this$0"))       continue;
      boolean accessModified=false;
      if (!f.isAccessible()) {
        f.setAccessible(true);
        accessModified=true;
      }
      Object o=f.get(iInstance);
      if (o != null) {
        if (OObjectEntitySerializer.isToSerialize(o.getClass()))         o=OObjectEntitySerializer.serializeFieldValue(o.getClass(),o);
        iDocument.field(f.getName(),OObjectEntitySerializer.typeToStream(o,OType.getTypeByClass(f.getType()),db,iDocument));
      }
      if (accessModified)       f.setAccessible(false);
    }
    currentClass=currentClass.getSuperclass();
  }
}
