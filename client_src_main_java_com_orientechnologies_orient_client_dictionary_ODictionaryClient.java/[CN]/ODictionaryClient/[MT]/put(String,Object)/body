{
  if (iKey == null)   return null;
  ORecordInternal<?> record=database.getRecordByUserObject(iValue,false);
  if (record.isDirty())   record.save();
  ORecordInternal<?> oldRecord=null;
  if (record.getIdentity().isTemporary()) {
    if (transactionalEntries == null)     transactionalEntries=new HashMap<String,T>();
    transactionalEntries.put(iKey,(T)record);
    oldRecord=null;
  }
 else   oldRecord=storage.dictionaryPut(database,iKey,record);
  return (T)database.getUserObjectByRecord(oldRecord,null);
}
