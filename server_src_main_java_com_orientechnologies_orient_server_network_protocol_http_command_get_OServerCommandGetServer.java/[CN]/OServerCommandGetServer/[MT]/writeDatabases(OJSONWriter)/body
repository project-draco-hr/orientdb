{
  json.beginCollection(1,true,"dbs");
  Map<String,OReentrantResourcePool<String,ODatabaseDocumentTx>> dbPool=server.getDatabasePool().getPools();
  for (  Entry<String,OReentrantResourcePool<String,ODatabaseDocumentTx>> entry : dbPool.entrySet()) {
    for (    ODatabaseDocumentTx db : entry.getValue().getResources()) {
      json.beginObject(2);
      writeField(json,2,"db",db.getName());
      writeField(json,2,"user",db.getUser() != null ? db.getUser().getName() : "-");
      writeField(json,2,"status",db.isClosed() ? "closed" : "open");
      writeField(json,2,"type",db.getType());
      writeField(json,2,"storageType",db.getStorage().getType());
      json.endObject(2);
    }
  }
  json.endCollection(1,false);
}
