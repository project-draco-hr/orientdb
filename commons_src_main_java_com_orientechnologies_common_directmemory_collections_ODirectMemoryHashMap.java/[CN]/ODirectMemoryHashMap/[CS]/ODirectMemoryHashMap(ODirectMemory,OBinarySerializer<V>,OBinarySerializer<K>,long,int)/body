{
  this.memory=memory;
  this.valueSerializer=valueSerializer;
  this.keySerializer=keySerializer;
  size=0;
  this.bucketSize=bucketSize;
  this.hashLinePointerOffset=OIntegerSerializer.INT_SIZE + bucketSize * (OLongSerializer.LONG_SIZE + 2 * OIntegerSerializer.INT_SIZE);
  this.hashLineSize=bucketSize * (OLongSerializer.LONG_SIZE + 2 * OIntegerSerializer.INT_SIZE) + 2 * OIntegerSerializer.INT_SIZE;
  capacity=initialCapacity;
  nextThreshold=(long)(capacity * 0.75);
  if (!allocateInitialMemory(capacity))   throw new IllegalStateException("There is n enough memory to allocate");
}
