{
  channel.writeShort((short)0);
  channel.writeByte(iRecord.getRecordType());
  channel.writeRID(iRecord.getIdentity());
  channel.writeInt(iRecord.getVersion());
  try {
    final byte[] stream=iRecord.toStream();
    int realLength=stream.length;
    for (int i=stream.length - 1; i > -1; --i) {
      if (stream[i] == 32)       --realLength;
 else       break;
    }
    channel.writeBytes(stream,realLength);
  }
 catch (  Exception e) {
    channel.writeBytes(null);
    OLogManager.instance().error(this,"Error on unmarshalling record #" + iRecord.getIdentity().toString(),OSerializationException.class);
  }
}
