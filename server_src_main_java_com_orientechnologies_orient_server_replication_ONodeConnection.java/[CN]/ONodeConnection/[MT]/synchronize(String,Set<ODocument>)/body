{
  logger.setDatabase(iDatabaseName);
  logger.log(this,Level.INFO,TYPE.REPLICATION,DIRECTION.IN,"synchronization started. Storing delta of updates...");
  try {
    ODocument cfg=new ODocument().field("nodes",iDbCfg,OType.EMBEDDEDSET);
    connect();
    final ODatabaseComplex<?> database=OServerMain.server().openDatabase("document",iDatabaseName,replicator.getReplicatorUser().name,replicator.getReplicatorUser().password);
    try {
      conflictResolver.init(database);
      final OChannelBinaryClient network=beginRequest(OClusterProtocol.REQUEST_NODE2NODE_REPLICATION_SYNCHRONIZE);
      try {
        network.writeString(iDatabaseName);
        network.writeBytes(cfg.toStream());
        network.flush();
      }
  finally {
        endRequest();
      }
      parseResponse();
    }
  finally {
      database.close();
    }
  }
 catch (  OException e) {
    throw e;
  }
catch (  Exception e) {
    throw new OIOException("REPL DB (" + iDatabaseName + ") error on synchronization",e);
  }
}
