{
  try {
    final OFile f=segment.getFile();
    if (!f.isOpen())     return;
    final byte[] buffer=toStream();
    final int len=buffer.length + OBinaryProtocol.SIZE_INT;
    if (len > f.getFilledUpTo())     f.allocateSpace(len - f.getFilledUpTo());
    f.writeInt(0,buffer.length);
    f.write(OBinaryProtocol.SIZE_INT,buffer);
  }
 catch (  Exception e) {
    throw new OSerializationException("Error on update storage configuration",e);
  }
}
