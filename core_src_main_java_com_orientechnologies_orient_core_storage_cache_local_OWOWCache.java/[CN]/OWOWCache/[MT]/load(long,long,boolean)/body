{
  final int intId=extractFileId(fileId);
  filesLock.acquireReadLock();
  try {
    final PagedKey pagedKey=new PagedKey(intId,pageIndex);
    Lock groupLock=lockManager.acquireSharedLock(pagedKey);
    try {
      PageGroup pageGroup=writeCachePages.get(pagedKey);
      OCachePointer pagePointer;
      if (pageGroup == null) {
        pagePointer=cacheFileContent(fileId,intId,pageIndex,addNewPages);
        if (pagePointer == null)         return null;
        pagePointer.incrementReadersReferrer();
        return pagePointer;
      }
      pagePointer=pageGroup.page;
      pagePointer.incrementReadersReferrer();
      return pagePointer;
    }
  finally {
      lockManager.releaseLock(groupLock);
    }
  }
  finally {
    filesLock.releaseReadLock();
  }
}
