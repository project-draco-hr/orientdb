{
  if (buffer == null)   return null;
  final int size=position > 0 ? position : buffer.length;
  final byte[] copy=new byte[size];
  System.arraycopy(buffer,0,copy,0,size);
  return copy;
}
