{
synchronized (syncObject) {
    Set<ODirtyPage> logDirtyPages=new HashSet<ODirtyPage>(dirtyPages.size());
    for (    long fileId : dirtyPages.keySet()) {
      for (      DirtyPage dirtyPage : dirtyPages.get(fileId)) {
        final ODirtyPage logDirtyPage=new ODirtyPage(files.get(fileId).getName(),dirtyPage.pageIndex,dirtyPage.lsn);
        logDirtyPages.add(logDirtyPage);
      }
    }
    writeAheadLog.logDirtyPages(logDirtyPages);
    return logDirtyPages;
  }
}
