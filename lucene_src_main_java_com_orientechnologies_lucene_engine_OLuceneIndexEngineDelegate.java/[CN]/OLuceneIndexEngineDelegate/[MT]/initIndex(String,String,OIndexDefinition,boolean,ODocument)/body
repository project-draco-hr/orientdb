{
  this.indexName=indexName;
  if (delegate == null) {
    if (OClass.INDEX_TYPE.SPATIAL.name().equalsIgnoreCase(indexType)) {
      if (indexDefinition.getFields().size() > 1) {
        delegate=new OLuceneLegacySpatialIndexEngine(indexName,OShapeFactory.INSTANCE);
      }
 else {
        delegate=new OLuceneGeoSpatialIndexEngine(indexName,OShapeFactory.INSTANCE);
      }
    }
 else     if (OClass.INDEX_TYPE.FULLTEXT.name().equalsIgnoreCase(indexType)) {
      delegate=new OLuceneFullTextIndexEngine(indexName,new ODocBuilder(),new OQueryBuilderImpl());
    }
    delegate.initIndex(indexName,indexType,indexDefinition,isAutomatic,metadata);
  }
}
