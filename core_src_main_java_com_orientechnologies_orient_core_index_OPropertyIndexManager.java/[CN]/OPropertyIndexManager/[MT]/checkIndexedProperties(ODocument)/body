{
  final OClass cls=iRecord.getSchemaClass();
  if (cls == null)   return;
  OPropertyIndex index;
  Object fieldValue;
  String fieldValueString;
  List<ORecordId> indexedRIDs;
  Object obj;
  ORID rid;
  for (  OProperty prop : cls.properties()) {
    index=prop.getIndex();
    if (index != null && index.getType() == INDEX_TYPE.UNIQUE) {
      fieldValue=iRecord.field(prop.getName());
      if (fieldValue != null) {
        fieldValueString=fieldValue.toString();
        indexedRIDs=index.get(fieldValueString);
        if (indexedRIDs != null && indexedRIDs.size() > 0) {
          obj=indexedRIDs.get(0);
          if (obj instanceof ORecordId)           rid=(ORID)obj;
 else           rid=((ODocument)obj).getIdentity();
          if (!rid.equals(iRecord.getIdentity()))           OLogManager.instance().exception("Found duplicated key '%s' for property '%s'",null,OIndexException.class,fieldValueString,prop);
        }
      }
    }
  }
}
