{
  if (delegate == null) {
    if (FULLTEXT.name().equalsIgnoreCase(indexType)) {
      Boolean allowLeadingWildcard=false;
      if (metadata.containsField("allowLeadingWildcard")) {
        allowLeadingWildcard=metadata.<Boolean>field("allowLeadingWildcard");
      }
      delegate=new OLuceneFullTextIndexEngine(indexName,new ODocBuilder(),new OQueryBuilderImpl(allowLeadingWildcard));
    }
    delegate.init(indexName,indexType,indexDefinition,isAutomatic,metadata);
  }
}
