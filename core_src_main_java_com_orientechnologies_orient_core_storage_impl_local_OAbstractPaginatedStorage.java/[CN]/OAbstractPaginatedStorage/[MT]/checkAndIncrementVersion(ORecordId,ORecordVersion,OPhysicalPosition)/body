{
switch (version.getCounter()) {
case -1:
    ppos.recordVersion.increment();
  break;
case -2:
ppos.recordVersion.setCounter(-2);
break;
default :
if (!version.equals(ppos.recordVersion)) if (OFastConcurrentModificationException.enabled()) throw OFastConcurrentModificationException.instance();
 else throw new OConcurrentModificationException(rid,ppos.recordVersion,version,ORecordOperation.UPDATED);
ppos.recordVersion.increment();
}
}
