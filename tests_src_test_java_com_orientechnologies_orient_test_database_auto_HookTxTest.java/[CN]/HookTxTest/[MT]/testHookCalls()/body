{
  p=new Profile("HookTxTest");
  Assert.assertEquals(callbackCount,0);
  database.begin();
  database.save(p);
  database.commit();
  Assert.assertEquals(callbackCount,11);
  database.begin();
  List<Profile> result=database.query(new OSQLSynchQuery<Profile>("select * from Profile where nick = 'HookTxTest'"));
  Assert.assertFalse(result.size() == 0);
  for (int i=0; i < result.size(); ++i) {
    Assert.assertEquals(callbackCount,46);
    p=result.get(i);
  }
  Assert.assertEquals(callbackCount,46);
  database.commit();
  database.begin();
  p.setValue(p.getValue() + 1000);
  database.save(p);
  database.commit();
  Assert.assertEquals(callbackCount,136);
  database.begin();
  database.delete(p);
  database.commit();
  Assert.assertEquals(callbackCount,266);
  database.unregisterHook(this);
  database.close();
}
