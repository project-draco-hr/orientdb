{
  boolean wasRewritten=false;
  documentValue.setLazyLoad(false);
  for (  String fieldName : documentValue.fieldNames()) {
    Object fieldValue=documentValue.field(fieldName);
    FieldRewriter<Object> fieldRewriter=RewritersFactory.INSTANCE.findRewriter(documentValue,fieldName,fieldValue);
    Object newFieldValue=fieldRewriter.rewriteValue(fieldValue);
    if (newFieldValue != null) {
      documentValue.field(fieldName,newFieldValue);
      wasRewritten=true;
    }
  }
  if (wasRewritten)   return documentValue;
  return null;
}
