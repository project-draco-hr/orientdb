{
  if (!entry.flush())   return false;
  entry.acquireLock();
  try {
    final List<OMMapBufferEntry> file=bufferPoolPerFile.get(entry.file);
    if (file != null) {
      file.remove(entry);
      if (file.isEmpty())       bufferPoolPerFile.remove(entry.file);
    }
    entry.close();
    totalMemory-=entry.size;
    return true;
  }
  finally {
    entry.releaseLock();
  }
}
