{
  Thread shutdownThread=new Thread("OrientDB server shutdown thread"){
    public void run(){
      server.shutdown();
      final boolean allowsJVMShutdown=OGlobalConfiguration.ENVIRONMENT_ALLOW_JVM_SHUTDOWN.getValueAsBoolean();
      if (allowsJVMShutdown)       System.exit(0);
    }
  }
;
  shutdownThread.setDaemon(false);
  shutdownThread.start();
  try {
    shutdownThread.join();
  }
 catch (  InterruptedException ignored) {
  }
}
