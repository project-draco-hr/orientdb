{
  final Map<String,String> storages=new HashMap<String,String>();
  if (configuration.storages != null && configuration.storages.length > 0)   for (  OServerStorageConfiguration s : configuration.storages)   storages.put(s.name,s.path);
  final String rootDirectory=getDatabaseDirectory();
  scanDatabaseDirectory(rootDirectory,new File(rootDirectory),storages);
  for (  OStorage storage : Orient.instance().getStorages()) {
    final String storageName=storage.getName();
    if (storage.exists() && !storages.containsKey(storageName))     storages.put(storageName,storage.getURL());
  }
  return storages;
}
