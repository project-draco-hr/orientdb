{
  if (path instanceof File) {
    final File file=(File)path;
    try {
      final String fileMode=lockFile ? "rw" : "r";
      raf=new RandomAccessFile(file,fileMode);
      channel=raf.getChannel();
      fis=new FileInputStream(file);
      if (fileName.endsWith(".gz"))       fileReader=new InputStreamReader(new GZIPInputStream(fis));
 else {
        fileReader=new FileReader(file);
        byteToParse=file.length();
      }
    }
 catch (    Exception e) {
      end();
    }
  }
 else   if (path instanceof InputStream) {
    fileName=null;
    byteToParse=-1;
    fileReader=new InputStreamReader((InputStream)path);
  }
 else   if (path instanceof InputStreamReader) {
    fileName=null;
    byteToParse=-1;
    fileReader=(InputStreamReader)path;
  }
 else   throw new OSourceException("[File source] Unknown input '" + path + "' of class '"+ path.getClass()+ "'");
  byteParsed=0;
  if (lockFile)   try {
    lock=channel.lock();
  }
 catch (  IOException e) {
    OLogManager.instance().error(this,"Error on locking file: %s",e,fileName);
  }
  log(OETLProcessor.LOG_LEVELS.DEBUG,"Reading from file " + path);
  final long startTime=System.currentTimeMillis();
}
