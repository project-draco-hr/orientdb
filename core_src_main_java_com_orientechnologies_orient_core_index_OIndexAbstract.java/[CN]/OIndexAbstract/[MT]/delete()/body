{
  modificationLock.requestModificationLock();
  try {
    acquireExclusiveLock();
    try {
      indexEngine.delete();
      if (getDatabase().getMetadata() != null)       getDatabase().getMetadata().getIndexManager().removeClassPropertyIndex(this);
      if (valueContainerAlgorithm.equals(ODefaultIndexFactory.SBTREEBONSAI_VALUE_CONTAINER)) {
        final OStorage storage=getDatabase().getStorage();
        if (storage instanceof OLocalPaginatedStorage) {
          final ODiskCache diskCache=((OLocalPaginatedStorage)storage).getDiskCache();
          try {
            final String fileName=getName() + OIndexRIDContainer.INDEX_FILE_EXTENSION;
            if (diskCache.exists(fileName)) {
              final long fileId=diskCache.openFile(fileName);
              diskCache.deleteFile(fileId);
            }
          }
 catch (          IOException e) {
            OLogManager.instance().error(this,"Can't delete file for value containers",e);
          }
        }
      }
      return this;
    }
  finally {
      releaseExclusiveLock();
    }
  }
  finally {
    modificationLock.releaseModificationLock();
  }
}
