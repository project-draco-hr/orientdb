{
  List<Profile> result=database.command(new OSQLSynchQuery<Profile>("select * from Profile where nick is not null")).execute();
  OIndex idx=database.getMetadata().getIndexManager().getIndex("Profile.nick");
  Assert.assertEquals(idx.getSize(),result.size());
  Set<Profile> indexResult=new HashSet<Profile>();
  Iterator<Entry<Object,Set<OIdentifiable>>> it=idx.iterator();
  while (it.hasNext()) {
    Collection<? extends Profile> c=(Collection<? extends Profile>)it.next().getValue();
    indexResult.addAll(c);
  }
  Assert.assertEquals(indexResult.size(),result.size());
}
