{
  final Lock lock=iManager.getLock(database.getName());
  if (lock.tryLock()) {
    try {
      ODistributedServerLog.warn(this,iManager.getLocalNodeName(),getNodeSource(),DIRECTION.OUT,"backuping database %s...",database.getName());
      final ByteArrayOutputStream out=new ByteArrayOutputStream();
      database.backup(out,null);
      return new OBuffer(out.toByteArray());
    }
  finally {
      lock.unlock();
    }
  }
 else   ODistributedServerLog.debug(this,iManager.getLocalNodeName(),getNodeSource(),DIRECTION.NONE,"skip deploying database because another node is doing it",database.getName());
  return new byte[0];
}
