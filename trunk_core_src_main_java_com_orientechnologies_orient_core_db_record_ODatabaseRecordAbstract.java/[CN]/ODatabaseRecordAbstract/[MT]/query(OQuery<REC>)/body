{
  checkSecurity(OUser.QUERY,OUser.READ);
  OQueryInternal<REC> query=(OQueryInternal<REC>)iQuery;
  try {
    query.setDatabase((ODatabaseRecord<REC>)getDatabaseOwner());
    if (query.getRecord() == null)     query.setRecord((REC)getDatabaseOwner().newInstance());
    return query;
  }
 catch (  Exception e) {
    throw new ODatabaseException("Error on query execution",e);
  }
}
