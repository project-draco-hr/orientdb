{
synchronized (syncObject) {
    for (    long fileId : files.keySet())     doDeleteFile(fileId);
    if (nameIdMapHolderFile != null) {
      nameIdMapHolder.close();
      if (!nameIdMapHolderFile.delete())       throw new OStorageException("Can not delete disk cache file which contains name-id mapping.");
    }
  }
}
