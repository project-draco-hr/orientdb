{
  final ODistributedDatabase ddb=dManager.getMessageService().getDatabase(getName());
  final ODistributedRequestId localReqId=new ODistributedRequestId(dManager.getLocalNodeId(),dManager.getNextMessageIdCounter());
  if (!(ddb.lockRecord(rid,localReqId)))   throw new ODistributedRecordLockedException(rid);
  return ddb;
}
