{
  final ODatabaseDocumentTx db=new ODatabaseDocumentTx(url);
  final OStorageRemote.CONNECTION_MODE connMode=settings.getConnectionMode();
  db.setProperty(OStorageRemote.PARAM_CONNECTION_MODE,connMode);
  if (!db.getURL().startsWith("remote:") && !db.exists()) {
    if (iCreate)     db.create();
 else     if (iOpen)     throw new ODatabaseException("Database '" + url + "' not found");
  }
 else   if (iOpen)   db.open(user,password);
  return db;
}
