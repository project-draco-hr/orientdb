{
  final OCommandExecutor executor=OCommandManager.instance().getExecutor(iCommand);
  executor.setProgressListener(iCommand.getProgressListener());
  executor.parse(iCommand);
  final boolean distribute=(executor instanceof OCommandExecutorSQLDelegate ? ((OCommandExecutorSQLDelegate)executor).getDelegate() : executor) instanceof OCommandDistributedReplicateRequest;
  if (distribute)   ODistributedThreadLocal.INSTANCE.distributedExecution=true;
  try {
    final Object localResult=wrapped.executeCommand(iCommand,executor);
    if (distribute) {
      final Collection<Object> distributedResult=dManager.sendOperation2Nodes(dManager.getRemoteNodeIds(),new OSQLCommandDistributedTask(dManager.getLocalNodeId(),wrapped.getName(),createRecordMode,iCommand.getText()));
    }
    return localResult;
  }
  finally {
    if (distribute)     ODistributedThreadLocal.INSTANCE.distributedExecution=false;
  }
}
