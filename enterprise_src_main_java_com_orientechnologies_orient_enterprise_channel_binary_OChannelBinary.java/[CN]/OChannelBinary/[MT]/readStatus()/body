{
  flush();
  final byte result=readByte();
  final int clientTxId=readInt();
  if (result == OChannelBinaryProtocol.RESPONSE_STATUS_ERROR) {
    StringBuilder buffer=new StringBuilder();
    String rootClassName=null;
    while (readByte() == 1) {
      final String excClassName=readString();
      final String excMessage=readString();
      if (rootClassName == null)       rootClassName=excClassName;
 else {
        buffer.append("\n-> ");
        buffer.append(excClassName);
        buffer.append(": ");
      }
      buffer.append(excMessage);
    }
    if (rootClassName != null)     throw createException(rootClassName,buffer.toString());
    throw new ONetworkProtocolException("Network response error: " + buffer.toString());
  }
 else   if (result != OChannelBinaryProtocol.RESPONSE_STATUS_OK) {
    clearInput();
    throw new ONetworkProtocolException("Error on reading response from the server");
  }
  return clientTxId;
}
