{
  initialized=false;
  final String configuredKey=OGlobalConfiguration.STORAGE_ENCRYPTION_DES_KEY.getValueAsString();
  if (configuredKey == null)   throw new OStorageException("DES compression has been selected, but no key was found. Please configure '" + OGlobalConfiguration.STORAGE_ENCRYPTION_DES_KEY.getKey() + "' setting or remove DES compression by setting '"+ OGlobalConfiguration.STORAGE_COMPRESSION_METHOD.getKey()+ "=nothing'");
  try {
    final byte[] key=OBase64Utils.decode(configuredKey);
    final DESKeySpec desKeySpec=new DESKeySpec(key);
    final SecretKeyFactory keyFactory=SecretKeyFactory.getInstance(ALGORITHM_NAME);
    theKey=keyFactory.generateSecret(desKeySpec);
    cipher=Cipher.getInstance(TRANSFORMATION);
  }
 catch (  Exception e) {
    throw new OSecurityException("Cannot initialize DES encryption with current key. Assure the key is a BASE64 - 64 bits long",e);
  }
  this.initialized=true;
}
