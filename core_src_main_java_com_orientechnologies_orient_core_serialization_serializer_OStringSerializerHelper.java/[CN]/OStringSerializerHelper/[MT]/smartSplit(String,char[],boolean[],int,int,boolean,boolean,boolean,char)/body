{
  final StringBuilder buffer=new StringBuilder();
  final ArrayList<String> parts=new ArrayList<String>();
  int startSeparatorAt=-1;
  if (iSource != null && !iSource.isEmpty()) {
    while ((beginIndex=parse(iSource,buffer,beginIndex,endIndex,iRecordSeparator,iStringSeparatorExtended,iConsiderBraces,iConsiderSets,startSeparatorAt,iJumpChars)) > -1) {
      parts.add(buffer.toString());
      buffer.setLength(0);
      startSeparatorAt=0;
      if (beginIndex > -1) {
        final char lastSeparator=iSource.charAt(beginIndex - 1);
        for (int i=0; i < iRecordSeparator.length; ++i)         if (iRecordSeparator[i] == lastSeparator) {
          if (iRecordSeparatorInclude[i]) {
            beginIndex--;
            startSeparatorAt=1;
          }
          break;
        }
      }
    }
    if (buffer.length() > 0 || isCharPresent(iSource.charAt(iSource.length() - 1),iRecordSeparator))     parts.add(buffer.toString());
  }
  return parts;
}
