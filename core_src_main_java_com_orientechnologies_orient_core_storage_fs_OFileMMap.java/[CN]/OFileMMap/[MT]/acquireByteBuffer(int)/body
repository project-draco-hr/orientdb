{
  if (iSize > BYTEBUFFER_POOLABLE_SIZE) {
    try {
      metricNonPooledBufferUsed++;
      return ByteBuffer.allocate(iSize);
    }
 catch (    OutOfMemoryError e) {
      OLogManager.instance().error(this,"Error on allocating direct buffer of size %d bytes",e,iSize);
      throw e;
    }
  }
  ByteBuffer buffer=bufferPool.poll();
  if (buffer != null)   metricPooledBufferUsed++;
 else {
    metricPooledBufferCreated++;
    buffer=ByteBuffer.allocateDirect(BYTEBUFFER_POOLABLE_SIZE);
  }
  buffer.limit(iSize);
  return buffer;
}
