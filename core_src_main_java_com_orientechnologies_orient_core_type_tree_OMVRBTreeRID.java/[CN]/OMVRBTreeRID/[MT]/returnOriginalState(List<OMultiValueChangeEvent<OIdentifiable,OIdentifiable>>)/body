{
  final Map<OIdentifiable,OIdentifiable> reverted=new HashMap<OIdentifiable,OIdentifiable>(this);
  final ListIterator<OMultiValueChangeEvent<OIdentifiable,OIdentifiable>> listIterator=changeEvents.listIterator(changeEvents.size());
  while (listIterator.hasPrevious()) {
    final OMultiValueChangeEvent<OIdentifiable,OIdentifiable> event=listIterator.previous();
switch (event.getChangeType()) {
case ADD:
      reverted.remove(event.getKey());
    break;
case REMOVE:
  reverted.put(event.getKey(),event.getOldValue());
break;
case UPDATE:
reverted.put(event.getKey(),event.getOldValue());
break;
default :
throw new IllegalArgumentException("Invalid change type : " + event.getChangeType());
}
}
return reverted;
}
