{
  if (iContent == null)   throw new OProcessException("Cannot find block type '" + iType + "'");
  final Class<? extends OProcessorBlock> blockClass=registry.get(iType);
  if (blockClass == null)   throw new OProcessException("Cannot find block type '" + iType + "'");
  OProcessorBlock block;
  try {
    block=blockClass.newInstance();
  }
 catch (  Exception e) {
    throw new OProcessException("Cannot create block of class '" + iType + "'",e);
  }
  block.setParentBlock(iParent);
  final Integer depthLevel=(Integer)iContext.getVariable("depthLevel");
  iContext.setVariable("depthLevel",depthLevel == null ? 0 : depthLevel + 1);
  if (depthLevel == null)   OLogManager.instance().info(this,"Start processing...");
  final long start=System.currentTimeMillis();
  try {
    return block.process(this,iContext,(ODocument)iContent,iOutput,iReadOnly);
  }
  finally {
    iContext.setVariable("depthLevel",depthLevel == null ? 0 : depthLevel);
    if (depthLevel == null)     OLogManager.instance().info(this,"End of processing. Elapsed %dms",(System.currentTimeMillis() - start));
  }
}
