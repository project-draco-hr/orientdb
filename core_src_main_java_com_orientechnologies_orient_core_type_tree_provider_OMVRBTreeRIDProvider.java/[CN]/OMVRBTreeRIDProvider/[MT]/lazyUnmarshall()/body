{
  if (getSize() > 0 || marshalling || buffer.length() == 0)   return;
  marshalling=true;
  tree.setMarshalling(true);
  try {
    final char firstChar=buffer.charAt(0);
    String value=firstChar == OStringSerializerHelper.SET_BEGIN || firstChar == OStringSerializerHelper.LIST_BEGIN ? buffer.substring(1,buffer.length() - 1) : buffer.toString();
    if (firstChar == OStringSerializerHelper.SET_BEGIN || firstChar == OStringSerializerHelper.LIST_BEGIN || firstChar == OStringSerializerHelper.LINK) {
      setEmbeddedStreaming(true);
      final StringTokenizer tokenizer=new StringTokenizer(value,",");
      while (tokenizer.hasMoreElements()) {
        final ORecordId rid=new ORecordId(tokenizer.nextToken());
        tree.put(rid,rid);
      }
    }
 else {
      setEmbeddedStreaming(false);
      value=firstChar == OStringSerializerHelper.EMBEDDED_BEGIN ? value.substring(1,value.length() - 1) : value;
      fromStream(value.getBytes());
    }
  }
  finally {
    marshalling=false;
    tree.setMarshalling(false);
  }
}
