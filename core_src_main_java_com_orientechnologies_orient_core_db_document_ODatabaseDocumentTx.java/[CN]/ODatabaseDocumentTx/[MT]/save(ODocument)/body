{
  iContent.validate();
  try {
    if (!iContent.getIdentity().isValid()) {
      if (iContent.getClassName() != null)       checkSecurity(OUser.CLASS + "." + iContent.getClassName(),OUser.CREATE);
      if (iContent.getSchemaClass() != null) {
        String clusterName=getClusterNameById(iContent.getSchemaClass().getDefaultClusterId());
        super.save(iContent,clusterName);
        return this;
      }
    }
 else {
      if (iContent.getClassName() != null)       checkSecurity(OUser.CLASS + "." + iContent.getClassName(),OUser.UPDATE);
    }
    super.save(iContent);
  }
 catch (  Throwable t) {
    OLogManager.instance().error(this,"Error on saving record #" + iContent.getIdentity() + " of class '"+ (iContent.getClassName() != null ? iContent.getClassName() : "?")+ "'",t,ODatabaseException.class);
  }
  return this;
}
