{
  database.open("admin","admin");
  try {
    List<ODocument> result=database.command(new OSQLSynchQuery<ODocument>("select $a[0] as a0, $a as a from V let $a = out where out.size() > 0")).execute();
    Assert.assertFalse(result.isEmpty());
    for (    ODocument d : result) {
      Assert.assertTrue(d.containsField("a"));
      Assert.assertTrue(d.containsField("a0"));
      Assert.assertEquals(d.field("a0"),((Collection<OIdentifiable>)d.field("a")).iterator().next());
    }
  }
  finally {
    database.close();
  }
}
