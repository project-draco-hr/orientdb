{
  rwLock.readLock().lock();
  try {
    final OClass cls=classes.get(iClassName.toLowerCase());
    if (cls != null)     return cls;
  }
  finally {
    rwLock.readLock().unlock();
  }
  rwLock.writeLock().lock();
  try {
    OClass cls=classes.get(iClassName.toLowerCase());
    if (cls == null)     cls=createClass(iClassName,iSuperClass);
 else     if (iSuperClass != null && !cls.isSubClassOf(iSuperClass))     throw new IllegalArgumentException("Class '" + iClassName + "' is not an instance of "+ iSuperClass.getShortName());
    addClusterClassMap(cls);
    return cls;
  }
  finally {
    rwLock.writeLock().unlock();
  }
}
