{
  final OJVMProfiler profiler=Orient.instance().getProfiler();
  final String profilerPrefix=profiler.getDatabaseMetric(iDatabase.getName(),"index." + name + '.');
  profiler.registerHookValue(profilerPrefix + "items",new OProfilerHookValue(){
    public Object getValue(){
      acquireSharedLock();
      try {
        return map != null ? map.size() : "-";
      }
  finally {
        releaseSharedLock();
      }
    }
  }
);
  profiler.registerHookValue(profilerPrefix + "entryPointSize",new OProfilerHookValue(){
    public Object getValue(){
      return map != null ? map.getEntryPointSize() : "-";
    }
  }
);
  profiler.registerHookValue(profilerPrefix + "maxUpdateBeforeSave",new OProfilerHookValue(){
    public Object getValue(){
      return map != null ? map.getMaxUpdatesBeforeSave() : "-";
    }
  }
);
  profiler.registerHookValue(profilerPrefix + "optimizationThreshold",new OProfilerHookValue(){
    public Object getValue(){
      return map != null ? map.getOptimizeThreshold() : "-";
    }
  }
);
  Orient.instance().getMemoryWatchDog().addListener(watchDog);
  iDatabase.registerListener(this);
}
