{
  database=ODatabaseDocumentPool.global().acquire(url,"admin","admin");
  try {
    ODocument jaimeDoc=new ODocument("PersonTest");
    jaimeDoc.field("name","jaime");
    jaimeDoc.save();
    ODocument cerseiDoc=new ODocument("PersonTest");
    cerseiDoc.fromJSON("{\"@type\":\"d\",\"name\":\"cersei\",\"valonqar\":" + jaimeDoc.toJSON() + "}");
    cerseiDoc.save();
    ODocument tyrionDoc=new ODocument("PersonTest");
    tyrionDoc.fromJSON("{\"@type\":\"d\",\"name\":\"tyrion\",\"emergency_contact\":{\"relationship\":\"brother\",\"contact\":" + jaimeDoc.toJSON() + "}}");
    tyrionDoc.save();
    System.out.println("The saved documents are:");
    for (    ODocument o : database.browseClass("PersonTest")) {
      System.out.println("my id is " + o.getIdentity().toString());
      System.out.println("my name is: " + o.field("name"));
      System.out.println("my ODocument representation is " + o);
      System.out.println("my JSON representation is " + o.toJSON());
      System.out.println("my traversable links are: ");
      for (      OIdentifiable id : new OSQLSynchQuery<ODocument>("traverse * from " + o.getIdentity().toString())) {
        System.out.println(database.load(id.getIdentity()).toJSON());
      }
    }
  }
  finally {
    database.close();
  }
}
