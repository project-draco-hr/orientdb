{
  checkSyntax(iParts,1,"Syntax error: server");
  try {
    StringWriter jsonBuffer=new StringWriter();
    OJSONWriter json=new OJSONWriter(jsonBuffer);
    json.beginObject();
    json.beginCollection(1,true,"connections");
    OClientConnection[] conns=OServerMain.server().getManagedServer().getConnections();
    for (    OClientConnection c : conns) {
      json.beginObject();
      json.writeAttribute(2,true,"id",c.id);
      json.writeAttribute(2,true,"db",c.database != null ? c.database.getName() : null);
      json.writeAttribute(2,true,"protocol",c.protocol.getName());
      json.writeAttribute(2,true,"totalRequests",c.protocol.getTotalRequests());
      json.writeAttribute(2,true,"commandType",c.protocol.getCommandType());
      json.writeAttribute(2,true,"lastCommandType",c.protocol.getLastCommandType());
      json.writeAttribute(2,true,"lastCommandDetail",c.protocol.getLastCommandDetail());
      json.writeAttribute(2,true,"lastExecutionTime",c.protocol.getLastCommandExecutionTime());
      json.writeAttribute(2,true,"totalWorkingTime",c.protocol.getTotalWorkingTime());
      json.writeAttribute(2,true,"connectedOn",dateTimeFormat.format(new Date(c.since)));
      json.endObject();
    }
    json.endCollection(1,false);
    json.endObject();
    sendTextContent(OHttpUtils.STATUS_OK_CODE,"OK",OHttpUtils.CONTENT_TEXT_PLAIN,jsonBuffer.toString());
  }
  finally {
  }
}
