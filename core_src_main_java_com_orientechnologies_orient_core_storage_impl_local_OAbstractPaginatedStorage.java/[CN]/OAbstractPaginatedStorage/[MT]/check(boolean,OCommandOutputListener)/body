{
  lock.acquireExclusiveLock();
  try {
    final long start=System.currentTimeMillis();
    OPageDataVerificationError[] pageErrors=diskCache.checkStoredPages(verbose ? listener : null);
    listener.onMessage("Check of storage completed in " + (System.currentTimeMillis() - start) + "ms. "+ (pageErrors.length > 0 ? pageErrors.length + " with errors." : " without errors."));
    return pageErrors.length == 0;
  }
  finally {
    lock.releaseExclusiveLock();
  }
}
