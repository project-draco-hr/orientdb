{
  if (status != STATUS.ONLINE)   throw new ODistributedSynchronizationException("Can't share database '" + iDatabase.getName() + "' on remote server node '"+ iRemoteServerName+ "' because is disconnected");
  final String dbName=iDatabase.getName();
  final ODistributedDatabaseInfo databaseEntry;
  channel.beginRequest();
  try {
    status=STATUS.SYNCHRONIZING;
    OLogManager.instance().info(this,"Sharing database '" + dbName + "' to remote server "+ iRemoteServerName+ "...");
    channel.writeByte(OChannelDistributedProtocol.REQUEST_DISTRIBUTED_DB_SHARE_RECEIVER);
    channel.writeInt(clientTxId);
    channel.writeString(dbName);
    channel.writeString(iDbUser);
    channel.writeString(iDbPasswd);
    channel.writeString(iEngineName);
  }
  finally {
    channel.endRequest();
  }
  OLogManager.instance().info(this,"Exporting database '%s' via streaming to remote server node: %s...",iDatabase.getName(),iRemoteServerName);
  new ODatabaseExport(iDatabase,new OChannelBinaryOutputStream(channel),this).exportDatabase();
  OLogManager.instance().info(this,"Database exported correctly");
  databaseEntry=new ODistributedDatabaseInfo();
  databaseEntry.databaseName=dbName;
  databaseEntry.userName=iDbUser;
  databaseEntry.userPassword=iDbPasswd;
  channel.beginResponse(clientTxId);
  try {
    databaseEntry.sessionId=channel.readInt();
    databases.put(dbName,databaseEntry);
  }
  finally {
    channel.endResponse();
  }
  status=STATUS.ONLINE;
}
