{
  minPool=OGlobalConfiguration.CLIENT_CHANNEL_MIN_POOL.getValueAsInteger();
  maxPool=OGlobalConfiguration.CLIENT_CHANNEL_MAX_POOL.getValueAsInteger();
  if (connectionOptions != null && connectionOptions.size() > 0) {
    if (connectionOptions.containsKey(PARAM_MIN_POOL))     minPool=Integer.parseInt(connectionOptions.get(PARAM_MIN_POOL).toString());
    if (connectionOptions.containsKey(PARAM_MAX_POOL))     maxPool=Integer.parseInt(connectionOptions.get(PARAM_MAX_POOL).toString());
  }
  createConnectionPool();
  OChannelBinaryClient network=null;
  try {
    network=beginRequest(OChannelBinaryProtocol.REQUEST_DB_OPEN);
    network.writeString(name).writeString(connectionUserName).writeString(connectionUserPassword);
  }
  finally {
    endRequest(network);
  }
  final int sessionId;
  try {
    beginResponse(network);
    sessionId=network.readInt();
    if (debug)     System.out.println("new sess: " + sessionId);
    OLogManager.instance().debug(null,"Client connected with session id: " + sessionId);
    int tot=network.readInt();
    String clusterName;
    for (int i=0; i < tot; ++i) {
      clusterName=network.readString().toLowerCase();
      clustersIds.put(clusterName,network.readInt());
      clustersTypes.put(clusterName,network.readString());
    }
    updateClusterConfiguration(network.readBytes());
  }
  finally {
    endResponse(network);
  }
  setSessionId(sessionId);
  defaultClusterId=clustersIds.get(OStorage.CLUSTER_DEFAULT_NAME);
  open=true;
}
