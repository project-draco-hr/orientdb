{
  if (iDb == null) {
    throw new IllegalStateException("Current thread has no database set and the tree cannot be saved correctly. Ensure that the database is closed before the application if off.");
  }
  record.save(treeDataProvider.clusterName);
  if (!record.getIdentity().isTemporary())   ORecordListenerManager.removeListener(record,this);
}
