{
  if (!enabled)   return null;
  acquireExclusiveLock();
  try {
    if (strategy == STRATEGY.POP_RECORD)     return entries.remove(iRID);
 else {
      final ORecordInternal<?> record=entries.get(iRID);
      if (record == null)       return null;
      if (record.isDirty()) {
        entries.remove(iRID);
        return null;
      }
      entries.put(iRID,(ORecordInternal<?>)record.flatCopy());
      return record;
    }
  }
  finally {
    releaseExclusiveLock();
  }
}
