{
  document=checkForLoading(document);
  final OClass cls=document.getSchemaClass();
  if (cls != null) {
    final Collection<OIndex<?>> indexes=cls.getIndexes();
switch (hookType) {
case BEFORE_CREATE:
      checkIndexedPropertiesOnCreation(document,indexes);
    break;
case BEFORE_UPDATE:
  checkIndexedPropertiesOnUpdate(document,indexes);
break;
default :
throw new IllegalArgumentException("Invalid hook type: " + hookType);
}
acquireModificationLock(document,indexes);
}
}
