{
  try {
    String cmd="";
    for (int i=0; i < OPTIMISTIC_CYCLES; ++i) {
      cmd="begin;";
      cmd+="let a = create vertex set type = 'Citizen', id = '" + threadId + "-"+ i+ "';";
      cmd+="create edge from $a to " + superNode.getIdentity() + ";";
      cmd+="commit retry " + MAX_RETRIES + ";";
      cmd+="return $transactionRetries;";
      final OCommandRequest command=graph.command(new OCommandScript("sql",cmd));
      int retries=command.execute();
      counter.incrementAndGet();
      totalRetries.addAndGet(retries);
    }
  }
 catch (  Throwable e) {
    e.printStackTrace();
    Assert.assertTrue(false);
  }
}
