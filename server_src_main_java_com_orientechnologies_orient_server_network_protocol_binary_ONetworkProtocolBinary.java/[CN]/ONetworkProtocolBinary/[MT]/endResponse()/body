{
  if (connection != null && connection.database != null && connection.database.activateOnCurrentThread().getTransaction() != null) {
    connection.database.activateOnCurrentThread();
    connection.database.getTransaction().rollback();
  }
  channel.flush();
  channel.releaseWriteLock();
}
