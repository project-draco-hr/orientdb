{
  ODatabaseDocumentTx db=null;
  try {
    final String[] urlParts=checkSyntax(iRequest.url,3,"Syntax error: document/<database>/<record-id>");
    iRequest.data.commandType=OChannelBinaryProtocol.RECORD_DELETE;
    db=OSharedDocumentDatabase.acquireDatabase(urlParts[1]);
    final int parametersPos=urlParts[2].indexOf("?");
    final String rid=parametersPos > -1 ? urlParts[2].substring(0,parametersPos) : urlParts[2];
    final ORecordId recorId=new ORecordId(rid);
    if (!recorId.isValid())     throw new IllegalArgumentException("Invalid Record ID in request: " + urlParts[2]);
    final ODocument doc=new ODocument(db,recorId);
    doc.delete();
    sendTextContent(iRequest,OHttpUtils.STATUS_OK_CODE,"OK",OHttpUtils.CONTENT_TEXT_PLAIN,"Record " + recorId + " deleted successfully.");
  }
  finally {
    if (db != null)     OSharedDocumentDatabase.releaseDatabase(db);
  }
}
