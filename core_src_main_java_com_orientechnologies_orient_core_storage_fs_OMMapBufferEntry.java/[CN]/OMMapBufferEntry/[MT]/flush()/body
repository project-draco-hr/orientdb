{
  if (!dirty)   return true;
  acquireExclusiveLock();
  try {
    final long timer=PROFILER.startChrono();
    for (int i=0; i < FORCE_RETRY; ++i) {
      try {
        buffer.force();
        dirty=false;
        break;
      }
 catch (      Exception e) {
        OLogManager.instance().debug(this,"Cannot write memory buffer to disk. Retrying (" + (i + 1) + "/"+ FORCE_RETRY+ ")...");
        OMemoryWatchDog.freeMemoryForResourceCleanup(FORCE_DELAY);
      }
    }
    if (dirty)     OLogManager.instance().debug(this,"Cannot commit memory buffer to disk after %d retries",FORCE_RETRY);
 else     PROFILER.updateCounter(PROFILER.getProcessMetric("file.mmap.pagesCommitted"),"Memory mapped pages committed to disk",+1);
    PROFILER.stopChrono(PROFILER.getProcessMetric("file.mmap.commitPages"),"Commit memory mapped pages to disk",timer);
    return !dirty;
  }
  finally {
    releaseExclusiveLock();
  }
}
