{
  if (_clazz == null) {
    final ODatabaseRecord database=getDatabaseIfDefined();
    if (database != null && database.getStorageVersions() != null && database.getStorageVersions().classesAreDetectedByClusterId()) {
      if (_recordId.clusterId < 0) {
        checkForLoading();
        checkForFields("@class");
      }
 else {
        final OSchema schema=database.getMetadata().getSchema();
        if (schema != null)         _clazz=schema.getClassByClusterId(_recordId.clusterId);
      }
    }
 else {
      checkForLoading();
      checkForFields("@class");
    }
  }
  return _clazz;
}
