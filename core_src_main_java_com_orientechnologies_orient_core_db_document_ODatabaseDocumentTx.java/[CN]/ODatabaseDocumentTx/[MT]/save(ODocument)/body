{
  iContent.validate();
  try {
    if (iContent.getIdentity().isNew()) {
      if (iContent.getClassName() != null)       checkSecurity(ODatabaseSecurityResources.CLASS,ORole.PERMISSION_CREATE,iContent.getClassName());
      if (iContent.getSchemaClass() != null) {
        String clusterName=getClusterNameById(iContent.getSchemaClass().getDefaultClusterId());
        super.save(iContent,clusterName);
        return this;
      }
    }
 else {
      if (iContent.getClassName() != null)       checkSecurity(ODatabaseSecurityResources.CLASS,ORole.PERMISSION_UPDATE,iContent.getClassName());
    }
    super.save(iContent);
  }
 catch (  Exception e) {
    OLogManager.instance().exception("Error on saving record #%s of class '%s'",e,ODatabaseException.class,iContent.getIdentity(),(iContent.getClassName() != null ? iContent.getClassName() : "?"));
  }
  return this;
}
