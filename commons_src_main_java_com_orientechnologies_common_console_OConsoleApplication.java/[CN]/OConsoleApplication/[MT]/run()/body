{
  interactiveMode=isInteractiveMode(args);
  onBefore();
  int result=0;
  if (interactiveMode) {
    String consoleInput;
    while (true) {
      if (!reader.hasPromptSupport()) {
        out.println();
        out.print("orientdb> ");
      }
      consoleInput=reader.readLine();
      if (consoleInput == null || consoleInput.length() == 0)       continue;
      if (!executeCommands(new Scanner(consoleInput),false))       break;
    }
  }
 else {
    result=executeBatch(getCommandLine(args)) ? 0 : 1;
  }
  onAfter();
  return result;
}
