{
  acquireSharedLock();
  try {
    OClientConnection conn=null;
    conn=connections.get(iChannelId);
    if (conn != null && conn.getChannel().socket != socket)     throw new IllegalStateException("Requested sessionId " + iChannelId + " by connection "+ socket+ " while it's tied to connection "+ conn.getChannel().socket);
    return conn;
  }
  finally {
    releaseSharedLock();
  }
}
