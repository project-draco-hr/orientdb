{
  ODistributedDatabaseInfo db=getDatabase(iDb.getName());
  if (db != null)   throw new ODistributedSynchronizationException("Database '" + iDb.getName() + "' is already shared on remote server node '"+ id+ "'");
  db=createDatabaseEntry(iDb.getName(),SYNCH_TYPE.SYNCH,iUserName,iUserPasswd);
  if (status != STATUS.ONLINE)   throw new ODistributedSynchronizationException("Cannot share database '" + db.databaseName + "' on remote server node '"+ id+ "' because is disconnected");
  status=STATUS.SYNCHRONIZING;
  OLogManager.instance().info(this,"<-> DB %s: sharing database exporting to the remote server %s via streaming across the network...",db.databaseName,id);
  final long time=System.currentTimeMillis();
  db.storage=new ODistributedStorage(replicator,replicator.getManager().getId(),id,"rw",replicator.getConflictResolver());
  db.storage.share(iDb,db.databaseName,db.userName,db.userPassword,iRemoteEngine);
  db.sessionId=db.storage.getSessionId();
  OLogManager.instance().info(this,"<-> DB %s: sharing completed (%dms)",db.databaseName,System.currentTimeMillis() - time);
  status=STATUS.ONLINE;
  startDatabaseReplication(db);
  return db;
}
