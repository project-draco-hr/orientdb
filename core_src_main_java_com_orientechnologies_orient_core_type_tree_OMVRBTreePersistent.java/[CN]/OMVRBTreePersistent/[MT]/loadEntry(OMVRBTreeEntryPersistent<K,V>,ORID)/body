{
  checkForOptimization();
  OMVRBTreeEntryPersistent<K,V> entry=searchNodeInCache(iRecordId);
  if (entry == null) {
    entry=createEntry(iParent,iRecordId);
    addNodeInCache(entry);
    if (entry.parent == null && entry.parentRid.isValid()) {
      final OMVRBTreeEntryPersistent<K,V> parentNode=searchNodeInCache(entry.parentRid);
      if (parentNode != null)       entry.setParent(parentNode);
    }
    if (entry.left == null && entry.leftRid.isValid()) {
      final OMVRBTreeEntryPersistent<K,V> leftNode=searchNodeInCache(entry.leftRid);
      if (leftNode != null)       entry.setLeft(leftNode);
    }
    if (entry.right == null && entry.rightRid.isValid()) {
      final OMVRBTreeEntryPersistent<K,V> rightNode=searchNodeInCache(entry.rightRid);
      if (rightNode != null)       entry.setRight(rightNode);
    }
  }
 else {
    if (iParent != null)     entry.setParent(iParent);
  }
  entry.checkEntryStructure();
  return entry;
}
