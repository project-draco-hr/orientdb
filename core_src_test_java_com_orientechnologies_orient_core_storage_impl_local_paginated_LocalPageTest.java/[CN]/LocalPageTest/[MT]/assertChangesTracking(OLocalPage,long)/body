{
  long restoredPagePointer=directMemory.allocate(new byte[OLocalPage.PAGE_SIZE]);
  try {
    OLocalPage restoredPage=new OLocalPage(restoredPagePointer,false);
    restoredPage.restoreChanges(localPage.getPageChanges());
    Assert.assertEquals(directMemory.get(restoredPagePointer + SYSTEM_OFFSET,OLocalPage.PAGE_SIZE - SYSTEM_OFFSET),directMemory.get(pagePointer + SYSTEM_OFFSET,OLocalPage.PAGE_SIZE - SYSTEM_OFFSET));
  }
  finally {
    directMemory.free(restoredPagePointer);
  }
  localPage.revertChanges(localPage.getPageChanges());
  Assert.assertEquals(directMemory.get(pagePointer + SYSTEM_OFFSET,OLocalPage.PAGE_SIZE - SYSTEM_OFFSET),new byte[OLocalPage.PAGE_SIZE - SYSTEM_OFFSET]);
}
