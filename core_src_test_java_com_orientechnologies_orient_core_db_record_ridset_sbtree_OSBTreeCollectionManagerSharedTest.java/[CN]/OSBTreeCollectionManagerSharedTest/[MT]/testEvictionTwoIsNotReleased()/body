{
  List<OSBTreeBonsai<OIdentifiable,Integer>> createdTrees=new ArrayList<OSBTreeBonsai<OIdentifiable,Integer>>();
  for (int i=0; i < 10; i++) {
    OSBTreeBonsai<OIdentifiable,Integer> tree=sbTreeCollectionManager.createSBTree();
    createdTrees.add(tree);
    sbTreeCollectionManager.releaseSBTree(tree.getRootBucketPointer());
  }
  Assert.assertEquals(sbTreeCollectionManager.size(),10);
  for (int i=0; i < 10; i++) {
    OSBTreeBonsai<OIdentifiable,Integer> createdTree=createdTrees.get(i);
    OSBTreeBonsai<OIdentifiable,Integer> cachedTree=sbTreeCollectionManager.loadSBTree(createdTree.getRootBucketPointer());
    Assert.assertSame(cachedTree,createdTree);
    if (i > 1)     sbTreeCollectionManager.releaseSBTree(createdTree.getRootBucketPointer());
  }
  OSBTreeBonsai<OIdentifiable,Integer> tree=sbTreeCollectionManager.createSBTree();
  sbTreeCollectionManager.releaseSBTree(tree.getRootBucketPointer());
  Assert.assertEquals(sbTreeCollectionManager.size(),8);
  for (int i=9; i >= 5; i--) {
    OSBTreeBonsai<OIdentifiable,Integer> createdTree=createdTrees.get(i);
    OSBTreeBonsai<OIdentifiable,Integer> cachedTree=sbTreeCollectionManager.loadSBTree(createdTree.getRootBucketPointer());
    Assert.assertSame(cachedTree,createdTree);
    sbTreeCollectionManager.releaseSBTree(createdTree.getRootBucketPointer());
  }
  for (int i=4; i >= 2; i--) {
    OSBTreeBonsai<OIdentifiable,Integer> createdTree=createdTrees.get(i);
    OSBTreeBonsai<OIdentifiable,Integer> cachedTree=sbTreeCollectionManager.loadSBTree(createdTree.getRootBucketPointer());
    Assert.assertNotSame(cachedTree,createdTree);
    sbTreeCollectionManager.releaseSBTree(createdTree.getRootBucketPointer());
  }
  for (int i=4; i >= 2; i--) {
    OSBTreeBonsai<OIdentifiable,Integer> createdTree=createdTrees.get(i);
    OSBTreeBonsai<OIdentifiable,Integer> cachedTree=sbTreeCollectionManager.loadSBTree(createdTree.getRootBucketPointer());
    Assert.assertNotSame(cachedTree,createdTree);
    sbTreeCollectionManager.releaseSBTree(createdTree.getRootBucketPointer());
  }
  for (int i=4; i >= 2; i--) {
    OSBTreeBonsai<OIdentifiable,Integer> createdTree=createdTrees.get(i);
    OSBTreeBonsai<OIdentifiable,Integer> cachedTree=sbTreeCollectionManager.loadSBTree(createdTree.getRootBucketPointer());
    Assert.assertNotSame(cachedTree,createdTree);
    sbTreeCollectionManager.releaseSBTree(createdTree.getRootBucketPointer());
  }
}
