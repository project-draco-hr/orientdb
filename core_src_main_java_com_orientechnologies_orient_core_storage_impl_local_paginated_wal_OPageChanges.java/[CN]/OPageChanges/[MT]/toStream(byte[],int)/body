{
  int initialOffset=offset;
  offset+=OIntegerSerializer.INT_SIZE;
  offset=serializeCompressedInteger(content,offset,size);
  for (int i=0; i < size; i++) {
    ChangesBucket changesBucket=changesBuckets[i];
    offset=serializeCompressedInteger(content,offset,changesBucket.startPosition);
    offset=serializeCompressedInteger(content,offset,changesBucket.newValues.length);
    System.arraycopy(changesBucket.newValues,0,content,offset,changesBucket.newValues.length);
    offset+=changesBucket.newValues.length;
    System.arraycopy(changesBucket.oldValues,0,content,offset,changesBucket.oldValues.length);
    offset+=changesBucket.oldValues.length;
  }
  OIntegerSerializer.INSTANCE.serializeNative(offset - initialOffset,content,initialOffset);
  return offset;
}
