{
  if (vertexCache != null && id != null && v != null) {
    if (v.getRecord().getIdentity().isNew()) {
      v.getRecord().setDirty();
      v.save();
    }
    if (!v.getRecord().getIdentity().isPersistent())     OLogManager.instance().warn(this,"Cannot put a non persistent object in cache, key=%s, vertex=%s",id,v);
    vertexCache.put(id,v.copy());
    lastCachedId=id;
    lastCachedVertex=v.copy();
  }
}
