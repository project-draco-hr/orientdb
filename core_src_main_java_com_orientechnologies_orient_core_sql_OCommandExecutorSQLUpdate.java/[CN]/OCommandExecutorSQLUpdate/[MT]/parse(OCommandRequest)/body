{
  final ODatabaseRecord database=getDatabase();
  database.checkSecurity(ODatabaseSecurityResources.COMMAND,ORole.PERMISSION_READ);
  init(((OCommandRequestText)iRequest).getText());
  setEntries.clear();
  addEntries.clear();
  putEntries.clear();
  removeEntries.clear();
  incrementEntries.clear();
  query=null;
  recordCount=0;
  final StringBuilder word=new StringBuilder();
  int pos=OSQLHelper.nextWord(text,textUpperCase,0,word,true);
  if (pos == -1 || !word.toString().equals(OCommandExecutorSQLUpdate.KEYWORD_UPDATE))   throw new OCommandSQLParsingException("Keyword " + OCommandExecutorSQLUpdate.KEYWORD_UPDATE + " not found. Use "+ getSyntax(),text,0);
  int newPos=OSQLHelper.nextWord(text,textUpperCase,pos,word,true);
  if (newPos == -1)   throw new OCommandSQLParsingException("Invalid target. Use " + getSyntax(),text,pos);
  pos=newPos;
  subjectName=word.toString();
  newPos=OSQLHelper.nextWord(text,textUpperCase,pos,word,true);
  if (newPos == -1 || (!word.toString().equals(KEYWORD_SET) && !word.toString().equals(KEYWORD_ADD) && !word.toString().equals(KEYWORD_PUT)&& !word.toString().equals(KEYWORD_REMOVE)&& !word.toString().equals(KEYWORD_INCREMENT)))   throw new OCommandSQLParsingException("Expected keyword " + KEYWORD_SET + ","+ KEYWORD_ADD+ ","+ KEYWORD_PUT+ ","+ KEYWORD_REMOVE+ " or "+ KEYWORD_INCREMENT+ ". Use "+ getSyntax(),text,pos);
  pos=newPos;
  while (pos != -1 && !word.toString().equals(OCommandExecutorSQLAbstract.KEYWORD_WHERE)) {
    if (word.toString().equals(KEYWORD_SET))     pos=parseSetFields(word,pos,setEntries);
 else     if (word.toString().equals(KEYWORD_ADD))     pos=parseAddFields(word,pos);
 else     if (word.toString().equals(KEYWORD_PUT))     pos=parsePutFields(word,pos);
 else     if (word.toString().equals(KEYWORD_REMOVE))     pos=parseRemoveFields(word,pos);
 else     if (word.toString().equals(KEYWORD_INCREMENT))     pos=parseIncrementFields(word,pos);
 else     break;
  }
  final String additionalStatement=word.toString();
  if (additionalStatement.equals(OCommandExecutorSQLAbstract.KEYWORD_WHERE) || additionalStatement.equals(OCommandExecutorSQLAbstract.KEYWORD_LIMIT))   query=new OSQLAsynchQuery<ODocument>("select from " + subjectName + " "+ additionalStatement+ " "+ text.substring(pos),this);
 else   query=new OSQLAsynchQuery<ODocument>("select from " + subjectName,this);
  return this;
}
